<Page x:Class="MarketDataCollector.Wpf.Views.SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      d:DesignHeight="900" d:DesignWidth="1200"
      Background="{DynamicResource ConsoleBackgroundDarkBrush}"
      Loaded="OnPageLoaded">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="350" />
        </Grid.ColumnDefinitions>

        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Padding="24,24,12,24">
            <StackPanel MaxWidth="800">
                <!-- Header -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                    <TextBlock Text="{StaticResource IconSettings}"
                               FontFamily="{StaticResource SymbolThemeFontFamily}"
                               FontSize="28"
                               Foreground="{StaticResource InfoColorBrush}"
                               VerticalAlignment="Center" />
                    <TextBlock Text="Settings"
                               Style="{StaticResource PageTitleStyle}"
                               Margin="12,0,0,0"
                               VerticalAlignment="Center" />
                </StackPanel>

                <!-- Appearance -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="Appearance" Style="{StaticResource CardHeaderStyle}" Margin="0,0,0,16" />

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="App Theme" Style="{StaticResource FormLabelStyle}" Margin="0,0,0,4" />
                            <ComboBox x:Name="ThemeCombo"
                                      Style="{StaticResource FormComboBoxStyle}"
                                      SelectionChanged="ThemeCombo_SelectionChanged">
                                <ComboBoxItem Content="Use system setting" Tag="Default" IsSelected="True" />
                                <ComboBoxItem Content="Light" Tag="Light" />
                                <ComboBoxItem Content="Dark" Tag="Dark" />
                            </ComboBox>
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Accent Color" Style="{StaticResource FormLabelStyle}" Margin="0,0,0,4" />
                            <ComboBox x:Name="AccentColorCombo" Style="{StaticResource FormComboBoxStyle}">
                                <ComboBoxItem Content="System default" Tag="System" IsSelected="True" />
                                <ComboBoxItem Content="Blue" Tag="Blue" />
                                <ComboBoxItem Content="Green" Tag="Green" />
                                <ComboBoxItem Content="Orange" Tag="Orange" />
                                <ComboBoxItem Content="Purple" Tag="Purple" />
                            </ComboBox>
                        </StackPanel>

                        <CheckBox x:Name="CompactModeToggle"
                                  Content="Compact Mode (Reduced padding)"
                                  Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                    </StackPanel>
                </Border>

                <!-- Notifications -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <TextBlock Text="{StaticResource IconBell}"
                                       FontFamily="{StaticResource SymbolThemeFontFamily}"
                                       FontSize="20"
                                       Foreground="{StaticResource InfoColorBrush}"
                                       VerticalAlignment="Center" />
                            <TextBlock Text="Notifications"
                                       Style="{StaticResource CardHeaderStyle}"
                                       Margin="8,0,0,0" />
                        </StackPanel>

                        <CheckBox x:Name="NotificationsEnabledToggle"
                                  Content="Enable Windows Notifications"
                                  IsChecked="True"
                                  Foreground="{StaticResource ConsoleTextPrimaryBrush}"
                                  Checked="NotificationsEnabled_Changed"
                                  Unchecked="NotificationsEnabled_Changed"
                                  Margin="0,0,0,16" />

                        <StackPanel x:Name="NotificationSettingsPanel">
                            <TextBlock Text="Notify me about:"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource ConsoleTextPrimaryBrush}"
                                       Margin="0,0,0,8" />

                            <CheckBox x:Name="NotifyConnectionCheck" Content="Connection status changes" IsChecked="True"
                                      Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,0,0,4" />
                            <CheckBox x:Name="NotifyErrorCheck" Content="Errors and warnings" IsChecked="True"
                                      Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,0,0,4" />
                            <CheckBox x:Name="NotifyBackfillCheck" Content="Backfill completion" IsChecked="True"
                                      Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,0,0,4" />
                            <CheckBox x:Name="NotifyDataGapsCheck" Content="Data gaps detected" IsChecked="True"
                                      Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,0,0,4" />
                            <CheckBox x:Name="NotifyStorageCheck" Content="Storage warnings (low space)" IsChecked="True"
                                      Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,0,0,12" />

                            <StackPanel Margin="0,0,0,12">
                                <TextBlock Text="Notification Sound" Style="{StaticResource FormLabelStyle}" Margin="0,0,0,4" />
                                <ComboBox x:Name="NotificationSoundCombo" Style="{StaticResource FormComboBoxStyle}">
                                    <ComboBoxItem Content="System default" Tag="Default" IsSelected="True" />
                                    <ComboBoxItem Content="Subtle" Tag="Subtle" />
                                    <ComboBoxItem Content="None" Tag="None" />
                                </ComboBox>
                            </StackPanel>
                        </StackPanel>

                        <Button Content="Send Test Notification"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Click="SendTestNotification_Click" />
                    </StackPanel>
                </Border>

                <!-- API Connection -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="API Connection" Style="{StaticResource CardHeaderStyle}" Margin="0,0,0,16" />

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Collector API Base URL" Style="{StaticResource FormLabelStyle}" Margin="0,0,0,4" />
                            <TextBox x:Name="ApiBaseUrlBox"
                                     Style="{StaticResource FormTextBoxStyle}"
                                     Text="http://localhost:8080" />
                        </StackPanel>

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Status Refresh Interval (seconds)" Style="{StaticResource FormLabelStyle}" Margin="0,0,0,4" />
                            <TextBox x:Name="StatusRefreshIntervalBox"
                                     Style="{StaticResource FormTextBoxStyle}"
                                     Text="2"
                                     Width="100"
                                     HorizontalAlignment="Left" />
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <Button Content="Test Connection"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Click="TestConnection_Click" />
                            <TextBlock x:Name="ConnectionTestResult"
                                       VerticalAlignment="Center"
                                       Margin="12,0,0,0" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Stored Credentials -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <TextBlock Text="{StaticResource IconKey}"
                                       FontFamily="{StaticResource SymbolThemeFontFamily}"
                                       FontSize="20"
                                       Foreground="{StaticResource InfoColorBrush}"
                                       VerticalAlignment="Center" />
                            <TextBlock Text="Stored Credentials"
                                       Style="{StaticResource CardHeaderStyle}"
                                       Margin="8,0,0,0" />
                        </StackPanel>

                        <!-- Info Banner -->
                        <Border Background="{StaticResource InfoColorBrush}"
                                Opacity="0.15"
                                CornerRadius="6"
                                Padding="12"
                                Margin="0,0,0,16">
                            <StackPanel>
                                <TextBlock Text="Windows Credential Manager"
                                           FontWeight="SemiBold"
                                           Foreground="{StaticResource InfoColorBrush}" />
                                <TextBlock Text="All API keys and credentials are securely stored in Windows Credential Manager, not in config files."
                                           Foreground="{StaticResource ConsoleTextSecondaryBrush}"
                                           TextWrapping="Wrap" />
                            </StackPanel>
                        </Border>

                        <TextBlock Text="Stored credentials for this application:"
                                   Style="{StaticResource FormLabelStyle}"
                                   Margin="0,0,0,8" />

                        <ListView x:Name="StoredCredentialsList"
                                  Background="Transparent"
                                  BorderThickness="0"
                                  MaxHeight="300">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{StaticResource ConsoleBackgroundMediumBrush}"
                                            CornerRadius="8"
                                            Padding="12"
                                            Margin="0,4">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>

                                            <Ellipse Grid.Column="0" Width="12" Height="12"
                                                     VerticalAlignment="Center"
                                                     Fill="{Binding TestStatusColor}" />

                                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="12,0">
                                                <TextBlock Text="{Binding Name}"
                                                           FontWeight="SemiBold"
                                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                                                <TextBlock Text="{Binding Status}"
                                                           Foreground="{StaticResource ConsoleTextSecondaryBrush}"
                                                           FontSize="12" />
                                            </StackPanel>

                                            <StackPanel Grid.Column="2" Orientation="Horizontal">
                                                <Button Content="Test"
                                                        Style="{StaticResource SecondaryButtonStyle}"
                                                        Tag="{Binding Resource}"
                                                        Click="TestCredential_Click"
                                                        Margin="0,0,8,0" />
                                                <Button Style="{StaticResource GhostButtonStyle}"
                                                        Tag="{Binding Name}"
                                                        Click="RemoveCredential_Click">
                                                    <TextBlock Text="{StaticResource IconDelete}"
                                                               FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                               FontSize="14" />
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>

                        <TextBlock x:Name="NoCredentialsText"
                                   Text="No credentials stored."
                                   Visibility="Collapsed"
                                   Foreground="{StaticResource ConsoleTextMutedBrush}"
                                   Margin="0,8,0,0" />

                        <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                            <Button Content="Test All Credentials"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Click="TestAllCredentials_Click"
                                    Margin="0,0,8,0" />
                            <Button Content="Clear All Credentials"
                                    Style="{StaticResource GhostButtonStyle}"
                                    Click="ClearAllCredentials_Click" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Configuration File -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="Configuration" Style="{StaticResource CardHeaderStyle}" Margin="0,0,0,16" />

                        <StackPanel Margin="0,0,0,12">
                            <TextBlock Text="Configuration File Path" Style="{StaticResource FormLabelStyle}" Margin="0,0,0,4" />
                            <TextBlock x:Name="ConfigPathText"
                                       FontFamily="Cascadia Code, Consolas, monospace"
                                       Foreground="{StaticResource ConsoleTextSecondaryBrush}"
                                       TextWrapping="Wrap" />
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <Button Content="Open in Explorer"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Click="OpenConfigFolder_Click"
                                    Margin="0,0,8,0" />
                            <Button Content="Reload Configuration"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Click="ReloadConfig_Click"
                                    Margin="0,0,8,0" />
                            <Button Content="Reset to Defaults"
                                    Style="{StaticResource GhostButtonStyle}"
                                    Click="ResetToDefaults_Click" />
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Performance -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="Performance" Style="{StaticResource CardHeaderStyle}" Margin="0,0,0,16" />

                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,12,0">
                                <TextBlock Text="Max Concurrent Downloads" Style="{StaticResource FormLabelStyle}" Margin="0,0,0,4" />
                                <TextBox x:Name="MaxConcurrentDownloadsBox"
                                         Style="{StaticResource FormTextBoxStyle}"
                                         Text="4" />
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Write Buffer Size (KB)" Style="{StaticResource FormLabelStyle}" Margin="0,0,0,4" />
                                <TextBox x:Name="WriteBufferSizeBox"
                                         Style="{StaticResource FormTextBoxStyle}"
                                         Text="64" />
                            </StackPanel>
                        </Grid>

                        <CheckBox x:Name="EnableMetricsToggle"
                                  Content="Enable Performance Metrics"
                                  IsChecked="True"
                                  Foreground="{StaticResource ConsoleTextPrimaryBrush}"
                                  Margin="0,0,0,8" />

                        <CheckBox x:Name="EnableDebugLoggingToggle"
                                  Content="Enable Debug Logging (Verbose)"
                                  Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                    </StackPanel>
                </Border>

                <!-- About -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="About" Style="{StaticResource CardHeaderStyle}" Margin="0,0,0,16" />

                        <TextBlock Text="Market Data Collector"
                                   FontWeight="SemiBold"
                                   FontSize="16"
                                   Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                        <TextBlock Text="Version 1.6.1"
                                   Foreground="{StaticResource ConsoleTextMutedBrush}"
                                   Margin="0,0,0,8" />
                        <TextBlock Text="A high-performance market data collection system for real-time and historical market data."
                                   TextWrapping="Wrap"
                                   Foreground="{StaticResource ConsoleTextSecondaryBrush}"
                                   Margin="0,0,0,16" />

                        <StackPanel>
                            <Button Content="Documentation"
                                    Style="{StaticResource GhostButtonStyle}"
                                    Click="OpenDocumentation_Click"
                                    HorizontalAlignment="Left"
                                    Margin="0,0,0,4" />
                            <Button Content="Report an Issue"
                                    Style="{StaticResource GhostButtonStyle}"
                                    Click="OpenIssues_Click"
                                    HorizontalAlignment="Left"
                                    Margin="0,0,0,4" />
                            <Button Content="Check for Updates"
                                    Style="{StaticResource GhostButtonStyle}"
                                    Click="CheckForUpdates_Click"
                                    HorizontalAlignment="Left" />
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Right Panel - Quick Reference -->
        <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" Padding="12,24,24,24">
            <StackPanel>
                <!-- Help -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                            <TextBlock Text="{StaticResource IconHelp}"
                                       FontFamily="{StaticResource SymbolThemeFontFamily}"
                                       FontSize="16"
                                       Foreground="{StaticResource InfoColorBrush}"
                                       VerticalAlignment="Center" />
                            <TextBlock Text="Quick Reference"
                                       Style="{StaticResource CardHeaderStyle}"
                                       Margin="8,0,0,0" />
                        </StackPanel>

                        <Expander Header="Keyboard Shortcuts" IsExpanded="True">
                            <Grid Margin="0,8,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Ctrl+F"
                                           FontFamily="Cascadia Code, Consolas" FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" Margin="0,4" />
                                <TextBlock Grid.Row="0" Grid.Column="1" Text="Search symbols"
                                           Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="12,4,0,4" />

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Ctrl+R"
                                           FontFamily="Cascadia Code, Consolas" FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" Margin="0,4" />
                                <TextBlock Grid.Row="1" Grid.Column="1" Text="Run backfill"
                                           Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="12,4,0,4" />

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Ctrl+S"
                                           FontFamily="Cascadia Code, Consolas" FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" Margin="0,4" />
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="Start collector"
                                           Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="12,4,0,4" />

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="F5"
                                           FontFamily="Cascadia Code, Consolas" FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" Margin="0,4" />
                                <TextBlock Grid.Row="3" Grid.Column="1" Text="Refresh status"
                                           Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="12,4,0,4" />

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Ctrl+,"
                                           FontFamily="Cascadia Code, Consolas" FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" Margin="0,4" />
                                <TextBlock Grid.Row="4" Grid.Column="1" Text="Open settings"
                                           Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="12,4,0,4" />
                            </Grid>
                        </Expander>

                        <Expander Header="Data Providers" IsExpanded="False" Margin="0,8,0,0">
                            <StackPanel Margin="0,8,0,0">
                                <TextBlock TextWrapping="Wrap" Foreground="{StaticResource ConsoleTextSecondaryBrush}">
                                    <Run FontWeight="SemiBold" Foreground="{StaticResource ConsoleTextPrimaryBrush}">Interactive Brokers:</Run>
                                    <LineBreak />
                                    <Run>Level 2 depth + tick data. Requires TWS/Gateway.</Run>
                                </TextBlock>
                                <TextBlock TextWrapping="Wrap" Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,8,0,0">
                                    <Run FontWeight="SemiBold" Foreground="{StaticResource ConsoleTextPrimaryBrush}">Alpaca:</Run>
                                    <LineBreak />
                                    <Run>Real-time trades/quotes via WebSocket. Free tier available.</Run>
                                </TextBlock>
                            </StackPanel>
                        </Expander>
                    </StackPanel>
                </Border>

                <!-- System Status -->
                <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="System Status"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource ConsoleTextPrimaryBrush}"
                                   Margin="0,0,0,12" />

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Config Status"
                                       Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,4" />
                            <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Margin="0,4">
                                <Ellipse x:Name="ConfigStatusDot" Width="8" Height="8"
                                         Fill="{StaticResource SuccessColorBrush}" Margin="0,0,4,0" />
                                <TextBlock x:Name="ConfigStatusText" Text="Valid"
                                           FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                            </StackPanel>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Credentials"
                                       Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,4" />
                            <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="0,4">
                                <Ellipse x:Name="CredentialsStatusDot" Width="8" Height="8"
                                         Fill="{StaticResource SuccessColorBrush}" Margin="0,0,4,0" />
                                <TextBlock x:Name="CredentialsStatusText" Text="3 stored"
                                           FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                            </StackPanel>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Last Auth"
                                       Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,4" />
                            <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Margin="0,4">
                                <Ellipse x:Name="LastAuthStatusDot" Width="8" Height="8"
                                         Fill="{StaticResource SuccessColorBrush}" Margin="0,0,4,0" />
                                <TextBlock x:Name="LastAuthText" Text="Never"
                                           FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                            </StackPanel>

                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Collector"
                                       Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,4" />
                            <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Margin="0,4">
                                <Ellipse x:Name="CollectorStatusDot" Width="8" Height="8"
                                         Fill="{StaticResource SuccessColorBrush}" Margin="0,0,4,0" />
                                <TextBlock x:Name="CollectorStatusText" Text="Running"
                                           FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                            </StackPanel>

                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Last Sync"
                                       Foreground="{StaticResource ConsoleTextSecondaryBrush}" Margin="0,4" />
                            <TextBlock x:Name="LastSyncText" Grid.Row="4" Grid.Column="1" Text="2 min ago"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource ConsoleTextPrimaryBrush}" Margin="0,4" />
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Recent Activity -->
                <Border Style="{StaticResource CardStyle}">
                    <StackPanel>
                        <TextBlock Text="Recent Activity"
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource ConsoleTextPrimaryBrush}"
                                   Margin="0,0,0,12" />

                        <ListView x:Name="RecentActivityList"
                                  Background="Transparent"
                                  BorderThickness="0"
                                  MaxHeight="200">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="{Binding Icon}"
                                                   FontFamily="{StaticResource SymbolThemeFontFamily}"
                                                   FontSize="14"
                                                   Foreground="{Binding IconColor}"
                                                   Margin="0,0,8,0" />
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="{Binding Message}"
                                                       Foreground="{StaticResource ConsoleTextPrimaryBrush}"
                                                       TextTrimming="CharacterEllipsis" />
                                            <TextBlock Text="{Binding Time}"
                                                       Foreground="{StaticResource ConsoleTextMutedBrush}"
                                                       FontSize="11" />
                                        </StackPanel>
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
