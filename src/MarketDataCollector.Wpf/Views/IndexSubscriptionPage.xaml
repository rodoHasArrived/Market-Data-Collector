<Page x:Class="MarketDataCollector.Wpf.Views.IndexSubscriptionPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="{DynamicResource ConsoleBackgroundDarkBrush}"
      Loaded="OnPageLoaded">
    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="24">
        <StackPanel MaxWidth="1200">

            <!-- Header -->
            <StackPanel Margin="0,0,0,24">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                    <TextBlock Text="&#xE8FD;" FontFamily="{StaticResource SymbolThemeFontFamily}"
                               FontSize="28" Foreground="{StaticResource InfoColorBrush}" VerticalAlignment="Center" />
                    <TextBlock Text="Index Subscriptions" Style="{StaticResource PageTitleStyle}" Margin="12,0,0,0" VerticalAlignment="Center" />
                </StackPanel>
                <TextBlock Text="Subscribe to index constituents (S&amp;P 500, Nasdaq 100, Dow 30, sector ETFs) for bulk symbol management"
                           Style="{StaticResource CardDescriptionStyle}" />
            </StackPanel>

            <!-- Major Indices -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                <StackPanel>
                    <TextBlock Text="Major Indices" Style="{StaticResource CardHeaderStyle}" Margin="0,0,0,16" />
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="16" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="16" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Border Grid.Column="0" Style="{StaticResource CardStyle}" Padding="16">
                            <StackPanel>
                                <TextBlock Text="S&amp;P 500" FontSize="16" FontWeight="Bold" Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                                <TextBlock Text="~503 constituents" FontSize="12" Foreground="{StaticResource ConsoleTextMutedBrush}" Margin="0,4,0,12" />
                                <Button Content="Subscribe" Click="SubscribeSP500_Click" Style="{StaticResource PrimaryButtonStyle}" HorizontalAlignment="Left" />
                            </StackPanel>
                        </Border>
                        <Border Grid.Column="2" Style="{StaticResource CardStyle}" Padding="16">
                            <StackPanel>
                                <TextBlock Text="Nasdaq 100" FontSize="16" FontWeight="Bold" Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                                <TextBlock Text="~101 constituents" FontSize="12" Foreground="{StaticResource ConsoleTextMutedBrush}" Margin="0,4,0,12" />
                                <Button Content="Subscribe" Click="SubscribeNasdaq100_Click" Style="{StaticResource PrimaryButtonStyle}" HorizontalAlignment="Left" />
                            </StackPanel>
                        </Border>
                        <Border Grid.Column="4" Style="{StaticResource CardStyle}" Padding="16">
                            <StackPanel>
                                <TextBlock Text="Dow Jones 30" FontSize="16" FontWeight="Bold" Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                                <TextBlock Text="30 constituents" FontSize="12" Foreground="{StaticResource ConsoleTextMutedBrush}" Margin="0,4,0,12" />
                                <Button Content="Subscribe" Click="SubscribeDow30_Click" Style="{StaticResource PrimaryButtonStyle}" HorizontalAlignment="Left" />
                            </StackPanel>
                        </Border>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Sector ETFs -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                <StackPanel>
                    <TextBlock Text="Sector ETFs" Style="{StaticResource CardHeaderStyle}" Margin="0,0,0,16" />
                    <ListView x:Name="SectorETFsList" SelectionMode="Single" MaxHeight="300"
                              Background="Transparent" BorderThickness="0">
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                <Setter Property="Padding" Value="0" />
                                <Setter Property="Margin" Value="0,0,0,4" />
                                <Setter Property="Background" Value="Transparent" />
                            </Style>
                        </ListView.ItemContainerStyle>
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Border Background="{StaticResource ConsoleBackgroundLightBrush}"
                                        CornerRadius="6" Padding="12,8"
                                        BorderBrush="{StaticResource ConsoleBorderBrush}" BorderThickness="1">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="80" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="{Binding Symbol}" FontSize="13" FontWeight="Bold"
                                                   Foreground="{StaticResource InfoColorBrush}" VerticalAlignment="Center" />
                                        <TextBlock Grid.Column="1" Text="{Binding Name}" FontSize="13"
                                                   Foreground="{StaticResource ConsoleTextPrimaryBrush}" VerticalAlignment="Center" />
                                        <TextBlock Grid.Column="2" Text="{Binding HoldingsText}" FontSize="12"
                                                   Foreground="{StaticResource ConsoleTextMutedBrush}"
                                                   VerticalAlignment="Center" Margin="12,0" />
                                        <Button Grid.Column="3" Content="Subscribe" Click="SubscribeSectorETF_Click"
                                                Style="{StaticResource SecondaryButtonStyle}" Tag="{Binding Symbol}" />
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>
            </Border>

            <!-- Custom Index -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                <StackPanel>
                    <TextBlock Text="Custom Index / ETF" Style="{StaticResource CardHeaderStyle}" Margin="0,0,0,16" />
                    <TextBlock Text="Enter an ETF or index symbol to load its constituents"
                               FontSize="12" Foreground="{StaticResource ConsoleTextMutedBrush}" Margin="0,0,0,12" />
                    <StackPanel Orientation="Horizontal">
                        <TextBox x:Name="CustomSymbolBox" Width="200" Margin="0,0,12,0"
                                 Style="{StaticResource FormTextBoxStyle}" />
                        <Button Content="Load Constituents" Click="LoadCustomIndex_Click"
                                Style="{StaticResource PrimaryButtonStyle}" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Subscription Options -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                <StackPanel>
                    <TextBlock Text="Subscription Options" Style="{StaticResource CardHeaderStyle}" Margin="0,0,0,16" />
                    <CheckBox x:Name="SubscribeTradesCheck" Content="Subscribe to trades" IsChecked="True"
                              Foreground="{StaticResource ConsoleTextPrimaryBrush}" Margin="0,0,0,8" />
                    <CheckBox x:Name="SubscribeDepthCheck" Content="Subscribe to depth/L2 data" IsChecked="False"
                              Foreground="{StaticResource ConsoleTextPrimaryBrush}" Margin="0,0,0,8" />
                    <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                        <TextBlock Text="Depth levels:" Foreground="{StaticResource ConsoleTextSecondaryBrush}"
                                   VerticalAlignment="Center" Margin="0,0,8,0" />
                        <ComboBox x:Name="DepthLevelsCombo" SelectedIndex="1" Width="80">
                            <ComboBoxItem Content="5" />
                            <ComboBoxItem Content="10" />
                            <ComboBoxItem Content="20" />
                        </ComboBox>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Status -->
            <Border x:Name="StatusPanel" Style="{StaticResource CardStyle}" Visibility="Collapsed">
                <StackPanel>
                    <TextBlock x:Name="StatusText" Text="" FontSize="13"
                               Foreground="{StaticResource ConsoleTextPrimaryBrush}" />
                    <ProgressBar x:Name="SubscriptionProgress" IsIndeterminate="True" Height="4" Margin="0,8,0,0"
                                 Visibility="Collapsed" Foreground="{StaticResource InfoColorBrush}" />
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</Page>
