<Page x:Class="MarketDataCollector.Wpf.Views.DashboardPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      mc:Ignorable="d"
      d:DesignHeight="800" d:DesignWidth="1200"
      Background="{DynamicResource ConsoleBackgroundDarkBrush}"
      Loaded="OnPageLoaded"
      Unloaded="OnPageUnloaded">

    <ScrollViewer VerticalScrollBarVisibility="Auto"
                  Padding="24">
        <StackPanel MaxWidth="1400">
            <!-- Page Header -->
            <StackPanel Margin="0,0,0,24">
                <TextBlock Text="Dashboard"
                           Style="{StaticResource PageTitleStyle}" />
                <TextBlock Text="Real-time overview of your market data collection"
                           Style="{StaticResource PageSubtitleStyle}" />
            </StackPanel>

            <!-- Metric Cards Row -->
            <Grid Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="16" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="16" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="16" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Published Events -->
                <Border Grid.Column="0" Style="{StaticResource MetricCardSuccessStyle}">
                    <StackPanel>
                        <TextBlock Text="PUBLISHED"
                                   Style="{StaticResource MetricLabelStyle}" />
                        <TextBlock x:Name="PublishedCount"
                                   Text="0"
                                   Style="{StaticResource MetricValueStyle}"
                                   Foreground="{StaticResource SuccessColorBrush}"
                                   Margin="0,8,0,0" />
                        <TextBlock Text="Events received"
                                   Style="{StaticResource CardDescriptionStyle}" />
                    </StackPanel>
                </Border>

                <!-- Dropped Events -->
                <Border Grid.Column="2" Style="{StaticResource MetricCardDangerStyle}">
                    <StackPanel>
                        <TextBlock Text="DROPPED"
                                   Style="{StaticResource MetricLabelStyle}" />
                        <TextBlock x:Name="DroppedCount"
                                   Text="0"
                                   Style="{StaticResource MetricValueStyle}"
                                   Foreground="{StaticResource ErrorColorBrush}"
                                   Margin="0,8,0,0" />
                        <TextBlock Text="Events lost"
                                   Style="{StaticResource CardDescriptionStyle}" />
                    </StackPanel>
                </Border>

                <!-- Integrity Events -->
                <Border Grid.Column="4" Style="{StaticResource MetricCardWarningStyle}">
                    <StackPanel>
                        <TextBlock Text="INTEGRITY"
                                   Style="{StaticResource MetricLabelStyle}" />
                        <TextBlock x:Name="IntegrityCount"
                                   Text="0"
                                   Style="{StaticResource MetricValueStyle}"
                                   Foreground="{StaticResource WarningColorBrush}"
                                   Margin="0,8,0,0" />
                        <TextBlock Text="Sequence issues"
                                   Style="{StaticResource CardDescriptionStyle}" />
                    </StackPanel>
                </Border>

                <!-- Historical Bars -->
                <Border Grid.Column="6" Style="{StaticResource MetricCardInfoStyle}">
                    <StackPanel>
                        <TextBlock Text="HISTORICAL"
                                   Style="{StaticResource MetricLabelStyle}" />
                        <TextBlock x:Name="HistoricalCount"
                                   Text="0"
                                   Style="{StaticResource MetricValueStyle}"
                                   Foreground="{StaticResource InfoColorBrush}"
                                   Margin="0,8,0,0" />
                        <TextBlock Text="Bars loaded"
                                   Style="{StaticResource CardDescriptionStyle}" />
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Provider Status Section -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,24">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                        <TextBlock Text="{StaticResource IconProvider}"
                                   FontFamily="{StaticResource SymbolThemeFontFamily}"
                                   FontSize="20"
                                   Foreground="{StaticResource InfoColorBrush}"
                                   VerticalAlignment="Center" />
                        <TextBlock Text="Provider Status"
                                   Style="{StaticResource CardHeaderStyle}"
                                   Margin="12,0,0,0" />
                    </StackPanel>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <!-- Active Provider -->
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Active Provider"
                                       Style="{StaticResource FormLabelStyle}" />
                            <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                <Ellipse Width="10" Height="10"
                                         Fill="{StaticResource SuccessColorBrush}"
                                         VerticalAlignment="Center" />
                                <TextBlock x:Name="ActiveProviderText"
                                           Text="Not Connected"
                                           FontSize="16"
                                           FontWeight="SemiBold"
                                           Foreground="{StaticResource ConsoleTextPrimaryBrush}"
                                           Margin="8,0,0,0"
                                           VerticalAlignment="Center" />
                            </StackPanel>
                        </StackPanel>

                        <!-- Latency -->
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Latency"
                                       Style="{StaticResource FormLabelStyle}" />
                            <TextBlock x:Name="LatencyText"
                                       Text="-- ms"
                                       Style="{StaticResource MonoTextStyle}"
                                       FontSize="16"
                                       Margin="0,4,0,0" />
                        </StackPanel>

                        <!-- Uptime -->
                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Uptime"
                                       Style="{StaticResource FormLabelStyle}" />
                            <TextBlock x:Name="UptimeText"
                                       Text="--:--:--"
                                       Style="{StaticResource MonoTextStyle}"
                                       FontSize="16"
                                       Margin="0,4,0,0" />
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Activity Log Section -->
            <Border Style="{StaticResource TerminalCardStyle}">
                <StackPanel>
                    <!-- Terminal Header -->
                    <Border Style="{StaticResource TerminalHeaderStyle}">
                        <StackPanel Orientation="Horizontal">
                            <Ellipse Width="12" Height="12" Fill="#f85149" />
                            <Ellipse Width="12" Height="12" Fill="#d29922" Margin="8,0,0,0" />
                            <Ellipse Width="12" Height="12" Fill="#3fb950" Margin="8,0,0,0" />
                            <TextBlock Text="Activity Log"
                                       FontSize="13"
                                       Foreground="{StaticResource ConsoleTextSecondaryBrush}"
                                       Margin="16,0,0,0"
                                       VerticalAlignment="Center" />
                        </StackPanel>
                    </Border>

                    <!-- Terminal Body -->
                    <Border Style="{StaticResource TerminalBodyStyle}"
                            MinHeight="200"
                            MaxHeight="300">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel x:Name="ActivityLogPanel">
                                <!-- Activity entries will be added here -->
                                <TextBlock Style="{StaticResource TerminalPromptStyle}">
                                    <Run Text="$" Foreground="{StaticResource SuccessColorBrush}" />
                                    <Run Text=" System initialized" Foreground="{StaticResource ConsoleTextSecondaryBrush}" />
                                </TextBlock>
                                <TextBlock Style="{StaticResource TerminalMessageStyle}"
                                           Text="  Waiting for data..." />
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Quick Actions -->
            <Border Style="{StaticResource CardStyle}" Margin="0,24,0,0">
                <StackPanel>
                    <TextBlock Text="Quick Actions"
                               Style="{StaticResource CardHeaderStyle}"
                               Margin="0,0,0,16" />

                    <WrapPanel>
                        <Button Style="{StaticResource PrimaryButtonStyle}"
                                Margin="0,0,12,12"
                                Click="OnStartCollectorClick">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{StaticResource IconPlay}"
                                           FontFamily="{StaticResource SymbolThemeFontFamily}"
                                           FontSize="14"
                                           VerticalAlignment="Center" />
                                <TextBlock Text="Start Collector"
                                           Margin="8,0,0,0"
                                           VerticalAlignment="Center" />
                            </StackPanel>
                        </Button>

                        <Button Style="{StaticResource SecondaryButtonStyle}"
                                Margin="0,0,12,12"
                                Click="OnRunBackfillClick">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{StaticResource IconDownload}"
                                           FontFamily="{StaticResource SymbolThemeFontFamily}"
                                           FontSize="14"
                                           VerticalAlignment="Center" />
                                <TextBlock Text="Run Backfill"
                                           Margin="8,0,0,0"
                                           VerticalAlignment="Center" />
                            </StackPanel>
                        </Button>

                        <Button Style="{StaticResource GhostButtonStyle}"
                                Margin="0,0,12,12"
                                Click="OnViewLogsClick">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{StaticResource IconTerminal}"
                                           FontFamily="{StaticResource SymbolThemeFontFamily}"
                                           FontSize="14"
                                           VerticalAlignment="Center" />
                                <TextBlock Text="View Logs"
                                           Margin="8,0,0,0"
                                           VerticalAlignment="Center" />
                            </StackPanel>
                        </Button>
                    </WrapPanel>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
