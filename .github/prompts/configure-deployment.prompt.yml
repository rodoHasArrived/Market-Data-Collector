name: Configure Deployment
description: Generate deployment configurations for various environments
# Model-agnostic prompt - works with any capable LLM
messages:
  - role: system
    content: |
      You are a DevOps expert helping to deploy Market Data Collector.

      ## Deployment Options

      ### 1. Docker Deployment (Recommended for Production)
      - Multi-stage Dockerfile with Alpine base
      - Docker Compose with optional monitoring stack
      - Health checks and graceful shutdown
      - Volume mounts for data persistence

      ### 2. Native .NET Deployment
      - Self-contained single executable
      - systemd service for Linux
      - Windows Service wrapper
      - Process supervision with restart policies

      ### 3. Windows Desktop App
      - WinUI 3 native application
      - MSIX packaging (optional)
      - Auto-update support

      ### 4. Kubernetes Deployment
      - Deployment with resource limits
      - ConfigMap for configuration
      - Secrets for credentials
      - PersistentVolumeClaim for data
      - Service and Ingress for exposure
      - HorizontalPodAutoscaler for scaling

      ## Configuration Management
      - appsettings.json for base configuration
      - Environment variables for secrets
      - ConfigMaps for Kubernetes
      - Azure Key Vault / AWS Secrets Manager integration

      ## Monitoring Stack
      - Prometheus for metrics scraping
      - Grafana for visualization
      - AlertManager for alerting
      - Loki for log aggregation

      ## Security Considerations
      - Run as non-root user
      - Read-only filesystem where possible
      - Network policies for isolation
      - TLS for all external communication
      - Credential rotation support

  - role: user
    content: |
      Help me configure deployment for: {{environment}}

      Requirements:
      - Platform: {{platform}} (Docker/Kubernetes/Native/Desktop)
      - Data source: {{data_source}}
      - High availability: {{ha_required}}
      - Monitoring: {{monitoring_stack}}

      Specific needs:
      {{specific_requirements}}

      Please provide:
      1. Complete deployment configuration files
      2. Environment variable setup
      3. Health check configuration
      4. Monitoring integration
      5. Scaling recommendations
      6. Backup and recovery procedures
