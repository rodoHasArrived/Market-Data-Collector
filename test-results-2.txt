Test run for /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/bin/Release/net9.0/MarketDataCollector.Tests.dll (.NETCoreApp,Version=v9.0)
VSTest version 17.14.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:00.00] xUnit.net VSTest Adapter v2.8.2+699d445a1a (64-bit .NET 9.0.12)
[xUnit.net 00:00:00.07]   Discovering: MarketDataCollector.Tests
[xUnit.net 00:00:00.21]   Discovered:  MarketDataCollector.Tests
[xUnit.net 00:00:00.21]   Starting:    MarketDataCollector.Tests
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchResultTests.Constructor_WithMinimalParameters_CreatesValidInstance [12 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchResultTests.WithExpression_CreatesModifiedCopy [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchResultTests.Constructor_WithAllParameters_SetsAllProperties [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.GetStatistics_ShouldReturnCorrectCounts [39 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.ProcessQuote_WithCrossedMarket_ShouldDetectAnomaly [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.CompletenessScoreCalculatorTests.GetSummary_ShouldReturnCorrectStatistics [21 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.CompletenessScoreCalculatorTests.RecordEvent_ShouldTrackEvents [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.CompletenessScoreCalculatorTests.GetScore_WithNoData_ShouldReturnNull [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.AcknowledgeAnomaly_ShouldMarkAsAcknowledged [3 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.ProcessTrade_WithNormalPrice_ShouldNotDetectAnomaly [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.CompletenessScoreCalculatorTests.GetAllScores_ShouldReturnAllTrackedScores [3 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.HasFlag_IsCaseInsensitive(flagVariant: "--FLAG") [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.HasFlag_IsCaseInsensitive(flagVariant: "--flag") [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.HasFlag_IsCaseInsensitive(flagVariant: "--Flag") [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.GetArgValue_IsCaseInsensitive [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.Resolve_WithExplicitMode_ShouldReturnCorrectMode(modeArg: "Web", expected: Web) [1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.Resolve_WithExplicitMode_ShouldReturnCorrectMode(modeArg: "web", expected: Web) [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.Resolve_WithExplicitMode_ShouldReturnCorrectMode(modeArg: "desktop", expected: Desktop) [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.Resolve_WithExplicitMode_ShouldReturnCorrectMode(modeArg: "DESKTOP", expected: Desktop) [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.Resolve_WithExplicitMode_ShouldReturnCorrectMode(modeArg: "headless", expected: Headless) [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.Resolve_WithExplicitMode_ShouldReturnCorrectMode(modeArg: "WEB", expected: Web) [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.Resolve_WithExplicitMode_ShouldReturnCorrectMode(modeArg: "HEADLESS", expected: Headless) [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.TranslateLegacyFlags_WithNoFlags_ShouldReturnNull [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.TranslateLegacyFlags_ExplicitModeTakesPrecedence [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.TranslateLegacyFlags_WithUiFlag_ShouldReturnWeb(flag: "--ui") [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.TranslateLegacyFlags_WithUiFlag_ShouldReturnWeb(flag: "--Ui") [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.TranslateLegacyFlags_WithUiFlag_ShouldReturnWeb(flag: "--UI") [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.GetArgValue_WithExistingKey_ShouldReturnValue [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.GetArgValue_WithKeyAtEnd_ShouldReturnNull [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.ResolveWithError_WithUnknownMode_ShouldReturnError [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.LegacyFlagTranslation_MultipleFlags_WorksTogether [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.HasFlag_WithMissingFlag_ShouldReturnFalse [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.Resolve_WithLegacyUiFlag_ShouldReturnWeb [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.ResolveWithError_WithValidMode_ShouldHaveNoError [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.TranslateLegacyFlags_WithExplicitMode_ShouldReturnMode [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.Resolve_WithNoArgs_ShouldReturnHeadless [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.GetArgValue_WithMissingKey_ShouldReturnNull [< 1 ms]
  Passed MarketDataCollector.Tests.CliModeResolverTests.HasFlag_WithPresentFlag_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.ScheduleStatusSummaryTests.OverallSuccessRate_NoExecutions_ReturnsZero [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.ScheduleStatusSummaryTests.OverallSuccessRate_WithExecutions_CalculatesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.LatencyHistogramTests.GetPercentile_ShouldReturnCorrectValues [10 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.LatencyHistogramTests.RecordLatency_ShouldTrackSamples [3 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.LatencyHistogramTests.GetHighLatencySymbols_ShouldIdentifySlowSymbols [14 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.LatencyHistogramTests.GetBuckets_ShouldReturnDistribution [4 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.MonthlyDeepBackfill_CreatesCorrectSchedule [1 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.QueueUtilization_ReflectsQueueFill [31 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.CalculateNextExecution_ValidCron_ReturnsNextTime [9 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.CalculateNextExecution_WithFromTime_ReturnsCorrectTime [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.CreateJob_CustomDates_UsesProvidedDates [3 ms]
[xUnit.net 00:00:00.38]     MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.ProcessTrade_WithPriceSpike_ShouldDetectAnomaly [FAIL]
[xUnit.net 00:00:00.38]       Expected anomaly!.Type to be AnomalyType.PriceSpike {value: 0}, but found AnomalyType.RapidPriceChange {value: 6}.
[xUnit.net 00:00:00.38]       Stack Trace:
[xUnit.net 00:00:00.39]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.39]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.39]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.39]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.39]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.39]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.39]            at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.39]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/DataQuality/DataQualityTests.cs(320,0): at MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.ProcessTrade_WithPriceSpike_ShouldDetectAnomaly()
[xUnit.net 00:00:00.39]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.39]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.ScheduleId_IsUnique [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.WeeklyFullBackfill_CreatesCorrectSchedule [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.EndOfDayUpdate_CreatesCorrectSchedule [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.Constructor_DefaultValues_SetsDefaults [< 1 ms]
  Failed MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.ProcessTrade_WithPriceSpike_ShouldDetectAnomaly [90 ms]
  Error Message:
   Expected anomaly!.Type to be AnomalyType.PriceSpike {value: 0}, but found AnomalyType.RapidPriceChange {value: 6}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.ProcessTrade_WithPriceSpike_ShouldDetectAnomaly() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/DataQuality/DataQualityTests.cs:line 320
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.ProcessTrade_WithNormalVolume_ShouldNotDetectVolumeAnomaly [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.ProcessTrade_WithVolumeDrop_ShouldDetectAnomaly [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.AnomalyDetectorTests.ProcessTrade_WithVolumeSpike_ShouldDetectAnomaly [3 ms]
[xUnit.net 00:00:00.41]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadFileAsync_WithMalformedJson_SkipsInvalidLines [FAIL]
[xUnit.net 00:00:00.41]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.41]       Stack Trace:
[xUnit.net 00:00:00.41]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.41]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.41]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(228,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadFileAsync_WithMalformedJson_SkipsInvalidLines()
[xUnit.net 00:00:00.41]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.41]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithMultipleFiles_ReadsAllInOrder [FAIL]
[xUnit.net 00:00:00.41]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.41]       Stack Trace:
[xUnit.net 00:00:00.41]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.41]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.41]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.41]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.41]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.41]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(392,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime)
[xUnit.net 00:00:00.41]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(136,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithMultipleFiles_ReadsAllInOrder()
[xUnit.net 00:00:00.41]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.42]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_TracksMetrics [FAIL]
[xUnit.net 00:00:00.42]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.42]       Stack Trace:
[xUnit.net 00:00:00.42]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(392,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime)
[xUnit.net 00:00:00.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(348,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_TracksMetrics()
[xUnit.net 00:00:00.42]         --- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadFileAsync_WithMalformedJson_SkipsInvalidLines [163 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadFileAsync_WithMalformedJson_SkipsInvalidLines() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 228
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.MemoryMappedReaderOptions_DefaultPresets_HaveCorrectValues [< 1 ms]
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithMultipleFiles_ReadsAllInOrder [2 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 392
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithMultipleFiles_ReadsAllInOrder() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 136
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.CreateJob_DefaultDates_UsesLookbackDays [31 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.DailyGapFill_CreatesCorrectSchedule [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillScheduleTests.CreateJob_CopiesOptionsFromSchedule [1 ms]
  Passed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithEmptyDirectory_ReturnsNoEvents [4 ms]
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_TracksMetrics [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 392
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_TracksMetrics() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 348
--- End of stack trace from previous location ---
[xUnit.net 00:00:00.42]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithSmallFile_UsesStreamingMode [FAIL]
[xUnit.net 00:00:00.42]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.42]       Stack Trace:
[xUnit.net 00:00:00.42]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(392,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime)
[xUnit.net 00:00:00.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(70,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithSmallFile_UsesStreamingMode()
[xUnit.net 00:00:00.42]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.42]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithSubdirectories_ReadsRecursively [FAIL]
[xUnit.net 00:00:00.42]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.42]       Stack Trace:
[xUnit.net 00:00:00.42]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(392,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime)
[xUnit.net 00:00:00.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(367,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithSubdirectories_ReadsRecursively()
[xUnit.net 00:00:00.42]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.42]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsInRangeAsync_FiltersCorrectly [FAIL]
[xUnit.net 00:00:00.42]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.42]       Stack Trace:
[xUnit.net 00:00:00.42]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.42]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.42]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.42]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.43]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.43]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(392,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime)
[xUnit.net 00:00:00.43]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(181,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsInRangeAsync_FiltersCorrectly()
[xUnit.net 00:00:00.43]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.43]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsForSymbolsAsync_FiltersCorrectly [FAIL]
[xUnit.net 00:00:00.43]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.43]       Stack Trace:
[xUnit.net 00:00:00.43]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.43]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.43]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.43]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(424,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateMultiSymbolJsonlFileAsync(String fileName, String[] symbols, Int32 eventsPerSymbol)
[xUnit.net 00:00:00.43]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(203,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsForSymbolsAsync_FiltersCorrectly()
[xUnit.net 00:00:00.43]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.43]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithLargeFile_UsesMemoryMapping [FAIL]
[xUnit.net 00:00:00.43]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.43]       Stack Trace:
[xUnit.net 00:00:00.43]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.43]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.43]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.43]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.43]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.43]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(392,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime)
[xUnit.net 00:00:00.43]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(92,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithLargeFile_UsesMemoryMapping()
[xUnit.net 00:00:00.43]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.SchemaIncompatibility_Compatible_ShouldHaveCorrectProperties [3 ms]
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithSmallFile_UsesStreamingMode [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 392
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithSmallFile_UsesStreamingMode() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 70
--- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithSubdirectories_ReadsRecursively [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 392
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithSubdirectories_ReadsRecursively() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 367
--- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsInRangeAsync_FiltersCorrectly [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 392
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsInRangeAsync_FiltersCorrectly() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 181
--- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsForSymbolsAsync_FiltersCorrectly [3 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateMultiSymbolJsonlFileAsync(String fileName, String[] symbols, Int32 eventsPerSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 424
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsForSymbolsAsync_FiltersCorrectly() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 203
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.Validate_WithInvalidTimestamp_ShouldThrow [10 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.CurrentSemanticVersion_ShouldFollowPattern [< 1 ms]
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithLargeFile_UsesMemoryMapping [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 392
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithLargeFile_UsesMemoryMapping() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 92
--- End of stack trace from previous location ---
[xUnit.net 00:00:00.44]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithParallelDeserialization_HandlesLargeBatches [FAIL]
[xUnit.net 00:00:00.44]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.44]       Stack Trace:
[xUnit.net 00:00:00.44]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.44]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.44]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.44]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(392,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime)
[xUnit.net 00:00:00.44]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(321,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithParallelDeserialization_HandlesLargeBatches()
[xUnit.net 00:00:00.44]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.StartupSchemaCheckResult_WithIncompatibilities_ShouldCalculateCount [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.CurrentSchemaVersion_ShouldMatchEventSchemaValidator [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithNonExistentDirectory_ReturnsNoEvents [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.GetVersionManager_WhenDisabled_ShouldReturnNull [2 ms]
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithParallelDeserialization_HandlesLargeBatches [2 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 392
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithParallelDeserialization_HandlesLargeBatches() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 321
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.PerformStartupCheckAsync_WithEmptyDirectory_ShouldPass [2 ms]
  Passed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.GetFileStatistics_ReturnsCorrectStatistics [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.Validate_WithUnknownEventType_ShouldThrow [< 1 ms]
[xUnit.net 00:00:00.44]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithCancellation_StopsReading [FAIL]
[xUnit.net 00:00:00.44]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.44]       Stack Trace:
[xUnit.net 00:00:00.44]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.44]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.44]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.44]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(392,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime)
[xUnit.net 00:00:00.44]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(253,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithCancellation_StopsReading()
[xUnit.net 00:00:00.44]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.44]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsBatchedAsync_ReturnsBatches [FAIL]
[xUnit.net 00:00:00.44]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.44]       Stack Trace:
[xUnit.net 00:00:00.44]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.44]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.44]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.44]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.44]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.44]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(392,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime)
[xUnit.net 00:00:00.44]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(158,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsBatchedAsync_ReturnsBatches()
[xUnit.net 00:00:00.44]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.45]     MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithCompressedFile_UsesStreamingMode [FAIL]
[xUnit.net 00:00:00.45]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.45]       Stack Trace:
[xUnit.net 00:00:00.45]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.45]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.45]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.45]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.45]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.45]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.45]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.45]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.45]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(436,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp)
[xUnit.net 00:00:00.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(409,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateCompressedJsonlFileAsync(String fileName, Int32 eventCount)
[xUnit.net 00:00:00.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(407,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateCompressedJsonlFileAsync(String fileName, Int32 eventCount)
[xUnit.net 00:00:00.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(407,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateCompressedJsonlFileAsync(String fileName, Int32 eventCount)
[xUnit.net 00:00:00.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(407,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateCompressedJsonlFileAsync(String fileName, Int32 eventCount)
[xUnit.net 00:00:00.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs(114,0): at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithCompressedFile_UsesStreamingMode()
[xUnit.net 00:00:00.45]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.SchemaCheckResult_Failed_ShouldHaveCorrectProperties [< 1 ms]
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithCancellation_StopsReading [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 392
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithCancellation_StopsReading() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 253
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.Validate_WithEmptySymbol_ShouldThrow [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.SchemaCheckResult_Success_ShouldHaveCorrectProperties [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.Validate_WithValidEvent_ShouldNotThrow [1 ms]
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsBatchedAsync_ReturnsBatches [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateTestJsonlFileAsync(String fileName, Int32 eventCount, Nullable`1 baseTime) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 392
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsBatchedAsync_ReturnsBatches() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 158
--- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithCompressedFile_UsesStreamingMode [7 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateEventJson(String symbol, Int32 sequence, Nullable`1 timestamp) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 436
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateCompressedJsonlFileAsync(String fileName, Int32 eventCount) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 409
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateCompressedJsonlFileAsync(String fileName, Int32 eventCount) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 407
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateCompressedJsonlFileAsync(String fileName, Int32 eventCount) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 407
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.CreateCompressedJsonlFileAsync(String fileName, Int32 eventCount) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 407
   at MarketDataCollector.Tests.Storage.MemoryMappedJsonlReaderTests.ReadEventsAsync_WithCompressedFile_UsesStreamingMode() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/MemoryMappedJsonlReaderTests.cs:line 114
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Storage.PackageOptionsTests.PackageFormat_Enum_ShouldHaveExpectedValues [4 ms]
  Passed MarketDataCollector.Tests.Storage.PackageOptionsTests.DefaultOptions_ShouldHaveReasonableDefaults [2 ms]
  Passed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithEmptySymbol_DoesNotPublishAnyEvents [11 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.PerformStartupCheckAsync_WithValidJsonlFile_ShouldPass [29 ms]
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithNoApiKey_ReturnsFalse [82 ms]
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeAggregates_WhenEnabled_ReturnsPositiveId [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.PerformStartupCheckAsync_WithMissingSchemaVersion_ShouldFail [3 ms]
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.DisposeAsync_CanBeCalledMultipleTimes [2 ms]
[xUnit.net 00:00:00.48]     MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithAlternateEnvironmentVariable_ReturnsTrue [FAIL]
[xUnit.net 00:00:00.48]       Expected client.IsEnabled to be True, but found False.
[xUnit.net 00:00:00.48]       Stack Trace:
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.48]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs(193,0): at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithAlternateEnvironmentVariable_ReturnsTrue()
[xUnit.net 00:00:00.48]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.48]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeAggregates_WhenDisabled_ReturnsNegativeOne [< 1 ms]
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.Constructor_WithNullOptions_UsesDefaultOptions [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.PerformStartupCheckAsync_WithIncompatibleSchemaVersion_ShouldFail [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.ValidateSafe_WithValidEvent_ShouldReturnSuccess [< 1 ms]
  Failed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithAlternateEnvironmentVariable_ReturnsTrue [2 ms]
  Error Message:
   Expected client.IsEnabled to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithAlternateEnvironmentVariable_ReturnsTrue() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs:line 193
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.Constructor_WithCustomOptions_UsesProvidedOptions [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.PerformStartupCheckAsync_SecondCallSkipsIfAlreadyCompleted [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.GetVersionManager_WhenEnabled_ShouldReturnInstance [< 1 ms]
[xUnit.net 00:00:00.48]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "EUR:USD") [FAIL]
[xUnit.net 00:00:00.48]       Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.48]       Stack Trace:
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.48]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(227,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol)
[xUnit.net 00:00:00.48]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.48]            at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
[xUnit.net 00:00:00.48]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "ES-2024") [FAIL]
[xUnit.net 00:00:00.48]       Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.48]       Stack Trace:
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.48]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(227,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol)
[xUnit.net 00:00:00.48]            at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
[xUnit.net 00:00:00.48]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:00.48]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "SPY/CALL") [FAIL]
[xUnit.net 00:00:00.48]       Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.48]       Stack Trace:
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.48]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(227,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol)
[xUnit.net 00:00:00.48]            at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
[xUnit.net 00:00:00.48]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:00.48]     MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.ConnectAsync_WithCancellationToken_RespectsToken [FAIL]
[xUnit.net 00:00:00.48]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.48]       Stack Trace:
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.48]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs(249,0): at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.ConnectAsync_WithCancellationToken_RespectsToken()
[xUnit.net 00:00:00.48]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithShortApiKey_ReturnsFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SchemaValidationServiceTests.ValidateSafe_WithInvalidEvent_ShouldReturnFailure [< 1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "EUR:USD") [10 ms]
  Error Message:
   Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 227
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "ES-2024") [1 ms]
  Error Message:
   Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 227
   at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "SPY/CALL") [1 ms]
  Error Message:
   Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 227
   at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.ConnectAsync_WithCancellationToken_RespectsToken [3 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.ConnectAsync_WithCancellationToken_RespectsToken() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs:line 249
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithNegativePrice_ShouldReturnFalse [3 ms]
[xUnit.net 00:00:00.48]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "SPY") [FAIL]
[xUnit.net 00:00:00.48]       Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.48]       Stack Trace:
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.48]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(227,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol)
[xUnit.net 00:00:00.48]            at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
[xUnit.net 00:00:00.48]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:00.48]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "AAPL123") [FAIL]
[xUnit.net 00:00:00.48]       Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.48]       Stack Trace:
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.49]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.49]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(227,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol)
[xUnit.net 00:00:00.49]            at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
[xUnit.net 00:00:00.49]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:00.49]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "BTC_USD") [FAIL]
[xUnit.net 00:00:00.49]       Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.49]       Stack Trace:
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.49]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.49]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(227,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol)
[xUnit.net 00:00:00.49]            at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
[xUnit.net 00:00:00.49]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:00.49]     MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.ConnectAsync_PublishesHeartbeatEvent [FAIL]
[xUnit.net 00:00:00.49]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.49]       Stack Trace:
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.49]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.49]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs(230,0): at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.ConnectAsync_PublishesHeartbeatEvent()
[xUnit.net 00:00:00.49]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.49]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "AAPL.O") [FAIL]
[xUnit.net 00:00:00.49]       Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.49]       Stack Trace:
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.49]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.49]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(227,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol)
[xUnit.net 00:00:00.49]            at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
[xUnit.net 00:00:00.49]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:00.49]     MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithEnvironmentVariable_ReturnsTrue [FAIL]
[xUnit.net 00:00:00.49]       Expected client.IsEnabled to be True, but found False.
[xUnit.net 00:00:00.49]       Stack Trace:
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.49]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.49]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs(176,0): at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithEnvironmentVariable_ReturnsTrue()
[xUnit.net 00:00:00.49]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.49]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "SPY") [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 227
   at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.UnsubscribeMarketDepth_DoesNotThrow [1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "AAPL123") [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 227
   at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "BTC_USD") [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 227
   at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.ConnectAsync_PublishesHeartbeatEvent [1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.ConnectAsync_PublishesHeartbeatEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs:line 230
--- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(validSymbol: "AAPL.O") [1 ms]
  Error Message:
   Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(String validSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 227
   at InvokeStub_TradeDataCollectorTests.OnTrade_WithValidSymbolFormats_AcceptsTrade(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithEnvironmentVariable_ReturnsTrue [< 1 ms]
  Error Message:
   Expected client.IsEnabled to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithEnvironmentVariable_ReturnsTrue() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs:line 176
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.SetTickSize_WithNegativeTickSize_ShouldThrowArgumentOutOfRange [3 ms]
[xUnit.net 00:00:00.49]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(invalidSymbol: "SPY@NYSE") [FAIL]
[xUnit.net 00:00:00.49]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.49]       Stack Trace:
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.49]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.49]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(203,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(String invalidSymbol)
[xUnit.net 00:00:00.49]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.49]            at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
[xUnit.net 00:00:00.49]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(invalidSymbol: "SYMBOL<>") [FAIL]
[xUnit.net 00:00:00.49]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.49]       Stack Trace:
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.49]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.49]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(203,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(String invalidSymbol)
[xUnit.net 00:00:00.49]            at InvokeStub_TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(Object, Span`1)
[xUnit.net 00:00:00.49]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeMarketDepth_ReturnsNegativeOne [< 1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(invalidSymbol: "SPY@NYSE") [1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(String invalidSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 203
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_ShouldRespectAlertCooldown [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.Dispose_ShouldNotFireEvents [< 1 ms]
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.DisconnectAsync_CompletesSuccessfully [1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(invalidSymbol: "SYMBOL<>") [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(String invalidSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 203
   at InvokeStub_TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.UnsubscribeAggregates_DoesNotThrow [< 1 ms]
[xUnit.net 00:00:00.49]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(invalidSymbol: "AAPL$") [FAIL]
[xUnit.net 00:00:00.49]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.49]       Stack Trace:
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.49]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.49]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(203,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(String invalidSymbol)
[xUnit.net 00:00:00.49]            at InvokeStub_TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(Object, Span`1)
[xUnit.net 00:00:00.49]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.Constructor_WithNullPublisher_ThrowsArgumentNullException [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithInvalidSubDollarPrice_ShouldReturnTrue(price: 5.0000000000000002E-05) [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithInvalidSubDollarPrice_ShouldReturnTrue(price: 0.12345) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithInvalidSubDollarPrice_ShouldReturnTrue(price: 0.50000999999999995) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateQuote_WithBothInvalidPrices_ShouldReturnTrue [< 1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(invalidSymbol: "AAPL$") [3 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(String invalidSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 203
   at InvokeStub_TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.DisposeAsync_CompletesSuccessfully [< 1 ms]
[xUnit.net 00:00:00.49]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(invalidSymbol: "TEST#1") [FAIL]
[xUnit.net 00:00:00.49]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.49]       Stack Trace:
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.49]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.49]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.49]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(203,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(String invalidSymbol)
[xUnit.net 00:00:00.49]            at InvokeStub_TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(Object, Span`1)
[xUnit.net 00:00:00.49]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithInvalidPrice_ShouldReturnTrue(price: 100.123) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithInvalidPrice_ShouldReturnTrue(price: 100.015) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithInvalidPrice_ShouldReturnTrue(price: 100.005) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithInvalidPrice_ShouldReturnTrue(price: 100.001) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithInvalidPrice_ShouldReturnTrue(price: 50.555) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidSubDollarPrice_ShouldReturnFalse(price: 0.99990000000000001) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidSubDollarPrice_ShouldReturnFalse(price: 0.5) [< 1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(invalidSymbol: "TEST#1") [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(String invalidSymbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 203
   at InvokeStub_TradeDataCollectorTests.OnTrade_WithInvalidSymbolCharacters_PublishesIntegrityEventAndRejectsTrade(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidSubDollarPrice_ShouldReturnFalse(price: 0.1234) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidSubDollarPrice_ShouldReturnFalse(price: 0.50009999999999999) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidSubDollarPrice_ShouldReturnFalse(price: 0.0001) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidPrice_ShouldReturnFalse(price: 100) [< 1 ms]
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeAggregates_WithNullConfig_ThrowsArgumentNullException [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidPrice_ShouldReturnFalse(price: 50.5) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidPrice_ShouldReturnFalse(price: 100.01000000000001) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidPrice_ShouldReturnFalse(price: 999.99000000000001) [< 1 ms]
[xUnit.net 00:00:00.50]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidUpdate_PublishesTradeAndOrderFlowEvents [FAIL]
[xUnit.net 00:00:00.50]       Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.50]       Stack Trace:
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.50]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.50]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(49,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidUpdate_PublishesTradeAndOrderFlowEvents()
[xUnit.net 00:00:00.50]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.50]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.50]     MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_EnvironmentVariableTakesPrecedenceOverOptions [FAIL]
[xUnit.net 00:00:00.50]       Expected client.IsEnabled to be True, but found False.
[xUnit.net 00:00:00.50]       Stack Trace:
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.50]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.50]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs(210,0): at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_EnvironmentVariableTakesPrecedenceOverOptions()
[xUnit.net 00:00:00.50]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.50]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidPrice_ShouldReturnFalse(price: 1) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithValidPrice_ShouldReturnFalse(price: 100.98999999999999) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.DefaultConfig_ShouldUseStandardUSEquityTickSizes [< 1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidUpdate_PublishesTradeAndOrderFlowEvents [1 ms]
  Error Message:
   Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithValidUpdate_PublishesTradeAndOrderFlowEvents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 49
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateBar_WithInvalidHighPrice_ShouldReturnTrue [< 1 ms]
  Failed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_EnvironmentVariableTakesPrecedenceOverOptions [< 1 ms]
  Error Message:
   Expected client.IsEnabled to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_EnvironmentVariableTakesPrecedenceOverOptions() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs:line 210
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.OnViolation_EventShouldBeFired_WhenViolationDetected [2 ms]
[xUnit.net 00:00:00.50]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithNegativeSequenceNumber_PublishesIntegrityEventAndRejectsTrade [FAIL]
[xUnit.net 00:00:00.50]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.50]       Stack Trace:
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.50]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.50]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.50]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(242,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithNegativeSequenceNumber_PublishesIntegrityEventAndRejectsTrade()
[xUnit.net 00:00:00.50]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.50]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.51]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithZeroSequenceNumber_AcceptsTrade [FAIL]
[xUnit.net 00:00:00.51]       Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.51]       Stack Trace:
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.51]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.51]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(259,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithZeroSequenceNumber_AcceptsTrade()
[xUnit.net 00:00:00.51]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.51]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithNegativeSequenceNumber_PublishesIntegrityEventAndRejectsTrade [2 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithNegativeSequenceNumber_PublishesIntegrityEventAndRejectsTrade() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 242
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.SetTickSize_WithZeroTickSize_ShouldThrowArgumentOutOfRange [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateBar_WithInvalidOpenPrice_ShouldReturnTrue [< 1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithZeroSequenceNumber_AcceptsTrade [1 ms]
  Error Message:
   Expected _publishedEvents to contain 2 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithZeroSequenceNumber_AcceptsTrade() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 259
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.UnsubscribeAggregates_RemovesSymbolFromSubscribedList [15 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.SetTickSize_ShouldBeCaseInsensitive [13 ms]
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.UnsubscribeTrades_DoesNotThrow [1 ms]
[xUnit.net 00:00:00.51]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithDuplicateSequence_RejectsTrade [FAIL]
[xUnit.net 00:00:00.51]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.51]       Stack Trace:
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.51]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.51]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.51]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(153,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithDuplicateSequence_RejectsTrade()
[xUnit.net 00:00:00.51]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.51]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.52]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithOutOfOrderSequence_PublishesIntegrityEvent [FAIL]
[xUnit.net 00:00:00.52]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.52]       Stack Trace:
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.52]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(97,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithOutOfOrderSequence_PublishesIntegrityEvent()
[xUnit.net 00:00:00.52]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.52]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithDuplicateSequence_RejectsTrade [13 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithDuplicateSequence_RejectsTrade() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 153
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.Constructor_WithNullQuoteCollector_ThrowsArgumentNullException [< 1 ms]
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.IsEnabled_WithValidApiKey_ReturnsTrue [< 1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithOutOfOrderSequence_PublishesIntegrityEvent [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithOutOfOrderSequence_PublishesIntegrityEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 97
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.Constructor_WithNullTradeCollector_ThrowsArgumentNullException [< 1 ms]
  Passed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeAggregates_AddsSymbolToSubscribedList [< 1 ms]
  Passed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithNullUpdate_ThrowsArgumentNullException [< 1 ms]
  Passed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_TracksSeparateStatePerSymbol [1 ms]
[xUnit.net 00:00:00.52]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_TracksVolumeByAggressorSide [FAIL]
[xUnit.net 00:00:00.52]       Expected orderFlowEvents to contain 3 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.52]       Stack Trace:
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.52]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(131,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_TracksVolumeByAggressorSide()
[xUnit.net 00:00:00.52]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.52]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.52]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithSymbolTooLong_PublishesIntegrityEventAndRejectsTrade [FAIL]
[xUnit.net 00:00:00.52]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.52]       Stack Trace:
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.52]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(182,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithSymbolTooLong_PublishesIntegrityEventAndRejectsTrade()
[xUnit.net 00:00:00.52]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.52]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.TotalViolationsDetected_ShouldMatchStatsCount [5 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_TracksVolumeByAggressorSide [1 ms]
  Error Message:
   Expected orderFlowEvents to contain 3 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_TracksVolumeByAggressorSide() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 131
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.OnViolation_ShouldIncludeRemainder [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.LenientConfig_ShouldAllowFinerPrecision [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.SetTickSize_ShouldOverrideDefaultTickSize [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.Dispose_ShouldStopProcessing [< 1 ms]
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithSymbolTooLong_PublishesIntegrityEventAndRejectsTrade [1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithSymbolTooLong_PublishesIntegrityEventAndRejectsTrade() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 182
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.FuturesForexConfig_ShouldUseFinerTickSize [< 1 ms]
[xUnit.net 00:00:00.52]     MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeTrades_EmitsSyntheticTrade [FAIL]
[xUnit.net 00:00:00.52]       System.ArgumentOutOfRangeException : Price must be greater than 0 (Parameter 'Price')
[xUnit.net 00:00:00.52]       Actual value was 0.
[xUnit.net 00:00:00.52]       Stack Trace:
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/Trade.cs(65,0): at MarketDataCollector.Contracts.Domain.Models.Trade..ctor(DateTimeOffset Timestamp, String Symbol, Decimal Price, Int64 Size, AggressorSide Aggressor, Int64 SequenceNumber, String StreamId, String Venue)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Domain/Collectors/TradeDataCollector.cs(167,0): at MarketDataCollector.Domain.Collectors.TradeDataCollector.OnTrade(MarketTradeUpdate update)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Streaming/Polygon/PolygonMarketDataClient.cs(888,0): at MarketDataCollector.Infrastructure.Providers.Polygon.PolygonMarketDataClient.SubscribeTrades(SymbolConfig cfg)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs(328,0): at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeTrades_EmitsSyntheticTrade()
[xUnit.net 00:00:00.52]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.52]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.52]     MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithSequenceGap_PublishesIntegrityEventAndAcceptsTrade [FAIL]
[xUnit.net 00:00:00.52]       Expected _publishedEvents to contain 3 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.52]       Stack Trace:
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.52]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.52]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs(115,0): at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithSequenceGap_PublishesIntegrityEventAndAcceptsTrade()
[xUnit.net 00:00:00.52]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.52]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.52]     MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeTrades_ReturnsNegativeOne [FAIL]
[xUnit.net 00:00:00.52]       System.ArgumentOutOfRangeException : Price must be greater than 0 (Parameter 'Price')
[xUnit.net 00:00:00.52]       Actual value was 0.
[xUnit.net 00:00:00.52]       Stack Trace:
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/Trade.cs(65,0): at MarketDataCollector.Contracts.Domain.Models.Trade..ctor(DateTimeOffset Timestamp, String Symbol, Decimal Price, Int64 Size, AggressorSide Aggressor, Int64 SequenceNumber, String StreamId, String Venue)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Domain/Collectors/TradeDataCollector.cs(167,0): at MarketDataCollector.Domain.Collectors.TradeDataCollector.OnTrade(MarketTradeUpdate update)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Streaming/Polygon/PolygonMarketDataClient.cs(888,0): at MarketDataCollector.Infrastructure.Providers.Polygon.PolygonMarketDataClient.SubscribeTrades(SymbolConfig cfg)
[xUnit.net 00:00:00.52]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs(311,0): at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeTrades_ReturnsNegativeOne()
[xUnit.net 00:00:00.52]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.52]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateBar_WithInvalidClosePrice_ShouldReturnTrue [< 1 ms]
  Failed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeTrades_EmitsSyntheticTrade [< 1 ms]
  Error Message:
   System.ArgumentOutOfRangeException : Price must be greater than 0 (Parameter 'Price')
Actual value was 0.
  Stack Trace:
     at MarketDataCollector.Contracts.Domain.Models.Trade..ctor(DateTimeOffset Timestamp, String Symbol, Decimal Price, Int64 Size, AggressorSide Aggressor, Int64 SequenceNumber, String StreamId, String Venue) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/Trade.cs:line 65
   at MarketDataCollector.Domain.Collectors.TradeDataCollector.OnTrade(MarketTradeUpdate update) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Domain/Collectors/TradeDataCollector.cs:line 167
   at MarketDataCollector.Infrastructure.Providers.Polygon.PolygonMarketDataClient.SubscribeTrades(SymbolConfig cfg) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Streaming/Polygon/PolygonMarketDataClient.cs:line 888
   at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeTrades_EmitsSyntheticTrade() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs:line 328
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithSequenceGap_PublishesIntegrityEventAndAcceptsTrade [1 ms]
  Error Message:
   Expected _publishedEvents to contain 3 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.TradeDataCollectorTests.OnTrade_WithSequenceGap_PublishesIntegrityEventAndAcceptsTrade() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/TradeDataCollectorTests.cs:line 115
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeTrades_ReturnsNegativeOne [< 1 ms]
  Error Message:
   System.ArgumentOutOfRangeException : Price must be greater than 0 (Parameter 'Price')
Actual value was 0.
  Stack Trace:
     at MarketDataCollector.Contracts.Domain.Models.Trade..ctor(DateTimeOffset Timestamp, String Symbol, Decimal Price, Int64 Size, AggressorSide Aggressor, Int64 SequenceNumber, String StreamId, String Venue) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/Trade.cs:line 65
   at MarketDataCollector.Domain.Collectors.TradeDataCollector.OnTrade(MarketTradeUpdate update) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Domain/Collectors/TradeDataCollector.cs:line 167
   at MarketDataCollector.Infrastructure.Providers.Polygon.PolygonMarketDataClient.SubscribeTrades(SymbolConfig cfg) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Streaming/Polygon/PolygonMarketDataClient.cs:line 888
   at MarketDataCollector.Tests.Providers.PolygonMarketDataClientTests.SubscribeTrades_ReturnsNegativeOne() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/PolygonMarketDataClientTests.cs:line 311
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.GetStats_ShouldTrackViolationsCorrectly [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.OnViolation_ShouldIncludeProvider [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithZeroPrice_ShouldReturnFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateQuote_WithInvalidAskPrice_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.GetStats_ShouldOrderByViolationCount [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_DifferentSymbols_ShouldHaveIndependentCooldowns [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_ShouldAllowSmallFloatingPointTolerance [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateTrade_WithSubDollarTicksDisabled_ShouldUseDefaultTick [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateQuote_WithInvalidBidPrice_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateBar_WithAllValidPrices_ShouldReturnFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateQuote_WithValidPrices_ShouldReturnFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.ValidateBar_WithInvalidLowPrice_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.TickSizeValidatorTests.OnViolation_ShouldIncludeNearestValidPrices [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageConfig_ToStorageOptions_ShouldDefaultToBySymbolForInvalidValue [5 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageConfig_DefaultNamingConvention_ShouldBeBySymbol [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageConfig_ToStorageOptions_ShouldParseAllConventions(input: "bydate", expected: ByDate) [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageConfig_ToStorageOptions_ShouldParseAllConventions(input: "bytype", expected: ByType) [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageConfig_ToStorageOptions_ShouldParseAllConventions(input: "flat", expected: Flat) [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageConfig_ToStorageOptions_ShouldParseAllConventions(input: "bysymbol", expected: BySymbol) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SlaEventTests.SlaViolationEvent_ShouldContainAllDetails [1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageConfig_ToStorageOptions_ShouldParseBySymbolCaseInsensitive [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageConfig_ToStorageOptions_ShouldUseBySymbolWhenNull [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageOptions_DefaultNamingConvention_ShouldBeBySymbol [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SlaEventTests.SlaRecoveryEvent_ShouldContainRecoveryDetails [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageConfig_ToStorageOptions_ShouldUseBySymbolWhenEmpty [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.StorageOptionsDefaultsTests.StorageOptions_DefaultDatePartition_ShouldBeDaily [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.GetPermissionsDiagnostic_ShouldReportNonExistentDirectory [1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterRegistryTests.GetOrCreate_DifferentProviders_ReturnsDifferentInstances [4 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterRegistryTests.GetOrCreate_NewProvider_CreatesLimiter [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterRegistryTests.Dispose_DisposesAllLimiters [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterRegistryTests.GetOrCreate_SameProvider_ReturnsSameInstance [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.SearchAsync_WithEmptyQuery_ReturnsEmptyResults(query: "   ") [13 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.SearchAsync_WithEmptyQuery_ReturnsEmptyResults(query: "") [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.SearchAsync_WithEmptyQuery_ReturnsEmptyResults(query: null) [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.SearchAsync_AfterDisposal_ThrowsObjectDisposedException [1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.LookupByTickerAsync_AfterDisposal_ThrowsObjectDisposedException [3 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.EnsureDirectoryPermissions_WithNestedFilesAndApplyToExisting_ShouldProcessAll [11 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.EnsureDirectoryPermissions_WithNullPath_ShouldReturnFailure [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.FilePermissionsOptions_ShouldHaveDefaultValues [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.EnsureDirectoryPermissions_ShouldCreateDirectoryIfNotExists [1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterRegistryTests.GetAllStatus_ReturnsStatusForAllProviders [11 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.VerifyWriteAccess_ShouldSucceedForWritableDirectory [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterRegistryTests.GetOrCreate_AfterDispose_ThrowsObjectDisposedException [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SymbolSlaStatusTests.SymbolSlaStatus_ShouldBeImmutableRecord [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.EnsureDirectoryPermissions_ShouldHandleNestedPath [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SymbolSlaStatusTests.SymbolSlaStatus_WithViolation_ShouldTrackDetails [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.VerifyWriteAccess_ShouldFailForNonExistentDirectory [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.GetPermissionsDiagnostic_ShouldReportExistingDirectory [2 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.FilePermissionsResult_Failure_ShouldHaveCorrectProperties [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.Constructor_ShouldInitializeWithDefaultOptions [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.EnsureDirectoryPermissions_ShouldSucceedForExistingDirectory [1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.EnsureDirectoryPermissions_WithApplyToExistingFiles_ShouldProcessFiles [2 ms]
[xUnit.net 00:00:00.60]     MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.BulkLookupByTickersAsync_DeduplicatesTickers [FAIL]
[xUnit.net 00:00:00.60]       System.Net.Http.HttpRequestException : Name or service not known (api.openfigi.com:443)
[xUnit.net 00:00:00.60]       ---- System.Net.Sockets.SocketException : Name or service not known
[xUnit.net 00:00:00.60]       Stack Trace:
[xUnit.net 00:00:00.60]            at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:00.60]            at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:00.60]            at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:00.60]            at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
[xUnit.net 00:00:00.60]            at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
[xUnit.net 00:00:00.60]            at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
[xUnit.net 00:00:00.60]            at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
[xUnit.net 00:00:00.60]            at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
[xUnit.net 00:00:00.60]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/SymbolSearch/OpenFigiClient.cs(299,0): at MarketDataCollector.Infrastructure.Providers.SymbolSearch.OpenFigiClient.MappingRequestAsync(IReadOnlyList`1 requests, CancellationToken ct)
[xUnit.net 00:00:00.60]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/SymbolSearch/OpenFigiClient.cs(185,0): at MarketDataCollector.Infrastructure.Providers.SymbolSearch.OpenFigiClient.BulkLookupByTickersAsync(IEnumerable`1 tickers, String exchangeCode, String marketSector, CancellationToken ct)
[xUnit.net 00:00:00.60]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/SymbolSearch/OpenFigiClientTests.cs(130,0): at MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.BulkLookupByTickersAsync_DeduplicatesTickers()
[xUnit.net 00:00:00.60]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.60]         ----- Inner Stack Trace -----
[xUnit.net 00:00:00.60]            at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
[xUnit.net 00:00:00.60]            at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
[xUnit.net 00:00:00.60]            at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
[xUnit.net 00:00:00.60]            at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.FilePermissionsResult_CreateSuccess_ShouldHaveCorrectProperties [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.EnsureDirectoryPermissions_WithEmptyPath_ShouldReturnFailure [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.GetPermissionsDiagnostic_ShouldIncludePlatformInfo [2 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.GetPermissionsDiagnostic_ToString_ShouldFormatCorrectly [2 ms]
  Passed MarketDataCollector.Tests.FilePermissionsServiceTests.Constructor_ShouldAcceptCustomOptions [< 1 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.PeriodicFlush_WhenEnabled_FlushesAutomatically [219 ms]
  Failed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.BulkLookupByTickersAsync_DeduplicatesTickers [51 ms]
  Error Message:
   System.Net.Http.HttpRequestException : Name or service not known (api.openfigi.com:443)
---- System.Net.Sockets.SocketException : Name or service not known
  Stack Trace:
     at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.InjectNewHttp11ConnectionAsync(QueueItem queueItem)
   at System.Threading.Tasks.TaskCompletionSourceWithCancellation`1.WaitWithCancellationAsync(CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at MarketDataCollector.Infrastructure.Providers.SymbolSearch.OpenFigiClient.MappingRequestAsync(IReadOnlyList`1 requests, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/SymbolSearch/OpenFigiClient.cs:line 299
   at MarketDataCollector.Infrastructure.Providers.SymbolSearch.OpenFigiClient.BulkLookupByTickersAsync(IEnumerable`1 tickers, String exchangeCode, String marketSector, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/SymbolSearch/OpenFigiClient.cs:line 185
   at MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.BulkLookupByTickersAsync_DeduplicatesTickers() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/SymbolSearch/OpenFigiClientTests.cs:line 130
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectToTcpHostAsync(String host, Int32 port, HttpRequestMessage initialRequest, Boolean async, CancellationToken cancellationToken)
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.DisposeAsync_FlushesFinalEvents [3 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithNullSink_ThrowsArgumentNullException [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.EnrichWithFigiAsync_WithEmptyList_ReturnsEmptyList [1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.BulkLookupByTickersAsync_WithEmptyList_ReturnsEmptyDictionary [4 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.Constructor_WithApiKey_CreatesInstance [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.Dispose_CalledMultipleTimes_DoesNotThrow [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.OpenFigiClientTests.Constructor_WithNoApiKey_CreatesInstance [< 1 ms]
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.ReadyEndpoint_ReturnsOk [33 ms]
[xUnit.net 00:00:00.63]     MarketDataCollector.Tests.ConfigValidatorTests.Validate_InvalidSecurityType_IsInvalid [FAIL]
[xUnit.net 00:00:00.63]       Expected result.IsValid to be False, but found True.
[xUnit.net 00:00:00.63]       Stack Trace:
[xUnit.net 00:00:00.63]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.63]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.63]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.63]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.63]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.63]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.63]            at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.63]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Config/ConfigValidatorTests.cs(229,0): at MarketDataCollector.Tests.ConfigValidatorTests.Validate_InvalidSecurityType_IsInvalid()
[xUnit.net 00:00:00.63]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.63]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.ConfigValidatorTests.Validate_InvalidSecurityType_IsInvalid [81 ms]
  Error Message:
   Expected result.IsValid to be False, but found True.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.ConfigValidatorTests.Validate_InvalidSecurityType_IsInvalid() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Config/ConfigValidatorTests.cs:line 229
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_ValidSecurityTypes_AreValid(securityType: "STK") [3 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_ValidSecurityTypes_AreValid(securityType: "OPT") [< 1 ms]
  Passed MarketDataCollector.Tests.CircuitBreakerTests.CircuitBreaker_AfterThreshold_ShouldOpenCircuit [31 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_ValidSecurityTypes_AreValid(securityType: "CASH") [< 1 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_ValidSecurityTypes_AreValid(securityType: "FUT") [< 1 ms]
  Passed MarketDataCollector.Tests.CircuitBreakerTests.CircuitBreakerPipeline_ShouldBeConfigurable [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.CheckQuote_ShouldUseMiddlePrice [4 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_AlpacaWithInvalidFeed_IsInvalid [5 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.CheckPrice_GapDown_ShouldDetectGap [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.CheckPrice_LargeGapUp_ShouldDetectLargeGap [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.CheckPrice_SmallChange_ShouldReturnOk [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.CheckPrice_GapUp_ShouldDetectGap [< 1 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishAsync_SingleEvent_EventIsConsumed [45 ms]
[xUnit.net 00:00:00.65]     MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.GetStatistics_ShouldReturnCorrectCounts [FAIL]
[xUnit.net 00:00:00.65]       Expected stats.TotalDiscontinuities to be 2L, but found 1L.
[xUnit.net 00:00:00.65]       Stack Trace:
[xUnit.net 00:00:00.65]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.65]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.65]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.65]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.65]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.65]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.65]            at FluentAssertions.Numeric.NumericAssertions`2.Be(T expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/PriceContinuityCheckerTests.cs(160,0): at MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.GetStatistics_ShouldReturnCorrectCounts()
[xUnit.net 00:00:00.65]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.65]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_InvalidDepthLevels_IsInvalid [3 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_ValidSymbolConfig_IsValid [< 1 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_AlpacaWithValidKeys_IsValid [< 1 ms]
  Failed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.GetStatistics_ShouldReturnCorrectCounts [3 ms]
  Error Message:
   Expected stats.TotalDiscontinuities to be 2L, but found 1L.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Numeric.NumericAssertions`2.Be(T expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.GetStatistics_ShouldReturnCorrectCounts() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/PriceContinuityCheckerTests.cs:line 160
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_EmptySymbol_IsInvalid [1 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_EmptyDataRoot_IsInvalid [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.CheckBar_InvalidBar_ShouldDetectInvalid [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.CheckBar_ValidBar_ShouldReturnOk [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.Reset_ShouldClearSymbolTracking [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.MultipleSymbols_ShouldTrackIndependently [< 1 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_IB_DoesNotRequireAlpacaConfig [3 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_DefaultConfig_IsValid [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.GetTopDiscontinuitySymbols_ShouldOrderByCount [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.PriceContinuityCheckerTests.CheckPrice_FirstPrice_ShouldReturnOk [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsDiagnosticTests.ToString_WithIssues_ShouldShowIssuesDetected [< 1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsDiagnosticTests.HasIssues_WhenNoIssues_ShouldReturnFalse [< 1 ms]
[xUnit.net 00:00:00.66]     MarketDataCollector.Tests.ConfigValidatorTests.Validate_AlpacaWithPlaceholderKeys_IsInvalid [FAIL]
[xUnit.net 00:00:00.66]       Expected result.IsValid to be False, but found True.
[xUnit.net 00:00:00.66]       Stack Trace:
[xUnit.net 00:00:00.66]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.66]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.66]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.66]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.66]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.66]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.66]            at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Config/ConfigValidatorTests.cs(81,0): at MarketDataCollector.Tests.ConfigValidatorTests.Validate_AlpacaWithPlaceholderKeys_IsInvalid()
[xUnit.net 00:00:00.66]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.66]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.FilePermissionsDiagnosticTests.ToString_OnUnix_ShouldIncludeMode [< 1 ms]
  Passed MarketDataCollector.Tests.ConfigValidatorTests.Validate_AlpacaWithoutApiKeys_IsInvalid [1 ms]
  Passed MarketDataCollector.Tests.FilePermissionsDiagnosticTests.HasIssues_WhenIssuesExist_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Equality_TwoLevelsWithSameValues_AreEqual [2 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithZeroPrice_ThrowsArgumentOutOfRangeException [< 1 ms]
  Failed MarketDataCollector.Tests.ConfigValidatorTests.Validate_AlpacaWithPlaceholderKeys_IsInvalid [3 ms]
  Error Message:
   Expected result.IsValid to be False, but found True.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.ConfigValidatorTests.Validate_AlpacaWithPlaceholderKeys_IsInvalid() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Config/ConfigValidatorTests.cs:line 81
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.StatusResponse_TimestampUtc_IsValidDateTimeOffset [38 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithNegativeLevel_ThrowsArgumentOutOfRangeException [3 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.FigiLookupRequestTests.Constructor_WithExchangeCode_SetsExchCode [3 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.FigiLookupRequestTests.Constructor_WithIsinIdType_CreatesValidInstance [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.FigiLookupRequestTests.Constructor_WithTickerIdType_CreatesValidInstance [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithNegativePrice_ThrowsArgumentOutOfRangeException [1 ms]
  Passed MarketDataCollector.Tests.QuoteCollectorTests.TryGet_ForNonExistentSymbol_ReturnsFalse [1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithDifferentSides_StoresSideCorrectly(side: Bid) [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithDifferentSides_StoresSideCorrectly(side: Ask) [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.With_CreatesNewLevelWithModifiedValue [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithNegativeSize_ThrowsArgumentOutOfRangeException [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithValidParameters_CreatesLevel [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithZeroLevel_Succeeds [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithZeroSize_Succeeds [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Equality_TwoLevelsWithDifferentPrices_AreNotEqual [< 1 ms]
  Passed MarketDataCollector.Tests.OrderBookLevelTests.Constructor_WithNullMarketMaker_Succeeds [< 1 ms]
  Passed MarketDataCollector.Tests.QuoteCollectorTests.TryRemove_ExistingSymbol_RemovesAndReturnsQuote [5 ms]
[xUnit.net 00:00:00.67]     MarketDataCollector.Tests.CompositePublisherTests.TryPublish_PublisherThrowsException_ContinuesToOthers [FAIL]
[xUnit.net 00:00:00.67]       Expected result to be True, but found False.
[xUnit.net 00:00:00.67]       Stack Trace:
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.67]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.67]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/CompositePublisherTests.cs(95,0): at MarketDataCollector.Tests.CompositePublisherTests.TryPublish_PublisherThrowsException_ContinuesToOthers()
[xUnit.net 00:00:00.67]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.67]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.67]     MarketDataCollector.Tests.CompositePublisherTests.TryPublish_SinglePublisher_DelegatesToPublisher [FAIL]
[xUnit.net 00:00:00.67]       Expected result to be True, but found False.
[xUnit.net 00:00:00.67]       Stack Trace:
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.67]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.67]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.67]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/CompositePublisherTests.cs(135,0): at MarketDataCollector.Tests.CompositePublisherTests.TryPublish_SinglePublisher_DelegatesToPublisher()
[xUnit.net 00:00:00.67]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.67]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.68]     MarketDataCollector.Tests.CompositePublisherTests.TryPublish_OnePublisherFails_StillReturnsTrue [FAIL]
[xUnit.net 00:00:00.68]       Expected result to be True, but found False.
[xUnit.net 00:00:00.68]       Stack Trace:
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.68]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.68]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/CompositePublisherTests.cs(53,0): at MarketDataCollector.Tests.CompositePublisherTests.TryPublish_OnePublisherFails_StillReturnsTrue()
[xUnit.net 00:00:00.68]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.68]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.CompositePublisherTests.TryPublish_PublisherThrowsException_ContinuesToOthers [2 ms]
  Error Message:
   Expected result to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.CompositePublisherTests.TryPublish_PublisherThrowsException_ContinuesToOthers() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/CompositePublisherTests.cs:line 95
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.CompositePublisherTests.TryPublish_SinglePublisher_DelegatesToPublisher [1 ms]
  Error Message:
   Expected result to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.CompositePublisherTests.TryPublish_SinglePublisher_DelegatesToPublisher() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/CompositePublisherTests.cs:line 135
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.CompositePublisherTests.Constructor_NullPublishers_ThrowsArgumentNullException [< 1 ms]
  Failed MarketDataCollector.Tests.CompositePublisherTests.TryPublish_OnePublisherFails_StillReturnsTrue [2 ms]
  Error Message:
   Expected result to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.CompositePublisherTests.TryPublish_OnePublisherFails_StillReturnsTrue() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/CompositePublisherTests.cs:line 53
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.HighThroughput_ProcessesManyEventsQuickly [29 ms]
  Passed MarketDataCollector.Tests.QuoteCollectorTests.Snapshot_ReturnsAllCurrentQuotes [5 ms]
  Passed MarketDataCollector.Tests.QuoteCollectorTests.TryGet_AfterQuoteUpdate_ReturnsLatestQuote [< 1 ms]
[xUnit.net 00:00:00.68]     MarketDataCollector.Tests.CompositePublisherTests.TryPublish_AllPublishersSucceed_ReturnsTrue [FAIL]
[xUnit.net 00:00:00.68]       Expected result to be True, but found False.
[xUnit.net 00:00:00.68]       Stack Trace:
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.68]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.68]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/CompositePublisherTests.cs(31,0): at MarketDataCollector.Tests.CompositePublisherTests.TryPublish_AllPublishersSucceed_ReturnsTrue()
[xUnit.net 00:00:00.68]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.68]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.68]     MarketDataCollector.Tests.QuoteCollectorTests.OnQuote_WithValidUpdate_PublishesBboQuoteEvent [FAIL]
[xUnit.net 00:00:00.68]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.68]       Stack Trace:
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.68]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.68]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.68]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/QuoteCollectorTests.cs(49,0): at MarketDataCollector.Tests.QuoteCollectorTests.OnQuote_WithValidUpdate_PublishesBboQuoteEvent()
[xUnit.net 00:00:00.68]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.68]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.CompositePublisherTests.TryPublish_AllPublishersSucceed_ReturnsTrue [2 ms]
  Error Message:
   Expected result to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.CompositePublisherTests.TryPublish_AllPublishersSucceed_ReturnsTrue() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/CompositePublisherTests.cs:line 31
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.CompositePublisherTests.TryPublish_NoPublishers_ReturnsFalse [< 1 ms]
  Passed MarketDataCollector.Tests.QuoteCollectorTests.OnQuote_WithEmptySymbol_DoesNotPublishAnyEvents [< 1 ms]
  Passed MarketDataCollector.Tests.CompositePublisherTests.TryPublish_AllPublishersFail_ReturnsFalse [< 1 ms]
  Failed MarketDataCollector.Tests.QuoteCollectorTests.OnQuote_WithValidUpdate_PublishesBboQuoteEvent [1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.QuoteCollectorTests.OnQuote_WithValidUpdate_PublishesBboQuoteEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/QuoteCollectorTests.cs:line 49
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.QuoteCollectorTests.Upsert_TracksSeparateSequencePerSymbol [1 ms]
  Passed MarketDataCollector.Tests.QuoteCollectorTests.Upsert_IncrementsSequenceNumberPerSymbol [< 1 ms]
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.HealthEndpoint_WithoutApiPrefix_ReturnsOk [20 ms]
  Passed MarketDataCollector.Tests.QuoteCollectorTests.OnQuote_WithNullUpdate_ThrowsArgumentNullException [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SlaConfigTests.MarketHours_ShouldBeConfigurable [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SlaConfigTests.GetThresholdForSymbol_WithNoOverride_ShouldReturnDefault [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SlaConfigTests.Default_ShouldHaveReasonableDefaults [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SlaConfigTests.GetThresholdForSymbol_WithOverride_ShouldReturnCustomValue [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: "", expected: False) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: "1234", expected: True) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: "AAPL", expected: True) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: "BRK.A", expected: True) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: "GOOGL", expected: True) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: "SPY_US", expected: True) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: "A", expected: True) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: "   ", expected: False) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: "BRK-B", expected: True) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_ShouldValidateCorrectly(input: null, expected: False) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_WithSpecialCharacters_ShouldReturnFalse(input: "AAPL!") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_WithSpecialCharacters_ShouldReturnFalse(input: "AAPL@") [< 1 ms]
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.StatusResponse_ContainsIsConnected_ForUwpCompatibility [3 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_WithSpecialCharacters_ShouldReturnFalse(input: "AAP#L") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.IsValidSymbol_WithSpecialCharacters_ShouldReturnFalse(input: "AAP$L") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForOpenFigi_ShouldRemoveSuffixes(input: "MSFT.US", expected: "MSFT") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForOpenFigi_ShouldRemoveSuffixes(input: "  googl  ", expected: "GOOGL") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForOpenFigi_ShouldRemoveSuffixes(input: "brk.a", expected: "BRK") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForOpenFigi_ShouldRemoveSuffixes(input: "aapl", expected: "AAPL") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldThrowOnInvalidInput(input: "   ") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldThrowOnInvalidInput(input: null) [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldThrowOnInvalidInput(input: "") [< 1 ms]
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.HealthEndpoint_WithApiPrefix_ReturnsOk [1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForStooq_ShouldLowercaseAndReplaceDots(input: "aapl", expected: "aapl") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForStooq_ShouldLowercaseAndReplaceDots(input: "  MSFT  ", expected: "msft") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForStooq_ShouldLowercaseAndReplaceDots(input: "BRK.A", expected: "brk-a") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForStooq_ShouldLowercaseAndReplaceDots(input: "AAPL", expected: "aapl") [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.Dispose_CalledMultipleTimes_DoesNotThrow [13 ms]
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.StatusEndpoint_WithoutApiPrefix_ReturnsValidResponse [1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeMany_ShouldSkipEmptyStrings [2 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_EdgeCaseLengths_ShouldWork(input: "AA") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_EdgeCaseLengths_ShouldWork(input: "Z") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_EdgeCaseLengths_ShouldWork(input: "AAAAAAAAAAAAAAA") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_EdgeCaseLengths_ShouldWork(input: "A") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForNasdaqDataLink_ShouldUppercaseAndReplaceDotsWithUnderscores(input: "BRK.B", expected: "BRK_B") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForNasdaqDataLink_ShouldUppercaseAndReplaceDotsWithUnderscores(input: "brk.a", expected: "BRK_A") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForNasdaqDataLink_ShouldUppercaseAndReplaceDotsWithUnderscores(input: "  msft  ", expected: "MSFT") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForNasdaqDataLink_ShouldUppercaseAndReplaceDotsWithUnderscores(input: "aapl", expected: "AAPL") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForYahoo_InternationalSymbols(symbol: "7203", suffix: "T", expected: "7203.T") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForYahoo_InternationalSymbols(symbol: "bp", suffix: "L", expected: "BP.L") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForTiingo_ShouldReplaceDots(input: "BRK.B", expected: "BRK-B") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForTiingo_ShouldReplaceDots(input: "brk.a", expected: "BRK-A") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForTiingo_ShouldReplaceDots(input: "aapl", expected: "AAPL") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForTiingo_ShouldReplaceDots(input: "  brk.a  ", expected: "BRK-A") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeMany_ShouldRemoveDuplicates [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldUppercaseAndTrim(input: "aapl", expected: "AAPL") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldUppercaseAndTrim(input: "brk.a", expected: "BRK.A") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldUppercaseAndTrim(input: "BRK.B", expected: "BRK.B") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldUppercaseAndTrim(input: "AAPL", expected: "AAPL") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldUppercaseAndTrim(input: "  aapl  ", expected: "AAPL") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldUppercaseAndTrim(input: "Aapl", expected: "AAPL") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.Normalize_ShouldUppercaseAndTrim(input: "msft", expected: "MSFT") [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeMany_ShouldNormalizeAllSymbols [< 1 ms]
[xUnit.net 00:00:00.70]     MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.MetricsEndpoint_WithApiPrefix_ReturnsPrometheusFormat [FAIL]
[xUnit.net 00:00:00.70]       Expected content "# HELP mdc_published Total events published
[xUnit.net 00:00:00.70]       # TYPE mdc_published counter
[xUnit.net 00:00:00.70]       mdc_published 100
[xUnit.net 00:00:00.70]       # HELP mdc_dropped Total events dropped
[xUnit.net 00:00:00.70]       # TYPE mdc_dropped counter
[xUnit.net 00:00:00.70]       mdc_dropped 5
[xUnit.net 00:00:00.70]       # HELP mdc_integrity Integrity events
[xUnit.net 00:00:00.70]       # TYPE mdc_integrity counter
[xUnit.net 00:00:00.70]       mdc_integrity 2
[xUnit.net 00:00:00.70]       # HELP mdc_trades Trades processed
[xUnit.net 00:00:00.70]       # TYPE mdc_trades counter
[xUnit.net 00:00:00.70]       mdc_trades 80
[xUnit.net 00:00:00.70]       # HELP mdc_depth_updates Depth updates processed
[xUnit.net 00:00:00.70]       # TYPE mdc_depth_updates counter
[xUnit.net 00:00:00.70]       mdc_depth_updates 15
[xUnit.net 00:00:00.70]       # HELP mdc_quotes Quotes processed
[xUnit.net 00:00:00.70]       # TYPE mdc_quotes counter
[xUnit.net 00:00:00.70]       mdc_quotes 5
[xUnit.net 00:00:00.70]       # HELP mdc_historical_bars Historical bar events processed
[xUnit.net 00:00:00.70]       # TYPE mdc_historical_bars counter
[xUnit.net 00:00:00.70]       mdc_historical_bars 50
[xUnit.net 00:00:00.70]       # HELP mdc_events_per_second Current event rate
[xUnit.net 00:00:00.70]       # TYPE mdc_events_per_second gauge
[xUnit.net 00:00:00.70]       mdc_events_per_second 1000.0000
[xUnit.net 00:00:00.70]       # HELP mdc_drop_rate Drop rate percent
[xUnit.net 00:00:00.70]       # TYPE mdc_drop_rate gauge
[xUnit.net 00:00:00.70]       mdc_drop_rate 0.0500
[xUnit.net 00:00:00.70]       # HELP mdc_historical_bars_per_second Historical bar rate
[xUnit.net 00:00:00.70]       # TYPE mdc_historical_bars_per_second gauge
[xUnit.net 00:00:00.70]       mdc_historical_bars_per_second 50.0000
[xUnit.net 00:00:00.70]       " to contain "mdc_events_published".
[xUnit.net 00:00:00.70]       Stack Trace:
[xUnit.net 00:00:00.70]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.70]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.70]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.70]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.70]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.70]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.70]            at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.70]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/UwpCoreIntegrationTests.cs(202,0): at MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.MetricsEndpoint_WithApiPrefix_ReturnsPrometheusFormat()
[xUnit.net 00:00:00.70]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeMany_WithNull_ShouldThrow [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForYahoo_WithSuffixStartingWithDot_ShouldNotDoubleDot [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForYahoo_SymbolAlreadyHasSuffix_ShouldNotAddAnother [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForYahoo_WithoutSuffix_ShouldJustNormalize [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.AllNormalizationMethods_ShouldHandleMixedCase [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeMany_WithEmptyCollection_ShouldReturnEmpty [< 1 ms]
  Passed MarketDataCollector.Tests.Infrastructure.SymbolNormalizationTests.NormalizeForYahoo_WithSuffix_ShouldAddSuffix [< 1 ms]
  Failed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.MetricsEndpoint_WithApiPrefix_ReturnsPrometheusFormat [6 ms]
  Error Message:
   Expected content "# HELP mdc_published Total events published
# TYPE mdc_published counter
mdc_published 100
# HELP mdc_dropped Total events dropped
# TYPE mdc_dropped counter
mdc_dropped 5
# HELP mdc_integrity Integrity events
# TYPE mdc_integrity counter
mdc_integrity 2
# HELP mdc_trades Trades processed
# TYPE mdc_trades counter
mdc_trades 80
# HELP mdc_depth_updates Depth updates processed
# TYPE mdc_depth_updates counter
mdc_depth_updates 15
# HELP mdc_quotes Quotes processed
# TYPE mdc_quotes counter
mdc_quotes 5
# HELP mdc_historical_bars Historical bar events processed
# TYPE mdc_historical_bars counter
mdc_historical_bars 50
# HELP mdc_events_per_second Current event rate
# TYPE mdc_events_per_second gauge
mdc_events_per_second 1000.0000
# HELP mdc_drop_rate Drop rate percent
# TYPE mdc_drop_rate gauge
mdc_drop_rate 0.0500
# HELP mdc_historical_bars_per_second Historical bar rate
# TYPE mdc_historical_bars_per_second gauge
mdc_historical_bars_per_second 50.0000
" to contain "mdc_events_published".
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.MetricsEndpoint_WithApiPrefix_ReturnsPrometheusFormat() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/UwpCoreIntegrationTests.cs:line 202
--- End of stack trace from previous location ---
[xUnit.net 00:00:00.71]     MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.RootEndpoint_ReturnsDashboardHtml [FAIL]
[xUnit.net 00:00:00.71]       Expected content "<!doctype html>
[xUnit.net 00:00:00.71]       <html><head><title>MarketDataCollector Status</title>
[xUnit.net 00:00:00.71]       <style>body{font-family:Arial;margin:20px;} code{background:#f4f4f4;padding:4px;display:block;}
[xUnit.net 00:00:00.71]       table{border-collapse:collapse;} td,th{border:1px solid #ccc;padding:4px 8px;}</style></head>
[xUnit.net 00:00:00.71]       <body>
[xUnit.net 00:00:00.71]       <h2>MarketDataCollector Status</h2>
[xUnit.net 00:00:00.71]       <p><a href='/metrics'>Prometheus metrics</a> | <a href='/status'>JSON status</a> | <a href='/errors'>Recent errors</a></p>
[xUnit.net 00:00:00.71]       <pre id='metrics'>Loading metrics...</pre>
[xUnit.net 00:00:00.71]       <h3>Recent integrity events</h3>
[xUnit.net 00:00:00.71]       <table id='integrity'><thead><tr><th>Timestamp</th><th>Symbol</th><th>Kind</th><th>Details</th></tr></thead><tbody></tbody></table>
[xUnit.net 00:00:00.71]       <script>
[xUnit.net 00:00:00.71]       async function refresh(){
[xUnit.net 00:00:00.71]        const status=await fetch('/status').then(r=>r.json());
[xUnit.net 00:00:00.71]        document.getElementById('metrics').textContent=JSON.stringify(status.metrics,null,2);
[xUnit.net 00:00:00.71]        const tbody=document.querySelector('#integrity tbody');
[xUnit.net 00:00:00.71]        tbody.innerHTML='';
[xUnit.net 00:00:00.71]        (status.integrity||[]).forEach(ev=>{
[xUnit.net 00:00:00.71]         const row=document.createElement('tr');
[xUnit.net 00:00:00.71]         row.innerHTML=`<td>${{ev.timestamp}}</td><td>${{ev.symbol}}</td><td>${{ev.kind}}</td><td>${{ev.description||''}}</td>`;
[xUnit.net 00:00:00.71]         tbody.appendChild(row);
[xUnit.net 00:00:00.71]        });
[xUnit.net 00:00:00.71]       }
[xUnit.net 00:00:00.71]       setInterval(refresh,2000);refresh();
[xUnit.net 00:00:00.71]       </script>
[xUnit.net 00:00:00.71]       </body></html>" to contain "<!DOCTYPE html>".
[xUnit.net 00:00:00.71]       Stack Trace:
[xUnit.net 00:00:00.71]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.71]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.71]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.71]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.71]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.71]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.71]            at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.71]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/UwpCoreIntegrationTests.cs(279,0): at MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.RootEndpoint_ReturnsDashboardHtml()
[xUnit.net 00:00:00.71]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.73]     MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleSymbols_UsesSeparateBuffers [FAIL]
[xUnit.net 00:00:00.73]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.73]       Stack Trace:
[xUnit.net 00:00:00.73]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e)
[xUnit.net 00:00:00.73]            at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
[xUnit.net 00:00:00.73]            at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct)
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(238,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushAllBuffersAsync(CancellationToken ct)
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(271,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushAsync(CancellationToken ct)
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(189,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleSymbols_UsesSeparateBuffers()
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(190,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleSymbols_UsesSeparateBuffers()
[xUnit.net 00:00:00.73]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.StatusEndpoint_WithApiPrefix_ReturnsValidResponse [3 ms]
  Failed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.RootEndpoint_ReturnsDashboardHtml [3 ms]
  Error Message:
   Expected content "<!doctype html>
<html><head><title>MarketDataCollector Status</title>
<style>body{font-family:Arial;margin:20px;} code{background:#f4f4f4;padding:4px;display:block;}
table{border-collapse:collapse;} td,th{border:1px solid #ccc;padding:4px 8px;}</style></head>
<body>
<h2>MarketDataCollector Status</h2>
<p><a href='/metrics'>Prometheus metrics</a> | <a href='/status'>JSON status</a> | <a href='/errors'>Recent errors</a></p>
<pre id='metrics'>Loading metrics...</pre>
<h3>Recent integrity events</h3>
<table id='integrity'><thead><tr><th>Timestamp</th><th>Symbol</th><th>Kind</th><th>Details</th></tr></thead><tbody></tbody></table>
<script>
async function refresh(){
 const status=await fetch('/status').then(r=>r.json());
 document.getElementById('metrics').textContent=JSON.stringify(status.metrics,null,2);
 const tbody=document.querySelector('#integrity tbody');
 tbody.innerHTML='';
 (status.integrity||[]).forEach(ev=>{
  const row=document.createElement('tr');
  row.innerHTML=`<td>${{ev.timestamp}}</td><td>${{ev.symbol}}</td><td>${{ev.kind}}</td><td>${{ev.description||''}}</td>`;
  tbody.appendChild(row);
 });
}
setInterval(refresh,2000);refresh();
</script>
</body></html>" to contain "<!DOCTYPE html>".
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.RootEndpoint_ReturnsDashboardHtml() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/UwpCoreIntegrationTests.cs:line 279
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.LiveEndpoint_ReturnsOk [2 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.SearchAsync_WithSpecificProvider_QueriesOnlyThatProvider [30 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.ClearCache_ClearsSearchCache [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.SearchAsync_WithUnavailableProvider_SkipsProvider [2 ms]
  Failed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleSymbols_UsesSeparateBuffers [26 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushAllBuffersAsync(CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 238
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushAsync(CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 271
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleSymbols_UsesSeparateBuffers() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 189
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleSymbols_UsesSeparateBuffers() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 190
--- End of stack trace from previous location ---
[xUnit.net 00:00:00.73]     MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.DisposeAsync_FlushesRemainingEvents [FAIL]
[xUnit.net 00:00:00.73]       Expected files to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.73]       Stack Trace:
[xUnit.net 00:00:00.73]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.73]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.73]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.73]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.73]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.73]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.73]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(164,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.DisposeAsync_FlushesRemainingEvents()
[xUnit.net 00:00:00.73]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.73]     MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithBatchingDisabled_WritesImmediately [FAIL]
[xUnit.net 00:00:00.73]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.73]       Stack Trace:
[xUnit.net 00:00:00.73]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.73]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.73]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.73]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(188,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.WriteEventImmediateAsync(String path, MarketEvent evt, CancellationToken ct)
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(169,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct)
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(40,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithBatchingDisabled_WritesImmediately()
[xUnit.net 00:00:00.73]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(48,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithBatchingDisabled_WritesImmediately()
[xUnit.net 00:00:00.73]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.74]     MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_FileContainsValidJson [FAIL]
[xUnit.net 00:00:00.74]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.74]       Stack Trace:
[xUnit.net 00:00:00.74]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.74]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.74]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.74]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.74]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.74]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.74]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.74]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.74]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.74]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e)
[xUnit.net 00:00:00.74]            at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
[xUnit.net 00:00:00.74]            at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
[xUnit.net 00:00:00.74]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct)
[xUnit.net 00:00:00.74]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(181,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct)
[xUnit.net 00:00:00.74]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(255,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_FileContainsValidJson()
[xUnit.net 00:00:00.74]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(263,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_FileContainsValidJson()
[xUnit.net 00:00:00.74]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.SearchAsync_WithValidQuery_ReturnsResults [2 ms]
  Failed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.DisposeAsync_FlushesRemainingEvents [1 ms]
  Error Message:
   Expected files to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.DisposeAsync_FlushesRemainingEvents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 164
--- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithBatchingDisabled_WritesImmediately [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.WriteEventImmediateAsync(String path, MarketEvent evt, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 188
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 169
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithBatchingDisabled_WritesImmediately() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 40
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithBatchingDisabled_WritesImmediately() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 48
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithBatchingEnabled_BuffersUntilBatchSize [< 1 ms]
  Failed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_FileContainsValidJson [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 181
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_FileContainsValidJson() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 255
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_FileContainsValidJson() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 263
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.GetDetailsAsync_WithValidSymbol_ReturnsDetails [6 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.GetDetailsAsync_WithUnknownSymbol_ReturnsNull [1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.GetDetailsAsync_AfterDisposal_ThrowsObjectDisposedException [< 1 ms]
[xUnit.net 00:00:00.74]     MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithParallelSerialization_HandlesLargeBatches [FAIL]
[xUnit.net 00:00:00.74]       System.AggregateException : One or more errors occurred. (The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.) (The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.) (The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.)
[xUnit.net 00:00:00.74]       ---- System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.74]       ---- System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.74]       ---- System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.74]       Stack Trace:
[xUnit.net 00:00:00.74]            at System.Threading.Tasks.TaskReplicator.Run[TState](ReplicatableUserAction`1 action, ParallelOptions options, Boolean stopOnFirstFailure)
[xUnit.net 00:00:00.74]            at System.Threading.Tasks.Parallel.ForWorker[TLocal,TInt](TInt fromInclusive, TInt toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Func`4 bodyWithLocal, Func`1 localInit, Action`1 localFinally)
[xUnit.net 00:00:00.74]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.74]            at System.Threading.Tasks.Parallel.ForWorker[TLocal,TInt](TInt fromInclusive, TInt toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Func`4 bodyWithLocal, Func`1 localInit, Action`1 localFinally)
[xUnit.net 00:00:00.74]            at System.Threading.Tasks.Parallel.For(Int32 fromInclusive, Int32 toExclusive, Action`1 body)
[xUnit.net 00:00:00.74]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(205,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct)
[xUnit.net 00:00:00.74]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(181,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct)
[xUnit.net 00:00:00.74]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(211,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithParallelSerialization_HandlesLargeBatches()
[xUnit.net 00:00:00.74]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(216,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithParallelSerialization_HandlesLargeBatches()
[xUnit.net 00:00:00.75]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.75]         ----- Inner Stack Trace #1 (System.InvalidOperationException) -----
[xUnit.net 00:00:00.75]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.75]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.75]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(207,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c__DisplayClass23_0.<FlushBufferAsync>b__1(Int32 i)
[xUnit.net 00:00:00.75]            at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
[xUnit.net 00:00:00.75]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.75]            at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
[xUnit.net 00:00:00.75]            at System.Threading.Tasks.TaskReplicator.Replica.Execute()
[xUnit.net 00:00:00.75]         ----- Inner Stack Trace #2 (System.InvalidOperationException) -----
[xUnit.net 00:00:00.75]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.75]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.75]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(207,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c__DisplayClass23_0.<FlushBufferAsync>b__1(Int32 i)
[xUnit.net 00:00:00.75]            at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
[xUnit.net 00:00:00.75]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.75]            at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
[xUnit.net 00:00:00.75]            at System.Threading.Tasks.TaskReplicator.Replica.Execute()
[xUnit.net 00:00:00.75]         ----- Inner Stack Trace #3 (System.InvalidOperationException) -----
[xUnit.net 00:00:00.75]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.75]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.75]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.75]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.75]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(207,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c__DisplayClass23_0.<FlushBufferAsync>b__1(Int32 i)
[xUnit.net 00:00:00.75]            at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
[xUnit.net 00:00:00.75]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.75]            at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
[xUnit.net 00:00:00.75]            at System.Threading.Tasks.TaskReplicator.Replica.Execute()
[xUnit.net 00:00:00.75]     MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WhenBatchSizeReached_FlushesAutomatically [FAIL]
[xUnit.net 00:00:00.76]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.76]       Stack Trace:
[xUnit.net 00:00:00.76]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.76]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e)
[xUnit.net 00:00:00.76]            at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
[xUnit.net 00:00:00.76]            at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct)
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(181,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct)
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(84,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WhenBatchSizeReached_FlushesAutomatically()
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(90,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WhenBatchSizeReached_FlushesAutomatically()
[xUnit.net 00:00:00.76]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.76]     MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleBatches_WritesCorrectly [FAIL]
[xUnit.net 00:00:00.76]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.76]       Stack Trace:
[xUnit.net 00:00:00.76]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.76]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.76]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.76]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e)
[xUnit.net 00:00:00.76]            at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
[xUnit.net 00:00:00.76]            at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct)
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(181,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct)
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(105,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleBatches_WritesCorrectly()
[xUnit.net 00:00:00.76]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(116,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleBatches_WritesCorrectly()
[xUnit.net 00:00:00.76]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.SearchAsync_WithEmptyQuery_ReturnsEmptyResults [1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.SearchAsync_RespectsLimit [1 ms]
  Failed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithParallelSerialization_HandlesLargeBatches [6 ms]
  Error Message:
   System.AggregateException : One or more errors occurred. (The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.) (The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.) (The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.)
---- System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
---- System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
---- System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Threading.Tasks.TaskReplicator.Run[TState](ReplicatableUserAction`1 action, ParallelOptions options, Boolean stopOnFirstFailure)
   at System.Threading.Tasks.Parallel.ForWorker[TLocal,TInt](TInt fromInclusive, TInt toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Func`4 bodyWithLocal, Func`1 localInit, Action`1 localFinally)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Parallel.ForWorker[TLocal,TInt](TInt fromInclusive, TInt toExclusive, ParallelOptions parallelOptions, Action`1 body, Action`2 bodyWithState, Func`4 bodyWithLocal, Func`1 localInit, Action`1 localFinally)
   at System.Threading.Tasks.Parallel.For(Int32 fromInclusive, Int32 toExclusive, Action`1 body)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 205
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 181
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithParallelSerialization_HandlesLargeBatches() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 211
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WithParallelSerialization_HandlesLargeBatches() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 216
--- End of stack trace from previous location ---
----- Inner Stack Trace #1 (System.InvalidOperationException) -----
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c__DisplayClass23_0.<FlushBufferAsync>b__1(Int32 i) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 207
   at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
   at System.Threading.Tasks.TaskReplicator.Replica.Execute()
----- Inner Stack Trace #2 (System.InvalidOperationException) -----
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c__DisplayClass23_0.<FlushBufferAsync>b__1(Int32 i) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 207
   at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
   at System.Threading.Tasks.TaskReplicator.Replica.Execute()
----- Inner Stack Trace #3 (System.InvalidOperationException) -----
   at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c__DisplayClass23_0.<FlushBufferAsync>b__1(Int32 i) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 207
   at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Parallel.<>c__DisplayClass19_0`2.<ForWorker>b__1(RangeWorker& currentWorker, Int64 timeout, Boolean& replicationDelegateYieldedBeforeCompletion)
   at System.Threading.Tasks.TaskReplicator.Replica.Execute()
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.SearchAsync_CachesResults [2 ms]
  Failed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WhenBatchSizeReached_FlushesAutomatically [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 181
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WhenBatchSizeReached_FlushesAutomatically() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 84
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_WhenBatchSizeReached_FlushesAutomatically() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 90
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.SearchAsync_DeduplicatesResultsFromMultipleProviders [2 ms]
  Failed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleBatches_WritesCorrectly [14 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.AppendAsync(MarketEvent evt, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 181
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleBatches_WritesCorrectly() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 105
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.AppendAsync_MultipleBatches_WritesCorrectly() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 116
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.JsonlBatchOptions_DefaultPresets_HaveCorrectValues [1 ms]
[xUnit.net 00:00:00.76]     MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.FlushAsync_FlushesPendingEvents [FAIL]
[xUnit.net 00:00:00.77]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:00.77]       Stack Trace:
[xUnit.net 00:00:00.77]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.77]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.77]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:00.77]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:00.77]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.77]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:00.77]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:00.77]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:00.77]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e)
[xUnit.net 00:00:00.77]            at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
[xUnit.net 00:00:00.77]            at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(212,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct)
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(238,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushAllBuffersAsync(CancellationToken ct)
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs(271,0): at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushAsync(CancellationToken ct)
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(138,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.FlushAsync_FlushesPendingEvents()
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs(142,0): at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.FlushAsync_FlushesPendingEvents()
[xUnit.net 00:00:00.77]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.77]     MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.CalculateHistorical_WithBars_ShouldCalculateAllIndicators [FAIL]
[xUnit.net 00:00:00.77]       System.ArgumentOutOfRangeException : Open/Close cannot exceed high. (Parameter 'High')
[xUnit.net 00:00:00.77]       Stack Trace:
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/HistoricalBar.cs(88,0): at MarketDataCollector.Contracts.Domain.Models.HistoricalBar..ctor(String Symbol, DateOnly SessionDate, Decimal Open, Decimal High, Decimal Low, Decimal Close, Int64 Volume, String Source, Int64 SequenceNumber)
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs(226,0): at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GenerateHistoricalBars(String symbol, Int32 count)+MoveNext()
[xUnit.net 00:00:00.77]            at System.Linq.Enumerable.IEnumerableSelectIterator`2.ToArray()
[xUnit.net 00:00:00.77]            at System.Linq.Enumerable.OrderedIterator`1.ToList()
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Indicators/TechnicalIndicatorService.cs(84,0): at MarketDataCollector.Application.Indicators.TechnicalIndicatorService.CalculateHistorical(String symbol, IEnumerable`1 bars)
[xUnit.net 00:00:00.77]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs(99,0): at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.CalculateHistorical_WithBars_ShouldCalculateAllIndicators()
[xUnit.net 00:00:00.77]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.77]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.SearchAsync_WithProviderException_ContinuesWithOtherProviders [16 ms]
  Failed MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.FlushAsync_FlushesPendingEvents [1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.<>c.<FlushBufferAsync>b__23_2(MarketEvent e) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToArray()
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushBufferAsync(String path, MarketEventBuffer buffer, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 212
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushAllBuffersAsync(CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 238
   at MarketDataCollector.Storage.Sinks.JsonlStorageSink.FlushAsync(CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Storage/Sinks/JsonlStorageSink.cs:line 271
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.FlushAsync_FlushesPendingEvents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 138
   at MarketDataCollector.Tests.Storage.JsonlBatchWriteTests.FlushAsync_FlushesPendingEvents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/JsonlBatchWriteTests.cs:line 142
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.GetProvidersAsync_ReturnsAllProviderStatuses [5 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.SearchAsync_AfterDisposal_ThrowsObjectDisposedException [< 1 ms]
  Failed MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.CalculateHistorical_WithBars_ShouldCalculateAllIndicators [8 ms]
  Error Message:
   System.ArgumentOutOfRangeException : Open/Close cannot exceed high. (Parameter 'High')
  Stack Trace:
     at MarketDataCollector.Contracts.Domain.Models.HistoricalBar..ctor(String Symbol, DateOnly SessionDate, Decimal Open, Decimal High, Decimal Low, Decimal Close, Int64 Volume, String Source, Int64 SequenceNumber) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/HistoricalBar.cs:line 88
   at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GenerateHistoricalBars(String symbol, Int32 count)+MoveNext() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs:line 226
   at System.Linq.Enumerable.IEnumerableSelectIterator`2.ToArray()
   at System.Linq.Enumerable.OrderedIterator`1.ToList()
   at MarketDataCollector.Application.Indicators.TechnicalIndicatorService.CalculateHistorical(String symbol, IEnumerable`1 bars) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Indicators/TechnicalIndicatorService.cs:line 84
   at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.CalculateHistorical_WithBars_ShouldCalculateAllIndicators() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs:line 99
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchServiceTests.GetDetailsAsync_QueriesProvidersInPriorityOrder [3 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithOpenLessThanLow_ThrowsArgumentOutOfRangeException [1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithDifferentTimeframes_SetsCorrectTimeframe(timeframe: Second) [1 ms]
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.StatusEndpoint_ConcurrentRequests_AllSucceed [58 ms]
[xUnit.net 00:00:00.78]     MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GetAllSnapshots_WithMultipleSymbols_ShouldReturnAllSnapshots [FAIL]
[xUnit.net 00:00:00.78]       Expected snapshots to contain 3 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.78]       Stack Trace:
[xUnit.net 00:00:00.78]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.78]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.78]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.78]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.78]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.78]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.78]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.78]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs(158,0): at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GetAllSnapshots_WithMultipleSymbols_ShouldReturnAllSnapshots()
[xUnit.net 00:00:00.78]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.78]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithDifferentTimeframes_SetsCorrectTimeframe(timeframe: Hour) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithDifferentTimeframes_SetsCorrectTimeframe(timeframe: Day) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithDifferentTimeframes_SetsCorrectTimeframe(timeframe: Minute) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithInvalidOhlcValues_ThrowsArgumentOutOfRangeException(open: -1, high: 101, low: 99, close: 100.5) [2 ms]
  Failed MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GetAllSnapshots_WithMultipleSymbols_ShouldReturnAllSnapshots [6 ms]
  Error Message:
   Expected snapshots to contain 3 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GetAllSnapshots_WithMultipleSymbols_ShouldReturnAllSnapshots() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs:line 158
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.ProcessTrade_WithSingleTrade_ShouldNotProduceSnapshot [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithInvalidOhlcValues_ThrowsArgumentOutOfRangeException(open: 100, high: 101, low: 0, close: 100.5) [< 1 ms]
[xUnit.net 00:00:00.78]     MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.Configuration_ShouldRespectEnabledIndicators [FAIL]
[xUnit.net 00:00:00.78]       System.ArgumentOutOfRangeException : Open/Close cannot exceed high. (Parameter 'High')
[xUnit.net 00:00:00.78]       Stack Trace:
[xUnit.net 00:00:00.78]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/HistoricalBar.cs(88,0): at MarketDataCollector.Contracts.Domain.Models.HistoricalBar..ctor(String Symbol, DateOnly SessionDate, Decimal Open, Decimal High, Decimal Low, Decimal Close, Int64 Volume, String Source, Int64 SequenceNumber)
[xUnit.net 00:00:00.78]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs(226,0): at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GenerateHistoricalBars(String symbol, Int32 count)+MoveNext()
[xUnit.net 00:00:00.78]            at System.Linq.Enumerable.IEnumerableSelectIterator`2.ToArray()
[xUnit.net 00:00:00.78]            at System.Linq.Enumerable.OrderedIterator`1.ToList()
[xUnit.net 00:00:00.78]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Indicators/TechnicalIndicatorService.cs(84,0): at MarketDataCollector.Application.Indicators.TechnicalIndicatorService.CalculateHistorical(String symbol, IEnumerable`1 bars)
[xUnit.net 00:00:00.78]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs(177,0): at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.Configuration_ShouldRespectEnabledIndicators()
[xUnit.net 00:00:00.78]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.78]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.Dispose_ShouldClearAllState [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithInvalidOhlcValues_ThrowsArgumentOutOfRangeException(open: 100, high: -101, low: 99, close: 100.5) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithInvalidOhlcValues_ThrowsArgumentOutOfRangeException(open: 100, high: 0, low: 99, close: 100.5) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithInvalidOhlcValues_ThrowsArgumentOutOfRangeException(open: 100, high: 101, low: 99, close: 0) [< 1 ms]
  Failed MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.Configuration_ShouldRespectEnabledIndicators [< 1 ms]
  Error Message:
   System.ArgumentOutOfRangeException : Open/Close cannot exceed high. (Parameter 'High')
  Stack Trace:
     at MarketDataCollector.Contracts.Domain.Models.HistoricalBar..ctor(String Symbol, DateOnly SessionDate, Decimal Open, Decimal High, Decimal Low, Decimal Close, Int64 Volume, String Source, Int64 SequenceNumber) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/HistoricalBar.cs:line 88
   at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GenerateHistoricalBars(String symbol, Int32 count)+MoveNext() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs:line 226
   at System.Linq.Enumerable.IEnumerableSelectIterator`2.ToArray()
   at System.Linq.Enumerable.OrderedIterator`1.ToList()
   at MarketDataCollector.Application.Indicators.TechnicalIndicatorService.CalculateHistorical(String symbol, IEnumerable`1 bars) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Indicators/TechnicalIndicatorService.cs:line 84
   at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.Configuration_ShouldRespectEnabledIndicators() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs:line 177
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithInvalidOhlcValues_ThrowsArgumentOutOfRangeException(open: 100, high: 101, low: -99, close: 100.5) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithInvalidOhlcValues_ThrowsArgumentOutOfRangeException(open: 0, high: 101, low: 99, close: 100.5) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithInvalidOhlcValues_ThrowsArgumentOutOfRangeException(open: 100, high: 101, low: 99, close: -100.5) [< 1 ms]
[xUnit.net 00:00:00.79]     MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.ProcessTrade_WithMultipleTrades_ShouldProduceSnapshot [FAIL]
[xUnit.net 00:00:00.79]       Expected snapshot not to be <null>.
[xUnit.net 00:00:00.79]       Stack Trace:
[xUnit.net 00:00:00.79]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.79]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.79]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.79]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.79]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.79]            at FluentAssertions.Execution.AssertionScope.FailWith(String message)
[xUnit.net 00:00:00.79]            at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.79]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs(68,0): at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.ProcessTrade_WithMultipleTrades_ShouldProduceSnapshot()
[xUnit.net 00:00:00.79]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.79]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.79]     MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.CalculateHistorical_WithInsufficientBars_ShouldReturnEmptyResult [FAIL]
[xUnit.net 00:00:00.79]       System.ArgumentOutOfRangeException : Open/Close cannot exceed high. (Parameter 'High')
[xUnit.net 00:00:00.79]       Stack Trace:
[xUnit.net 00:00:00.79]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/HistoricalBar.cs(88,0): at MarketDataCollector.Contracts.Domain.Models.HistoricalBar..ctor(String Symbol, DateOnly SessionDate, Decimal Open, Decimal High, Decimal Low, Decimal Close, Int64 Volume, String Source, Int64 SequenceNumber)
[xUnit.net 00:00:00.79]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs(226,0): at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GenerateHistoricalBars(String symbol, Int32 count)+MoveNext()
[xUnit.net 00:00:00.79]            at System.Linq.Enumerable.IEnumerableSelectIterator`2.ToArray()
[xUnit.net 00:00:00.79]            at System.Linq.Enumerable.OrderedIterator`1.ToList()
[xUnit.net 00:00:00.79]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Indicators/TechnicalIndicatorService.cs(84,0): at MarketDataCollector.Application.Indicators.TechnicalIndicatorService.CalculateHistorical(String symbol, IEnumerable`1 bars)
[xUnit.net 00:00:00.79]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs(122,0): at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.CalculateHistorical_WithInsufficientBars_ShouldReturnEmptyResult()
[xUnit.net 00:00:00.79]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.79]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.ProcessTrade_WithMultipleTrades_ShouldProduceSnapshot [2 ms]
  Error Message:
   Expected snapshot not to be <null>.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message)
   at FluentAssertions.Primitives.ReferenceTypeAssertions`2.NotBeNull(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.ProcessTrade_WithMultipleTrades_ShouldProduceSnapshot() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs:line 68
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.CalculateHistorical_WithInsufficientBars_ShouldReturnEmptyResult [< 1 ms]
  Error Message:
   System.ArgumentOutOfRangeException : Open/Close cannot exceed high. (Parameter 'High')
  Stack Trace:
     at MarketDataCollector.Contracts.Domain.Models.HistoricalBar..ctor(String Symbol, DateOnly SessionDate, Decimal Open, Decimal High, Decimal Low, Decimal Close, Int64 Volume, String Source, Int64 SequenceNumber) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector.Contracts/Domain/Models/HistoricalBar.cs:line 88
   at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.GenerateHistoricalBars(String symbol, Int32 count)+MoveNext() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs:line 226
   at System.Linq.Enumerable.IEnumerableSelectIterator`2.ToArray()
   at System.Linq.Enumerable.OrderedIterator`1.ToList()
   at MarketDataCollector.Application.Indicators.TechnicalIndicatorService.CalculateHistorical(String symbol, IEnumerable`1 bars) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Indicators/TechnicalIndicatorService.cs:line 84
   at MarketDataCollector.Tests.Indicators.TechnicalIndicatorServiceTests.CalculateHistorical_WithInsufficientBars_ShouldReturnEmptyResult() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Indicators/TechnicalIndicatorServiceTests.cs:line 122
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithNegativeVolume_ThrowsArgumentOutOfRangeException [1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithSameStartAndEndTime_Succeeds [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.ExecutionStatisticsTests.SuccessRate_WithRequests_CalculatesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.ExecutionStatisticsTests.GapsRemaining_CalculatesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.ExecutionStatisticsTests.SuccessRate_NoRequests_ReturnsZero [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithNullSymbol_ThrowsArgumentException [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.PipelineOptions_Strict_DisablesSelfHealingOnly [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.PipelineOptions_Lenient_DisablesBoth [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithCloseGreaterThanHigh_ThrowsArgumentOutOfRangeException [< 1 ms]
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.StatusResponse_ContainsMetrics_WithCorrectStructure [7 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithCloseLessThanLow_ThrowsArgumentOutOfRangeException [1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithEndTimeBeforeStartTime_ThrowsArgumentOutOfRangeException [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithValidParameters_CreatesInstance [1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithAllOhlcSameValue_Succeeds [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithEmptySymbol_ThrowsArgumentException [1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_FromArgs_ResolvesDesktopMode [6 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithLowGreaterThanHigh_ThrowsArgumentOutOfRangeException [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithMinimalParameters_UsesDefaultValues [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithOpenGreaterThanHigh_ThrowsArgumentOutOfRangeException [< 1 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithZeroVolume_Succeeds [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.ConfigurationOrigin_HasAllExpectedValues [3 ms]
  Passed MarketDataCollector.Tests.Models.AggregateBarTests.Constructor_WithWhitespaceSymbol_ThrowsArgumentException [1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.ValidatedConfig_Default_IsValidEmpty [1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.FigiMappingTests.Constructor_WithAllParameters_SetsAllProperties [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.FigiMappingTests.Constructor_WithFigi_CreatesValidInstance [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_FromArgs_ResolvesWebMode [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.ValidatedConfig_Failed_SetsInvalidState [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.ValidatedConfig_ImplicitConversion_ReturnsConfig [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.PipelineOptions_Default_EnablesBothSelfHealingAndValidation [< 1 ms]
[xUnit.net 00:00:00.80]     MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_FromArgs_DetectsOneShotCommands [FAIL]
[xUnit.net 00:00:00.80]       Expected context.IsOneShotCommand to be True because for args: --backfill, but found False.
[xUnit.net 00:00:00.80]       Stack Trace:
[xUnit.net 00:00:00.80]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.80]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.80]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.80]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.80]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.80]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.80]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.80]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Config/ConfigurationUnificationTests.cs(143,0): at MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_FromArgs_DetectsOneShotCommands()
[xUnit.net 00:00:00.80]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.80]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_FromArgs_DeterminesCommand [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_ForWeb_CreatesWebContext [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillExecutionLogTests.Constructor_DefaultValues_SetsDefaults [2 ms]
  Failed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_FromArgs_DetectsOneShotCommands [1 ms]
  Error Message:
   Expected context.IsOneShotCommand to be True because for args: --backfill, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_FromArgs_DetectsOneShotCommands() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Config/ConfigurationUnificationTests.cs:line 143
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_ForDesktop_CreatesDesktopContext [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_FromArgs_ResolvesHeadlessMode [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_ForCommand_CreatesOneShotContext [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillExecutionLogTests.GetRecentExecutions_ReturnsInDescendingOrder [2 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.ValidatedConfig_FromConfig_SetsAllProperties [1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_FromArgs_ResolvesLegacyUiFlag [< 1 ms]
  Passed MarketDataCollector.Tests.Config.ConfigurationUnificationTests.DeploymentContext_ComputedProperties_AreConsistent [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillExecutionLogTests.GetExecutionsForSchedule_FiltersCorrectly [2 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillExecutionLogTests.GetFailedExecutions_FiltersFailedOnly [1 ms]
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.BackfillStatusEndpoint_ReturnsStatus [18 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillExecutionLogTests.Duration_WithStartAndEnd_ReturnsCorrectDuration [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillExecutionLogTests.AddExecution_StoresExecution [< 1 ms]
  Passed MarketDataCollector.Tests.Integration.UwpCoreIntegrationTests.BackfillProvidersEndpoint_ReturnsProviderList [5 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillExecutionLogTests.GetScheduleSummary_CalculatesCorrectStats [9 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillExecutionLogTests.GetSystemSummary_CalculatesOverallStats [3 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillExecutionLogTests.Duration_WithoutCompletion_ReturnsNull [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestAllCredentialsAsync_SkipsUnconfiguredProviders [16 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.GetAllCachedStatuses_ReturnsAllTestedProviders [4 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataQualityMonitoringServiceTests.GenerateDailyReportAsync_ShouldGenerateReport [34 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataQualityMonitoringServiceTests.ProcessTrade_ShouldUpdateAllComponents [1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestAllCredentialsAsync_TestsConfiguredProviders [7 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestCredentialAsync_TracksCredentialSource [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestCredentialAsync_UnknownProvider_ReturnsUnknownStatus [1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestCredentialAsync_EmptyApiKey_ReturnsNotConfiguredStatus [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.GetLastSuccessfulAuth_ReturnsNullForUntestedProvider [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataQualityMonitoringServiceTests.GetDashboard_ShouldReturnCompleteDashboard [9 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataQualityMonitoringServiceTests.GetRealTimeMetrics_ShouldReturnSnapshot [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestCredentialAsync_NotConfigured_ReturnsNotConfiguredStatus [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorMarketHoursTests.IsMarketOpen_ShouldReturnTrue_WhenSkipOutsideMarketHoursIsFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.GetCachedStatus_ReturnsStatusAfterTest [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestCredentialAsync_InvokesOnCredentialTestedEvent [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestCredentialAsync_SetsTestedAt [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestCredentialAsync_IncludesResponseTime [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestCredentialAsync_AlpacaWithoutSecret_ReturnsNotConfigured [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.TestCredentialAsync_MasksCredential [1 ms]
[xUnit.net 00:00:00.89]     MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ComprehensivePipeline_ShouldRespectCancellation [FAIL]
[xUnit.net 00:00:00.89]       Assert.Throws() Failure: Exception type was not an exact match
[xUnit.net 00:00:00.89]       Expected: typeof(System.OperationCanceledException)
[xUnit.net 00:00:00.89]       Actual:   typeof(System.Threading.Tasks.TaskCanceledException)
[xUnit.net 00:00:00.89]       ---- System.Threading.Tasks.TaskCanceledException : A task was canceled.
[xUnit.net 00:00:00.89]       Stack Trace:
[xUnit.net 00:00:00.89]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/ConnectionRetryIntegrationTests.cs(137,0): at MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ComprehensivePipeline_ShouldRespectCancellation()
[xUnit.net 00:00:00.89]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.89]         ----- Inner Stack Trace -----
[xUnit.net 00:00:00.89]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/ConnectionRetryIntegrationTests.cs(141,0): at MarketDataCollector.Tests.ConnectionRetryIntegrationTests.<>c.<<ComprehensivePipeline_ShouldRespectCancellation>b__4_1>d.MoveNext()
[xUnit.net 00:00:00.89]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.89]            at Polly.ResiliencePipeline.<>c.<<ExecuteAsync>b__3_0>d.MoveNext()
[xUnit.net 00:00:00.89]         --- End of stack trace from previous location ---
[xUnit.net 00:00:00.89]            at Polly.Outcome`1.GetResultOrRethrow()
[xUnit.net 00:00:00.89]            at Polly.ResiliencePipeline.ExecuteAsync(Func`2 callback, CancellationToken cancellationToken)
[xUnit.net 00:00:00.89]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/ConnectionRetryIntegrationTests.cs(139,0): at MarketDataCollector.Tests.ConnectionRetryIntegrationTests.<>c__DisplayClass4_0.<<ComprehensivePipeline_ShouldRespectCancellation>b__0>d.MoveNext()
[xUnit.net 00:00:00.89]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceTests.GetCachedStatus_ReturnsNullForUnknownProvider [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceWithMockedHttpTests.TestCredential_Timeout_ReturnsTestFailed [12 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.Consumer_WhenSinkThrows_ContinuesProcessing [206 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceWithMockedHttpTests.TestAlpacaCredentials_ValidCredentials_ReturnsValid [4 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceWithMockedHttpTests.TestPolygonCredentials_ValidCredentials_ReturnsValid [1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceWithMockedHttpTests.TestCredential_NetworkError_ReturnsTestFailed [1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceWithMockedHttpTests.TestAlpacaCredentials_InvalidCredentials_ReturnsInvalid [1 ms]
  Failed MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ComprehensivePipeline_ShouldRespectCancellation [68 ms]
  Error Message:
   Assert.Throws() Failure: Exception type was not an exact match
Expected: typeof(System.OperationCanceledException)
Actual:   typeof(System.Threading.Tasks.TaskCanceledException)
---- System.Threading.Tasks.TaskCanceledException : A task was canceled.
  Stack Trace:
     at MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ComprehensivePipeline_ShouldRespectCancellation() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/ConnectionRetryIntegrationTests.cs:line 137
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at MarketDataCollector.Tests.ConnectionRetryIntegrationTests.<>c.<<ComprehensivePipeline_ShouldRespectCancellation>b__4_1>d.MoveNext() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/ConnectionRetryIntegrationTests.cs:line 141
--- End of stack trace from previous location ---
   at Polly.ResiliencePipeline.<>c.<<ExecuteAsync>b__3_0>d.MoveNext()
--- End of stack trace from previous location ---
   at Polly.Outcome`1.GetResultOrRethrow()
   at Polly.ResiliencePipeline.ExecuteAsync(Func`2 callback, CancellationToken cancellationToken)
   at MarketDataCollector.Tests.ConnectionRetryIntegrationTests.<>c__DisplayClass4_0.<<ComprehensivePipeline_ShouldRespectCancellation>b__0>d.MoveNext() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Integration/ConnectionRetryIntegrationTests.cs:line 139
--- End of stack trace from previous location ---
[xUnit.net 00:00:00.90]     MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.ProcessQuote_ShouldTrackSpreadStatistics [FAIL]
[xUnit.net 00:00:00.90]       Expected snapshot.Value.AverageSpreadBps to approximate 25.0 +/- 5.0, but 16.666666666666668 differed by 8.333333333333332.
[xUnit.net 00:00:00.90]       Stack Trace:
[xUnit.net 00:00:00.90]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.90]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.90]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.90]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.90]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.90]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.90]            at FluentAssertions.NumericAssertionsExtensions.FailIfDifferenceOutsidePrecision[T](Boolean differenceWithinPrecision, NumericAssertions`1 parent, T expectedValue, T precision, T actualDifference, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.90]            at FluentAssertions.NumericAssertionsExtensions.BeApproximately(NumericAssertions`1 parent, Double expectedValue, Double precision, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.90]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/SpreadMonitorTests.cs(83,0): at MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.ProcessQuote_ShouldTrackSpreadStatistics()
[xUnit.net 00:00:00.90]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.90]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Credentials.CredentialTestingServiceWithMockedHttpTests.TestTiingoCredentials_ValidCredentials_ReturnsValid [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.Dispose_ShouldStopProcessing [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.LargeCapConfig_ShouldBeSensitiveToSmallSpreads [1 ms]
  Failed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.ProcessQuote_ShouldTrackSpreadStatistics [1 ms]
  Error Message:
   Expected snapshot.Value.AverageSpreadBps to approximate 25.0 +/- 5.0, but 16.666666666666668 differed by 8.333333333333332.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.NumericAssertionsExtensions.FailIfDifferenceOutsidePrecision[T](Boolean differenceWithinPrecision, NumericAssertions`1 parent, T expectedValue, T precision, T actualDifference, String because, Object[] becauseArgs)
   at FluentAssertions.NumericAssertionsExtensions.BeApproximately(NumericAssertions`1 parent, Double expectedValue, Double precision, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.ProcessQuote_ShouldTrackSpreadStatistics() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/SpreadMonitorTests.cs:line 83
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.ConsecutiveWideSpread_ShouldIncrementCount [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.ProcessQuote_WithNormalSpread_ShouldNotAlert [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.GetAllSpreadSnapshots_ShouldReturnAllSymbols [3 ms]
  Passed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.ProcessQuote_WithInvalidPrices_ShouldNotProcess [< 1 ms]
[xUnit.net 00:00:00.91]     MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.SmallCapConfig_ShouldAllowWiderSpreads [FAIL]
[xUnit.net 00:00:00.91]       Expected detected to be False, but found True.
[xUnit.net 00:00:00.91]       Stack Trace:
[xUnit.net 00:00:00.91]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.91]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.91]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.91]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.91]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.91]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.91]            at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
[xUnit.net 00:00:00.91]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/SpreadMonitorTests.cs(147,0): at MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.SmallCapConfig_ShouldAllowWiderSpreads()
[xUnit.net 00:00:00.91]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.91]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.92]     MarketDataCollector.Tests.AlpacaQuoteRoutingTests.TryRemove_RemovesQuoteAndResetsSequence [FAIL]
[xUnit.net 00:00:00.92]       System.ArgumentOutOfRangeException : Index was out of range. Must be non-negative and less than the size of the collection. (Parameter 'index')
[xUnit.net 00:00:00.92]       Stack Trace:
[xUnit.net 00:00:00.92]            at System.Collections.Generic.List`1.get_Item(Int32 index)
[xUnit.net 00:00:00.92]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs(200,0): at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.TryRemove_RemovesQuoteAndResetsSequence()
[xUnit.net 00:00:00.92]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.92]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.SmallCapConfig_ShouldAllowWiderSpreads [< 1 ms]
  Error Message:
   Expected detected to be False, but found True.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.SmallCapConfig_ShouldAllowWiderSpreads() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/SpreadMonitorTests.cs:line 147
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.GetStats_ShouldReturnCorrectStatistics [3 ms]
  Passed MarketDataCollector.Tests.Monitoring.SpreadMonitorTests.ProcessQuote_WithWideSpread_ShouldAlert [< 1 ms]
  Passed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WhenPublisherRejectsDueToBackpressure_DoesNotThrow [2 ms]
  Passed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.TryGet_IsCaseInsensitive(lookupSymbol: "Aapl") [< 1 ms]
  Passed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.TryGet_IsCaseInsensitive(lookupSymbol: "aapl") [< 1 ms]
  Passed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.TryGet_IsCaseInsensitive(lookupSymbol: "AAPL") [< 1 ms]
  Passed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_UpdatesLatestState [< 1 ms]
  Failed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.TryRemove_RemovesQuoteAndResetsSequence [< 1 ms]
  Error Message:
   System.ArgumentOutOfRangeException : Index was out of range. Must be non-negative and less than the size of the collection. (Parameter 'index')
  Stack Trace:
     at System.Collections.Generic.List`1.get_Item(Int32 index)
   at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.TryRemove_RemovesQuoteAndResetsSequence() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs:line 200
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.92]     MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithMultipleSymbols_TracksSequencePerSymbol [FAIL]
[xUnit.net 00:00:00.92]       Expected _publishedEvents to contain 4 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.92]       Stack Trace:
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.92]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.92]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs(84,0): at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithMultipleSymbols_TracksSequencePerSymbol()
[xUnit.net 00:00:00.92]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.92]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.92]     MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithAlpacaStyleUpdate_PublishesBboEvent [FAIL]
[xUnit.net 00:00:00.92]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.92]       Stack Trace:
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.92]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.92]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs(53,0): at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithAlpacaStyleUpdate_PublishesBboEvent()
[xUnit.net 00:00:00.92]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.92]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.92]     MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithRapidUpdates_ProcessesAllSuccessfully [FAIL]
[xUnit.net 00:00:00.92]       Expected _publishedEvents to contain 100 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.92]       Stack Trace:
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.92]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.92]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs(116,0): at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithRapidUpdates_ProcessesAllSuccessfully()
[xUnit.net 00:00:00.92]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.92]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:00.92]     MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithZeroPrices_StillPublishes [FAIL]
[xUnit.net 00:00:00.92]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:00.92]       Stack Trace:
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.92]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.92]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.92]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs(161,0): at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithZeroPrices_StillPublishes()
[xUnit.net 00:00:00.92]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:00.92]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithMultipleSymbols_TracksSequencePerSymbol [1 ms]
  Error Message:
   Expected _publishedEvents to contain 4 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithMultipleSymbols_TracksSequencePerSymbol() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs:line 84
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ComprehensivePipeline_ShouldRetryOnTransientFailures [25 ms]
  Failed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithAlpacaStyleUpdate_PublishesBboEvent [1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithAlpacaStyleUpdate_PublishesBboEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs:line 53
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.Snapshot_ReturnsAllTrackedQuotes [1 ms]
  Failed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithRapidUpdates_ProcessesAllSuccessfully [1 ms]
  Error Message:
   Expected _publishedEvents to contain 100 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithRapidUpdates_ProcessesAllSuccessfully() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs:line 116
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithZeroPrices_StillPublishes [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.AlpacaQuoteRoutingTests.OnQuote_WithZeroPrices_StillPublishes() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Providers/AlpacaQuoteRoutingTests.cs:line 161
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Storage.PackageResultTests.CreateFailure_ShouldSetErrorMessage [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.PackageResultTests.DurationSeconds_ShouldCalculateCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.PackageResultTests.CreateSuccess_ShouldSetSuccessFlag [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.PackageResultTests.CompressionRatio_ShouldCalculateCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithInvalidPrice_ThrowsArgumentOutOfRangeException(price: -1) [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithInvalidPrice_ThrowsArgumentOutOfRangeException(price: -100.5) [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithInvalidPrice_ThrowsArgumentOutOfRangeException(price: 0) [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithZeroSize_CreatesSuccessfully [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithAllAggressorSides_CreatesSuccessfully(aggressor: Unknown) [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithAllAggressorSides_CreatesSuccessfully(aggressor: Buy) [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithAllAggressorSides_CreatesSuccessfully(aggressor: Sell) [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithValidData_CreatesSuccessfully [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_Equality_WorksCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithInvalidSymbol_ThrowsArgumentException(symbol: "   ") [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithInvalidSymbol_ThrowsArgumentException(symbol: null) [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithInvalidSymbol_ThrowsArgumentException(symbol: "") [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_PreservesTimestamp [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithNegativeSize_ThrowsArgumentOutOfRangeException [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_IsImmutable [< 1 ms]
  Passed MarketDataCollector.Tests.TradeModelTests.Trade_WithOptionalFieldsNull_CreatesSuccessfully [< 1 ms]
[xUnit.net 00:00:00.94]     MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_WhenQueueFull_DropOldestMode_DropsEvents [FAIL]
[xUnit.net 00:00:00.94]       Expected pipeline.DroppedCount to be greater than 0L, but found 0L.
[xUnit.net 00:00:00.94]       Stack Trace:
[xUnit.net 00:00:00.94]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:00.94]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:00.94]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:00.94]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.94]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:00.94]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:00.94]            at FluentAssertions.Numeric.NumericAssertions`2.BeGreaterThan(T expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:00.94]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(245,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_WhenQueueFull_DropOldestMode_DropsEvents()
[xUnit.net 00:00:00.94]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(245,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_WhenQueueFull_DropOldestMode_DropsEvents()
[xUnit.net 00:00:00.94]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(245,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_WhenQueueFull_DropOldestMode_DropsEvents()
[xUnit.net 00:00:00.94]         --- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_WhenQueueFull_DropOldestMode_DropsEvents [52 ms]
  Error Message:
   Expected pipeline.DroppedCount to be greater than 0L, but found 0L.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Numeric.NumericAssertions`2.BeGreaterThan(T expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_WhenQueueFull_DropOldestMode_DropsEvents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 245
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_WhenQueueFull_DropOldestMode_DropsEvents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 245
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_WhenQueueFull_DropOldestMode_DropsEvents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 245
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ComprehensivePipeline_ShouldSucceedAfterTransientFailure [26 ms]
  Passed MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ComprehensivePipeline_ShouldBeConfiguredWithCorrectDefaults [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorMarketHoursTests.GetSymbolStatus_OutsideMarketHours_ShouldShowOutsideMarketHoursState [101 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorMarketHoursTests.IsMarketOpen_ShouldReturnFalse_OnWeekends [< 1 ms]
  Passed MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ReceivePipeline_ShouldHandleReceiveOperations [22 ms]
  Passed MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ConnectionPipeline_DefaultConfiguration_ShouldMatchDocumentation [< 1 ms]
  Passed MarketDataCollector.Tests.ConnectionRetryIntegrationTests.ComprehensivePipeline_ShouldRetryOnHttpRequestException [19 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.TypicalPrice_WhenAllPricesSame_ReturnsThatPrice [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.BodySize_WhenCloseLessThanOpen_ReturnsAbsoluteDifference [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.ToTimestampUtc_ReturnsCorrectUtcTimestamp [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.Constructor_WithValidParameters_CreatesInstance [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.BodySize_WhenCloseEqualsOpen_ReturnsZero [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.Notional_WhenVolumeIsZero_ReturnsZero [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.Range_ReturnsHighMinusLow [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.TypicalPrice_CalculatesAverageOfHighLowClose [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.ChangePercent_WhenPriceDecreased_ReturnsNegativePercentage [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.IsBullishAndIsBearish_AreMutuallyExclusive [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.BodySize_WhenCloseGreaterThanOpen_ReturnsPositiveDifference [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.ChangePercent_WhenPriceUnchanged_ReturnsZero [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.IsBearish_WhenCloseLessThanOpen_ReturnsTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.IsBullish_WhenCloseLessThanOpen_ReturnsFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.Notional_ReturnsCloseMultipliedByVolume [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.ChangePercent_WhenPriceIncreased_ReturnsPositivePercentage [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.ChangePercent_CalculatesCorrectlyForVariousScenarios(open: 200, close: 210, expectedChange: 5) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.ChangePercent_CalculatesCorrectlyForVariousScenarios(open: 100, close: 75, expectedChange: -25) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.ChangePercent_CalculatesCorrectlyForVariousScenarios(open: 200, close: 190, expectedChange: -5) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.ChangePercent_CalculatesCorrectlyForVariousScenarios(open: 50, close: 55, expectedChange: 10) [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.IsBearish_WhenCloseGreaterThanOpen_ReturnsFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.IsBearish_WhenCloseEqualsOpen_ReturnsFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.IsBullish_WhenCloseEqualsOpen_ReturnsFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.Range_WhenHighEqualsLow_ReturnsZero [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.Constructor_WithMinimalParameters_UsesDefaultValues [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.IsBullish_WhenCloseGreaterThanOpen_ReturnsTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Models.HistoricalBarTests.Notional_WithLargeValues_CalculatesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.AnalysisExportServiceTests.ExportToXlsx_WithMaxRecordsLimit_ShouldTruncate [35 ms]
  Passed MarketDataCollector.Tests.Storage.AnalysisExportServiceTests.ExportToXlsx_ShouldHaveValidSharedStrings [6 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.Complete_SignalsNoMoreEvents [101 ms]
  Passed MarketDataCollector.Tests.Storage.AnalysisExportServiceTests.ExportToXlsx_WithMultipleSymbols_ShouldCreateSeparateFiles [5 ms]
  Passed MarketDataCollector.Tests.Storage.AnalysisExportServiceTests.ExportToXlsx_WithValidData_ShouldCreateValidXlsxFile [4 ms]
  Passed MarketDataCollector.Tests.Storage.AnalysisExportServiceTests.ExportToXlsx_WithNoData_ShouldCreateEmptyXlsxFile [1 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_SingleEvent_EventIsConsumed [11 ms]
[xUnit.net 00:00:01.07]     MarketDataCollector.Tests.WebSocketResiliencePolicyTests.TimeoutPipeline_ShouldThrowOnTimeout [FAIL]
[xUnit.net 00:00:01.07]       Assert.Throws() Failure: Exception type was not an exact match
[xUnit.net 00:00:01.07]       Expected: typeof(System.TimeoutException)
[xUnit.net 00:00:01.07]       Actual:   typeof(Polly.Timeout.TimeoutRejectedException)
[xUnit.net 00:00:01.07]       ---- Polly.Timeout.TimeoutRejectedException : The operation didn't complete within the allowed timeout of '00:00:00.1000000'.
[xUnit.net 00:00:01.07]       -------- System.Threading.Tasks.TaskCanceledException : A task was canceled.
[xUnit.net 00:00:01.07]       Stack Trace:
[xUnit.net 00:00:01.07]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Resilience/WebSocketResiliencePolicyTests.cs(101,0): at MarketDataCollector.Tests.WebSocketResiliencePolicyTests.TimeoutPipeline_ShouldThrowOnTimeout()
[xUnit.net 00:00:01.07]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.07]         ----- Inner Stack Trace -----
[xUnit.net 00:00:01.07]            at Polly.Utils.ExceptionUtilities.TrySetStackTrace[T](T exception)
[xUnit.net 00:00:01.07]            at Polly.Timeout.TimeoutResilienceStrategy.ExecuteCore[TResult,TState](Func`3 callback, ResilienceContext context, TState state)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
[xUnit.net 00:00:01.07]            at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
[xUnit.net 00:00:01.07]            at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
[xUnit.net 00:00:01.07]            at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
[xUnit.net 00:00:01.07]            at System.Threading.Tasks.Task`1.TrySetResult(TResult result)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetExistingTaskResult(Task`1 task, TResult result)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncValueTaskMethodBuilder`1.SetResult(TResult result)
[xUnit.net 00:00:01.07]            at Polly.ResiliencePipeline.<>c.<<ExecuteAsync>b__3_0>d.MoveNext()
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
[xUnit.net 00:00:01.07]            at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
[xUnit.net 00:00:01.07]            at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
[xUnit.net 00:00:01.07]            at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
[xUnit.net 00:00:01.07]            at System.Threading.Tasks.Task.TrySetCanceled(CancellationToken tokenToRecord, Object cancellationException)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetException(Exception exception, Task`1& taskField)
[xUnit.net 00:00:01.07]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Resilience/WebSocketResiliencePolicyTests.cs(105,0): at MarketDataCollector.Tests.WebSocketResiliencePolicyTests.<>c.<<TimeoutPipeline_ShouldThrowOnTimeout>b__5_1>d.MoveNext()
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
[xUnit.net 00:00:01.07]            at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
[xUnit.net 00:00:01.07]            at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
[xUnit.net 00:00:01.07]            at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
[xUnit.net 00:00:01.07]            at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
[xUnit.net 00:00:01.07]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.07]            at Polly.Outcome`1.GetResultOrRethrow()
[xUnit.net 00:00:01.07]            at Polly.ResiliencePipeline.ExecuteAsync(Func`2 callback, CancellationToken cancellationToken)
[xUnit.net 00:00:01.07]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Resilience/WebSocketResiliencePolicyTests.cs(103,0): at MarketDataCollector.Tests.WebSocketResiliencePolicyTests.<>c__DisplayClass5_0.<<TimeoutPipeline_ShouldThrowOnTimeout>b__0>d.MoveNext()
[xUnit.net 00:00:01.07]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.07]         ----- Inner Stack Trace -----
[xUnit.net 00:00:01.07]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Resilience/WebSocketResiliencePolicyTests.cs(105,0): at MarketDataCollector.Tests.WebSocketResiliencePolicyTests.<>c.<<TimeoutPipeline_ShouldThrowOnTimeout>b__5_1>d.MoveNext()
[xUnit.net 00:00:01.07]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.07]            at Polly.ResiliencePipeline.<>c.<<ExecuteAsync>b__3_0>d.MoveNext()
  Passed MarketDataCollector.Tests.Storage.AnalysisExportServiceTests.ExportToXlsx_ShouldContainCorrectSheetData [3 ms]
  Passed MarketDataCollector.Tests.Storage.AnalysisExportServiceTests.GetProfiles_ShouldIncludeExcelProfile [1 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.FlushAsync_FlushesUnderlyingSink [11 ms]
  Passed MarketDataCollector.Tests.Storage.AnalysisExportServiceTests.ExportToXlsx_WithSpecialCharacters_ShouldEscapeXml [6 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.GapAnalyzerTests.AnalyzeGaps_ShouldReturnCompleteAnalysis [3 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.GapAnalyzerTests.RecordEvent_WithGap_ShouldDetectGap [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.GapAnalyzerTests.GenerateTimeline_ShouldIncludeMarketSessions [< 1 ms]
  Failed MarketDataCollector.Tests.WebSocketResiliencePolicyTests.TimeoutPipeline_ShouldThrowOnTimeout [106 ms]
  Error Message:
   Assert.Throws() Failure: Exception type was not an exact match
Expected: typeof(System.TimeoutException)
Actual:   typeof(Polly.Timeout.TimeoutRejectedException)
---- Polly.Timeout.TimeoutRejectedException : The operation didn't complete within the allowed timeout of '00:00:00.1000000'.
-------- System.Threading.Tasks.TaskCanceledException : A task was canceled.
  Stack Trace:
     at MarketDataCollector.Tests.WebSocketResiliencePolicyTests.TimeoutPipeline_ShouldThrowOnTimeout() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Resilience/WebSocketResiliencePolicyTests.cs:line 101
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at Polly.Utils.ExceptionUtilities.TrySetStackTrace[T](T exception)
   at Polly.Timeout.TimeoutResilienceStrategy.ExecuteCore[TResult,TState](Func`3 callback, ResilienceContext context, TState state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Threading.Tasks.Task`1.TrySetResult(TResult result)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetExistingTaskResult(Task`1 task, TResult result)
   at System.Runtime.CompilerServices.AsyncValueTaskMethodBuilder`1.SetResult(TResult result)
   at Polly.ResiliencePipeline.<>c.<<ExecuteAsync>b__3_0>d.MoveNext()
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Threading.Tasks.Task.TrySetCanceled(CancellationToken tokenToRecord, Object cancellationException)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.SetException(Exception exception, Task`1& taskField)
   at MarketDataCollector.Tests.WebSocketResiliencePolicyTests.<>c.<<TimeoutPipeline_ShouldThrowOnTimeout>b__5_1>d.MoveNext() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Resilience/WebSocketResiliencePolicyTests.cs:line 105
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Polly.Outcome`1.GetResultOrRethrow()
   at Polly.ResiliencePipeline.ExecuteAsync(Func`2 callback, CancellationToken cancellationToken)
   at MarketDataCollector.Tests.WebSocketResiliencePolicyTests.<>c__DisplayClass5_0.<<TimeoutPipeline_ShouldThrowOnTimeout>b__0>d.MoveNext() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Resilience/WebSocketResiliencePolicyTests.cs:line 103
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at MarketDataCollector.Tests.WebSocketResiliencePolicyTests.<>c.<<TimeoutPipeline_ShouldThrowOnTimeout>b__5_1>d.MoveNext() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Infrastructure/Resilience/WebSocketResiliencePolicyTests.cs:line 105
--- End of stack trace from previous location ---
   at Polly.ResiliencePipeline.<>c.<<ExecuteAsync>b__3_0>d.MoveNext()
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.GapAnalyzerTests.RecordEvent_WithNoGap_ShouldNotDetectGap [< 1 ms]
  Passed MarketDataCollector.Tests.WebSocketResiliencePolicyTests.CreateComprehensivePipeline_ShouldCombineAllPolicies [< 1 ms]
  Passed MarketDataCollector.Tests.WebSocketResiliencePolicyTests.CreateTimeoutPipeline_ShouldReturnValidPipeline [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.TotalViolations_ShouldStartAtZero [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.Dispose_ShouldClearAllState [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.GetSnapshot_ShouldReturnCorrectCounts [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.TotalRecoveries_ShouldStartAtZero [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.CurrentViolations_ShouldStartAtZero [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.GetSymbolStatus_WithUnknownSymbol_ShouldReturnNull [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.RegisterSymbol_ShouldAddSymbolToMonitoring [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.RegisterSymbol_WithCustomThreshold_ShouldUseCustomValue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.RecordEvent_WithUnregisteredSymbol_ShouldAutoRegister [< 1 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_MultipleEvents_AllEventsConsumed [13 ms]
  Passed MarketDataCollector.Tests.WebSocketResiliencePolicyTests.TimeoutPipeline_ShouldSucceedBeforeTimeout [12 ms]
  Passed MarketDataCollector.Tests.WebSocketResiliencePolicyTests.CreateConnectionPipeline_ShouldReturnValidPipeline [< 1 ms]
[xUnit.net 00:00:01.10]     MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishAsync_WithCancellation_ThrowsWhenCancelled [FAIL]
[xUnit.net 00:00:01.10]       Assert.Throws() Failure: No exception was thrown
[xUnit.net 00:00:01.10]       Expected: typeof(System.OperationCanceledException)
[xUnit.net 00:00:01.10]       Stack Trace:
[xUnit.net 00:00:01.10]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(430,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishAsync_WithCancellation_ThrowsWhenCancelled()
[xUnit.net 00:00:01.10]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(430,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishAsync_WithCancellation_ThrowsWhenCancelled()
[xUnit.net 00:00:01.10]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(430,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishAsync_WithCancellation_ThrowsWhenCancelled()
[xUnit.net 00:00:01.10]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.10]     MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(invalidCapacity: -100) [FAIL]
[xUnit.net 00:00:01.10]       Expected exception.ParamName to be "capacity", but "Capacity" differs near "Cap" (index 0).
[xUnit.net 00:00:01.10]       Stack Trace:
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.10]            at FluentAssertions.Primitives.StringEqualityValidator.ValidateAgainstMismatch()
[xUnit.net 00:00:01.10]            at FluentAssertions.Primitives.StringValidator.Validate()
[xUnit.net 00:00:01.10]            at FluentAssertions.Primitives.StringAssertions`1.Be(String expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.10]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(344,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity)
[xUnit.net 00:00:01.10]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(345,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity)
[xUnit.net 00:00:01.10]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.10]     MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(invalidCapacity: -1) [FAIL]
[xUnit.net 00:00:01.10]       Expected exception.ParamName to be "capacity", but "Capacity" differs near "Cap" (index 0).
[xUnit.net 00:00:01.10]       Stack Trace:
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.10]            at FluentAssertions.Primitives.StringEqualityValidator.ValidateAgainstMismatch()
[xUnit.net 00:00:01.10]            at FluentAssertions.Primitives.StringValidator.Validate()
[xUnit.net 00:00:01.10]            at FluentAssertions.Primitives.StringAssertions`1.Be(String expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.10]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(344,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity)
[xUnit.net 00:00:01.10]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(345,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity)
[xUnit.net 00:00:01.10]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.10]     MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(invalidCapacity: 0) [FAIL]
[xUnit.net 00:00:01.10]       Expected exception.ParamName to be "capacity", but "Capacity" differs near "Cap" (index 0).
[xUnit.net 00:00:01.10]       Stack Trace:
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.10]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.10]            at FluentAssertions.Primitives.StringEqualityValidator.ValidateAgainstMismatch()
[xUnit.net 00:00:01.10]            at FluentAssertions.Primitives.StringValidator.Validate()
[xUnit.net 00:00:01.10]            at FluentAssertions.Primitives.StringAssertions`1.Be(String expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.10]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(344,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity)
[xUnit.net 00:00:01.10]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(345,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity)
[xUnit.net 00:00:01.10]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.WebSocketResiliencePolicyTests.CreateCircuitBreakerPipeline_ShouldReturnValidPipeline [< 1 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_WhenQueueFull_DropWriteMode_ReturnsFalse [11 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishedCount_Increments_OnSuccessfulPublish [< 1 ms]
  Failed MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishAsync_WithCancellation_ThrowsWhenCancelled [2 ms]
  Error Message:
   Assert.Throws() Failure: No exception was thrown
Expected: typeof(System.OperationCanceledException)
  Stack Trace:
     at MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishAsync_WithCancellation_ThrowsWhenCancelled() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 430
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishAsync_WithCancellation_ThrowsWhenCancelled() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 430
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.PublishAsync_WithCancellation_ThrowsWhenCancelled() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 430
--- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(invalidCapacity: -100) [1 ms]
  Error Message:
   Expected exception.ParamName to be "capacity", but "Capacity" differs near "Cap" (index 0).
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.StringEqualityValidator.ValidateAgainstMismatch()
   at FluentAssertions.Primitives.StringValidator.Validate()
   at FluentAssertions.Primitives.StringAssertions`1.Be(String expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 344
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 345
--- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(invalidCapacity: -1) [1 ms]
  Error Message:
   Expected exception.ParamName to be "capacity", but "Capacity" differs near "Cap" (index 0).
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.StringEqualityValidator.ValidateAgainstMismatch()
   at FluentAssertions.Primitives.StringValidator.Validate()
   at FluentAssertions.Primitives.StringAssertions`1.Be(String expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 344
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 345
--- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(invalidCapacity: 0) [< 1 ms]
  Error Message:
   Expected exception.ParamName to be "capacity", but "Capacity" differs near "Cap" (index 0).
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.StringEqualityValidator.ValidateAgainstMismatch()
   at FluentAssertions.Primitives.StringValidator.Validate()
   at FluentAssertions.Primitives.StringAssertions`1.Be(String expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 344
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.Constructor_WithInvalidCapacity_ThrowsArgumentOutOfRangeException(Int32 invalidCapacity) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 345
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.WebSocketResiliencePolicyTests.ConnectionPipeline_ShouldRetryOnWebSocketException [27 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.AverageProcessingTimeUs_Calculated_AfterProcessing [12 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithPlaceholderPrice_ShouldReturnTrue(price: 12345.67) [5 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithPlaceholderPrice_ShouldReturnTrue(price: 99999.990000000005) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithPlaceholderPrice_ShouldReturnTrue(price: 0.001) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithPlaceholderPrice_ShouldReturnTrue(price: 9999.9899999999998) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithPlaceholderPrice_ShouldReturnTrue(price: 9999) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithPlaceholderPrice_ShouldReturnTrue(price: 0.0001) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithPlaceholderPrice_ShouldReturnTrue(price: 999999.98999999999) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithPlaceholderPrice_ShouldReturnTrue(price: 0.01) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithPlaceholderPrice_ShouldReturnTrue(price: 1234.5599999999999) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.StrictConfig_ShouldBeSensitiveToSmallDeviations [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 100) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 5) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 10) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 1) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 0.5) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 10000) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 500) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 1000) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 0.10000000000000001) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidRoundNumbers_ShouldReturnFalse(price: 50) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 888.88) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 1111.1099999999999) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 11.109999999999999) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 99.989999999999995) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 666.65999999999997) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 333.32999999999998) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 88.879999999999995) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 66.659999999999997) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 44.439999999999998) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 777.76999999999998) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 77.769999999999996) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 222.22) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 22.219999999999999) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 555.54999999999995) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 111.11) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 444.44) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 55.549999999999997) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 999.99000000000001) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 9999.9899999999998) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 5555.5500000000002) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithRepeatingDigitPrice_ShouldReturnTrue(price: 33.329999999999998) [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.LenientConfig_ShouldAllowLargerDeviations [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadQuote_WithCrossedMarket_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithZeroSize_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithInvalidSize_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadQuote_WithValidQuote_ShouldReturnFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadQuote_WithPlaceholderBidPrice_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.SetReferencePrice_ShouldEstablishBaseline [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithZeroPrice_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithModerateDeviation_ShouldReturnFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.OnBadTick_EventShouldBeFired_WhenBadTickDetected [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithValidPrice_ShouldReturnFalse [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithExtremeDeviation_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadQuote_WithPlaceholderAskPrice_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.Dispose_ShouldStopProcessing [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.IsBadTrade_WithNegativePrice_ShouldReturnTrue [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BadTickFilterTests.GetStats_ShouldTrackBadTicksCorrectly [4 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.CrossProviderComparisonServiceTests.Compare_ShouldRecommendBestProvider [5 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.CrossProviderComparisonServiceTests.RecordTrade_FromMultipleProviders_ShouldTrack [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.CrossProviderComparisonServiceTests.GetStatistics_ShouldReturnOverview [3 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialTestResult_IsSuccess_FalseForFailureStatuses(status: NotConfigured) [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialTestResult_IsSuccess_FalseForFailureStatuses(status: Expired) [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialTestResult_IsSuccess_FalseForFailureStatuses(status: Invalid) [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialTestResult_IsSuccess_FalseForFailureStatuses(status: TestFailed) [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialTestResult_IsSuccess_FalseForFailureStatuses(status: Unknown) [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialTestResult_IsSuccess_TrueForExpiringSoonStatus [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialStatusSummary_AllValid_FalseWhenAnyResultFails [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialTestResult_TimeUntilExpiration_NullWhenNoExpiration [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialTestResult_IsSuccess_TrueForValidStatus [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialStatusSummary_AllValid_TrueWhenAllResultsSuccess [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.StoredCredentialStatus_TracksConsecutiveFailures [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialTestResult_TimeUntilExpiration_CalculatesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.CredentialStatusTests.CredentialExpirationConfig_HasReasonableDefaults [< 1 ms]
  Passed MarketDataCollector.Tests.PrometheusMetricsTests.Registry_ShouldNotBeNull [1 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.TimeSinceLastFlush_UpdatesAfterFlush [51 ms]
  Passed MarketDataCollector.Tests.PrometheusMetricsTests.UpdateFromSnapshot_ShouldReflectMetricsChanges [20 ms]
  Passed MarketDataCollector.Tests.PrometheusMetricsTests.RecordProcessingLatency_ShouldNotThrow [2 ms]
  Passed MarketDataCollector.Tests.PrometheusMetricsTests.UpdateFromSnapshot_ShouldNotThrow [< 1 ms]
[xUnit.net 00:00:01.19]     MarketDataCollector.Tests.Pipeline.EventPipelineTests.DisposeAsync_ProcessesPendingEvents [FAIL]
[xUnit.net 00:00:01.19]       Expected sink.ReceivedEvents to contain 10 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.19]       Stack Trace:
[xUnit.net 00:00:01.19]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.19]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.20]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.20]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.20]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.20]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.20]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.20]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(410,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.DisposeAsync_ProcessesPendingEvents()
[xUnit.net 00:00:01.20]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs(410,0): at MarketDataCollector.Tests.Pipeline.EventPipelineTests.DisposeAsync_ProcessesPendingEvents()
[xUnit.net 00:00:01.20]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.PrometheusMetricsTests.RecordTrade_ShouldNotThrow [< 1 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.Statistics_AfterPublishing_TracksCounts [11 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.TryPublish_DifferentEventTypes_AllTypesHandled [12 ms]
  Failed MarketDataCollector.Tests.Pipeline.EventPipelineTests.DisposeAsync_ProcessesPendingEvents [2 ms]
  Error Message:
   Expected sink.ReceivedEvents to contain 10 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.DisposeAsync_ProcessesPendingEvents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 410
   at MarketDataCollector.Tests.Pipeline.EventPipelineTests.DisposeAsync_ProcessesPendingEvents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Pipeline/EventPipelineTests.cs:line 410
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.ValidatePackageAsync_WithValidPackage_ShouldPass [70 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithCancellation_ShouldCancel [2 ms]
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.PeakQueueSize_TracksHighWaterMark [51 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithCustomMetadata_ShouldIncludeMetadata [4 ms]
[xUnit.net 00:00:01.29]     MarketDataCollector.Tests.Storage.PortableDataPackagerTests.ListPackageContentsAsync_ShouldReturnContents [FAIL]
[xUnit.net 00:00:01.29]       Expected contents.Symbols {"2026-01-03"} to contain "AAPL".
[xUnit.net 00:00:01.29]       Stack Trace:
[xUnit.net 00:00:01.29]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.29]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.29]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.29]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.29]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.29]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.29]            at FluentAssertions.Collections.GenericCollectionAssertions`3.Contain(T expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.29]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/PortableDataPackagerTests.cs(348,0): at MarketDataCollector.Tests.Storage.PortableDataPackagerTests.ListPackageContentsAsync_ShouldReturnContents()
[xUnit.net 00:00:01.29]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Pipeline.EventPipelineTests.ConsumedCount_Increments_AsEventsAreProcessed [16 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.ImportPackageAsync_WithValidPackage_ShouldExtractFiles [15 ms]
  Passed MarketDataCollector.Tests.GracefulShutdownTests.StopAsync_WithEmptyFlushables_CompletesSuccessfully [3 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithNoMatchingFiles_ShouldReturnFailure [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithTags_ShouldIncludeTagsInManifest [3 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithCompressionLevels_ShouldApplyCompression [9 ms]
  Failed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.ListPackageContentsAsync_ShouldReturnContents [6 ms]
  Error Message:
   Expected contents.Symbols {"2026-01-03"} to contain "AAPL".
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.Contain(T expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Storage.PortableDataPackagerTests.ListPackageContentsAsync_ShouldReturnContents() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/PortableDataPackagerTests.cs:line 348
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithDifferentFormats_ShouldUseCorrectExtension [3 ms]
[xUnit.net 00:00:01.31]     MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithSymbolFilter_ShouldFilterFiles [FAIL]
[xUnit.net 00:00:01.31]       Expected result.Success to be True, but found False.
[xUnit.net 00:00:01.31]       Stack Trace:
[xUnit.net 00:00:01.31]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.31]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.31]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.31]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.31]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.31]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.31]            at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.31]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/PortableDataPackagerTests.cs(110,0): at MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithSymbolFilter_ShouldFilterFiles()
[xUnit.net 00:00:01.31]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.ProgressChanged_ShouldReportProgress [4 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithDataDictionary_ShouldIncludeDocumentation [3 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithValidData_ShouldCreatePackage [3 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithLoaderScripts_ShouldIncludeScripts [3 ms]
  Failed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithSymbolFilter_ShouldFilterFiles [2 ms]
  Error Message:
   Expected result.Success to be True, but found False.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeTrue(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithSymbolFilter_ShouldFilterFiles() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Storage/PortableDataPackagerTests.cs:line 110
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.ValidatePackageAsync_WithNonExistentFile_ShouldFail [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithDateFilter_ShouldFilterByDate [3 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.ImportPackageAsync_WithNonExistentFile_ShouldReturnFailure [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_ShouldIncludeManifest [4 ms]
[xUnit.net 00:00:01.36]     MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_WithHttpError_ThrowsInvalidOperationException [FAIL]
[xUnit.net 00:00:01.36]       Assert.Throws() Failure: No exception was thrown
[xUnit.net 00:00:01.36]       Expected: typeof(System.InvalidOperationException)
[xUnit.net 00:00:01.36]       Stack Trace:
[xUnit.net 00:00:01.36]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/HistoricalProviderContractTests.cs(388,0): at MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_WithHttpError_ThrowsInvalidOperationException()
[xUnit.net 00:00:01.36]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Storage.PortableDataPackagerTests.CreatePackageAsync_WithChecksums_ShouldComputeSha256 [4 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_ParsesValidResponse_ReturnsCorrectBars [24 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_ParsesValidCsvResponse_ReturnsCorrectBars [5 ms]
  Failed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_WithHttpError_ThrowsInvalidOperationException [< 1 ms]
  Error Message:
   Assert.Throws() Failure: No exception was thrown
Expected: typeof(System.InvalidOperationException)
  Stack Trace:
     at MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_WithHttpError_ThrowsInvalidOperationException() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/HistoricalProviderContractTests.cs:line 388
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_PreferredStockPCGA_RespectsDateRange [1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_RespectsDateRange_FiltersCorrectly [1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_WithEmptySymbol_ThrowsArgumentException [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_HandlesNullValues_SkipsInvalidBars [1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_PreferredStockPCGA_IncludesDividendData [3 ms]
[xUnit.net 00:00:01.38]     MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_WithInvalidJson_ThrowsInvalidOperationException [FAIL]
[xUnit.net 00:00:01.38]       Assert.Throws() Failure: Exception type was not an exact match
[xUnit.net 00:00:01.38]       Expected: typeof(System.InvalidOperationException)
[xUnit.net 00:00:01.38]       Actual:   typeof(MarketDataCollector.Application.Exceptions.DataProviderException)
[xUnit.net 00:00:01.38]       ---- MarketDataCollector.Application.Exceptions.DataProviderException : Failed to parse yahoo data for AAPL
[xUnit.net 00:00:01.38]       Stack Trace:
[xUnit.net 00:00:01.38]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/HistoricalProviderContractTests.cs(138,0): at MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_WithInvalidJson_ThrowsInvalidOperationException()
[xUnit.net 00:00:01.38]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.38]         ----- Inner Stack Trace -----
[xUnit.net 00:00:01.38]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/BaseHistoricalDataProvider.cs(427,0): at MarketDataCollector.Infrastructure.Providers.Backfill.BaseHistoricalDataProvider.DeserializeResponse[T](String json, String symbol)
[xUnit.net 00:00:01.38]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/YahooFinance/YahooFinanceHistoricalDataProvider.cs(112,0): at MarketDataCollector.Infrastructure.Providers.Backfill.YahooFinanceHistoricalDataProvider.GetAdjustedDailyBarsAsync(String symbol, Nullable`1 from, Nullable`1 to, CancellationToken ct)
[xUnit.net 00:00:01.38]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/YahooFinance/YahooFinanceHistoricalDataProvider.cs(80,0): at MarketDataCollector.Infrastructure.Providers.Backfill.YahooFinanceHistoricalDataProvider.GetDailyBarsAsync(String symbol, Nullable`1 from, Nullable`1 to, CancellationToken ct)
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_RespectDateRange_FiltersCorrectly [1 ms]
  Passed MarketDataCollector.Tests.GracefulShutdownTests.StopAsync_HandlesFlushablesThatTimeout [102 ms]
  Passed MarketDataCollector.Tests.GracefulShutdownTests.StartAsync_LogsComponentCount [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_PreferredStockPCGA_BarsAreSortedByDate [5 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_WithEmptyResponse_ReturnsEmptyList [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_NormalizesSymbol_ConvertsDotToHyphen [1 ms]
  Failed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_WithInvalidJson_ThrowsInvalidOperationException [2 ms]
  Error Message:
   Assert.Throws() Failure: Exception type was not an exact match
Expected: typeof(System.InvalidOperationException)
Actual:   typeof(MarketDataCollector.Application.Exceptions.DataProviderException)
---- MarketDataCollector.Application.Exceptions.DataProviderException : Failed to parse yahoo data for AAPL
  Stack Trace:
     at MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_WithInvalidJson_ThrowsInvalidOperationException() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/HistoricalProviderContractTests.cs:line 138
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at MarketDataCollector.Infrastructure.Providers.Backfill.BaseHistoricalDataProvider.DeserializeResponse[T](String json, String symbol) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/BaseHistoricalDataProvider.cs:line 427
   at MarketDataCollector.Infrastructure.Providers.Backfill.YahooFinanceHistoricalDataProvider.GetAdjustedDailyBarsAsync(String symbol, Nullable`1 from, Nullable`1 to, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/YahooFinance/YahooFinanceHistoricalDataProvider.cs:line 112
   at MarketDataCollector.Infrastructure.Providers.Backfill.YahooFinanceHistoricalDataProvider.GetDailyBarsAsync(String symbol, Nullable`1 from, Nullable`1 to, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/YahooFinance/YahooFinanceHistoricalDataProvider.cs:line 80
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_WithMalformedRows_SkipsInvalidLines [1 ms]
[xUnit.net 00:00:01.39]     MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_WithHttpError_ThrowsInvalidOperationException [FAIL]
[xUnit.net 00:00:01.39]       Assert.Throws() Failure: No exception was thrown
[xUnit.net 00:00:01.39]       Expected: typeof(System.InvalidOperationException)
[xUnit.net 00:00:01.39]       Stack Trace:
[xUnit.net 00:00:01.39]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/HistoricalProviderContractTests.cs(150,0): at MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_WithHttpError_ThrowsInvalidOperationException()
[xUnit.net 00:00:01.39]         --- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_HasCorrectMetadata [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_WithEmptySymbol_ThrowsArgumentException [1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_BarsAreSortedByDate [1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_HasCorrectMetadata [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_ParsesResponseWithSplits_CalculatesAdjustmentFactor [1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_HandlesEmptyResult_ReturnsEmptyList [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_ParsesPreferredStockPCGA_ReturnsCorrectBars [1 ms]
  Failed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_WithHttpError_ThrowsInvalidOperationException [1 ms]
  Error Message:
   Assert.Throws() Failure: No exception was thrown
Expected: typeof(System.InvalidOperationException)
  Stack Trace:
     at MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_WithHttpError_ThrowsInvalidOperationException() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/HistoricalProviderContractTests.cs:line 150
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_BarsAreSortedByDate [1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_ParsesResponseWithDividends_IncludesDividendData [1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.Stooq_ParsesRealCsvFormat_ExtractsAllFields [1 ms]
  Passed MarketDataCollector.Tests.Backfill.HistoricalProviderContractTests.YahooFinance_PreferredStockPCGA_ParsesCorrectPriceValues [1 ms]
  Passed MarketDataCollector.Tests.WebSocketHeartbeatTests.Constructor_ShouldAcceptCustomIntervals [2 ms]
  Passed MarketDataCollector.Tests.WebSocketHeartbeatTests.Constructor_ShouldInitializeWithDefaults [1 ms]
  Passed MarketDataCollector.Tests.WebSocketHeartbeatTests.ConnectionLost_EventShouldBeSubscribable [< 1 ms]
  Passed MarketDataCollector.Tests.WebSocketHeartbeatTests.RecordPongReceived_ShouldNotThrow [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthProviderConfig_StoresAllFields [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_CanRefresh_FalseWhenNoRefreshToken [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_LifetimeRemainingPercent_ZeroWhenExpired [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_IsExpired_TrueWhenPastExpiration [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_CanRefresh_FalseWhenRefreshTokenExpired [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_CanRefresh_TrueWhenRefreshTokenPresent [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_IsExpiringSoon_FalseWhenMoreThan5Minutes [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthRefreshResult_Failure_ContainsErrorMessage [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthRefreshResult_Success_ContainsNewToken [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_TimeUntilExpiration_CalculatesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_IsExpired_FalseWhenNotExpired [< 1 ms]
[xUnit.net 00:00:01.42]     MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.ToJson_ShouldSerializeCorrectly [FAIL]
[xUnit.net 00:00:01.42]       Expected json "{
[xUnit.net 00:00:01.42]         "providers": [
[xUnit.net 00:00:01.42]           {
[xUnit.net 00:00:01.42]             "provider": "Alpaca",
[xUnit.net 00:00:01.42]             "sampleCount": 1,
[xUnit.net 00:00:01.42]             "meanMs": 10,
[xUnit.net 00:00:01.42]             "p50Ms": 10,
[xUnit.net 00:00:01.42]             "p95Ms": 10,
[xUnit.net 00:00:01.42]             "p99Ms": 10,
[xUnit.net 00:00:01.42]             "minMs": 10,
[xUnit.net 00:00:01.42]             "maxMs": 10,
[xUnit.net 00:00:01.42]             "lastUpdateTime": "2026-02-02T23:39:02.0498097+00:00"
[xUnit.net 00:00:01.42]           }
[xUnit.net 00:00:01.42]         ],
[xUnit.net 00:00:01.42]         "fastestProvider": "Alpaca",
[xUnit.net 00:00:01.42]         "slowestProvider": "Alpaca",
[xUnit.net 00:00:01.42]         "globalP50Ms": 10,
[xUnit.net 00:00:01.42]         "globalP95Ms": 10,
[xUnit.net 00:00:01.42]         "globalP99Ms": 10,
[xUnit.net 00:00:01.42]         "totalSamples": 1,
[xUnit.net 00:00:01.42]         "calculatedAt": "2026-02-02T23:39:02.0498833+00:00"
[xUnit.net 00:00:01.42]       }" to contain "alpaca" because JSON should use camelCase.
[xUnit.net 00:00:01.42]       Stack Trace:
[xUnit.net 00:00:01.42]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.42]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.42]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.42]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.42]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.42]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.42]            at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.42]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/ProviderLatencyServiceTests.cs(202,0): at MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.ToJson_ShouldSerializeCorrectly()
[xUnit.net 00:00:01.42]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.42]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_LifetimeRemainingPercent_100WhenNoIssuedAt [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_IsExpiringSoon_TrueWhenWithin5Minutes [< 1 ms]
  Passed MarketDataCollector.Tests.Credentials.OAuthTokenTests.OAuthToken_LifetimeRemainingPercent_CalculatesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.GetSummary_ShouldIdentifyFastestAndSlowest [5 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.RecordLatency_NegativeValue_ShouldBeIgnored [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.RecordLatency_FromTimestamps_ShouldCalculateCorrectly [< 1 ms]
  Failed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.ToJson_ShouldSerializeCorrectly [2 ms]
  Error Message:
   Expected json "{
  "providers": [
    {
      "provider": "Alpaca",
      "sampleCount": 1,
      "meanMs": 10,
      "p50Ms": 10,
      "p95Ms": 10,
      "p99Ms": 10,
      "minMs": 10,
      "maxMs": 10,
      "lastUpdateTime": "2026-02-02T23:39:02.0498097+00:00"
    }
  ],
  "fastestProvider": "Alpaca",
  "slowestProvider": "Alpaca",
  "globalP50Ms": 10,
  "globalP95Ms": 10,
  "globalP99Ms": 10,
  "totalSamples": 1,
  "calculatedAt": "2026-02-02T23:39:02.0498833+00:00"
}" to contain "alpaca" because JSON should use camelCase.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.StringAssertions`1.Contain(String expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.ToJson_ShouldSerializeCorrectly() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Monitoring/ProviderLatencyServiceTests.cs:line 202
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.RecordLatency_SingleProvider_ShouldTrack [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.GetHistogram_Percentiles_ShouldBeCalculated [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.RecordLatency_MultipleProviders_ShouldTrackSeparately [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.Reset_ShouldClearProviderData [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.ResetAll_ShouldClearAllData [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.RecordLatency_WithSymbol_ShouldTrackSymbolCount [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.GetHighLatencyProviders_ShouldFilterByThreshold [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ProviderLatencyServiceTests.GetHistogram_Buckets_ShouldBePopulated [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BackpressureAlertServiceTests.GetStatus_WithNoPublishedEvents_ShouldNotDivideByZero [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BackpressureAlertServiceTests.GetStatus_MessageShouldDescribeStatus [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BackpressureAlertServiceTests.GetStatus_Normal_ShouldReturnInactive [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BackpressureAlertServiceTests.GetStatus_CriticalUtilization_ShouldReportCritical [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BackpressureAlertServiceTests.GetStatus_HighDropRate_ShouldReportLevel [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.BackpressureAlertServiceTests.GetStatus_WarningUtilization_ShouldReportWarning [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.Capacity_ShouldReturnConfiguredCapacity [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.Constructor_WithInvalidCapacity_ShouldThrow [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.GetRecent_ShouldReturnErrorsInReverseOrder [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.GetStats_ShouldReturnCorrectCounts [5 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.Record_WhenBufferFull_ShouldOverwriteOldest [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.GetRecent_WithLimit_ShouldRespectLimit [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.RecordCritical_ShouldCreateCriticalEntry [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.Record_ShouldStoreError [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.GetBySymbol_ShouldFilterBySymbol [5 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.RecordException_ShouldCreateErrorEntry [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.Clear_ShouldRemoveAllErrors [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.GetByLevel_ShouldFilterByLevel [1 ms]
  Passed MarketDataCollector.Tests.Monitoring.ErrorRingBufferTests.RecordWarning_ShouldCreateWarningEntry [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchRequestTests.Constructor_WithFilters_SetsFilterProperties [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchRequestTests.Constructor_WithCustomLimit_SetsLimit [< 1 ms]
[xUnit.net 00:00:01.45]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithEqualSizes_HasZeroImbalance [FAIL]
[xUnit.net 00:00:01.45]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.45]       Stack Trace:
[xUnit.net 00:00:01.45]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.45]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(193,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithEqualSizes_HasZeroImbalance()
[xUnit.net 00:00:01.45]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.45]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.45]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_MultipleSymbols_MaintainsSeparateBooks [FAIL]
[xUnit.net 00:00:01.45]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.45]       Stack Trace:
[xUnit.net 00:00:01.45]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.45]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(345,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_MultipleSymbols_MaintainsSeparateBooks()
[xUnit.net 00:00:01.45]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.45]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.45]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithMultipleInserts_BuildsOrderBook [FAIL]
[xUnit.net 00:00:01.45]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.45]       Stack Trace:
[xUnit.net 00:00:01.45]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.45]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(67,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithMultipleInserts_BuildsOrderBook()
[xUnit.net 00:00:01.45]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.45]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.45]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_OnlyBids_MidPriceIsNull [FAIL]
[xUnit.net 00:00:01.45]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.45]       Stack Trace:
[xUnit.net 00:00:01.45]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.45]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.45]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(204,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_OnlyBids_MidPriceIsNull()
[xUnit.net 00:00:01.45]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.45]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolSearchRequestTests.Constructor_WithQueryOnly_UsesDefaultValues [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolDetailsTests.Constructor_WithMinimalParameters_CreatesValidInstance [< 1 ms]
  Passed MarketDataCollector.Tests.SymbolSearch.SymbolDetailsTests.Constructor_WithMarketData_SetsMarketProperties [< 1 ms]
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithEqualSizes_HasZeroImbalance [2 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithEqualSizes_HasZeroImbalance() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 193
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithEmptySymbol_DoesNotPublish [< 1 ms]
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_MultipleSymbols_MaintainsSeparateBooks [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_MultipleSymbols_MaintainsSeparateBooks() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 345
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithMultipleInserts_BuildsOrderBook [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithMultipleInserts_BuildsOrderBook() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 67
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_OnlyBids_MidPriceIsNull [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_OnlyBids_MidPriceIsNull() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 204
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.UnregisterSubscription_IgnoresFutureUpdates [1 ms]
[xUnit.net 00:00:01.46]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithUpdatePriceChange_UpdatesPrice [FAIL]
[xUnit.net 00:00:01.46]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.46]       Stack Trace:
[xUnit.net 00:00:01.46]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.46]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.46]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(118,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithUpdatePriceChange_UpdatesPrice()
[xUnit.net 00:00:01.46]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.46]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.46]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_SymbolIsCaseInsensitive [FAIL]
[xUnit.net 00:00:01.46]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.46]       Stack Trace:
[xUnit.net 00:00:01.46]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.46]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.46]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(465,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_SymbolIsCaseInsensitive()
[xUnit.net 00:00:01.46]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.46]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.46]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithBidAndAsk_CalculatesMidPrice [FAIL]
[xUnit.net 00:00:01.46]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.46]       Stack Trace:
[xUnit.net 00:00:01.46]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.46]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.46]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(169,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithBidAndAsk_CalculatesMidPrice()
[xUnit.net 00:00:01.46]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.46]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.46]     MarketDataCollector.Tests.MarketDepthCollectorTests.ResetSymbolStream_ClearsBookAndStaleState [FAIL]
[xUnit.net 00:00:01.46]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.46]       Stack Trace:
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.46]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.46]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(310,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.ResetSymbolStream_ClearsBookAndStaleState()
[xUnit.net 00:00:01.46]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.46]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.46]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_InsertAtInvalidPosition_PublishesIntegrityEvent [FAIL]
[xUnit.net 00:00:01.46]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.46]       Stack Trace:
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.46]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.46]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(223,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_InsertAtInvalidPosition_PublishesIntegrityEvent()
[xUnit.net 00:00:01.46]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.46]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.46]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithUpdate_ModifiesExistingLevel [FAIL]
[xUnit.net 00:00:01.46]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.46]       Stack Trace:
[xUnit.net 00:00:01.46]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.46]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.46]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(103,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithUpdate_ModifiesExistingLevel()
[xUnit.net 00:00:01.46]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.46]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_AfterIntegrityEvent_StreamIsStale [1 ms]
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithNullUpdate_ThrowsArgumentNullException [< 1 ms]
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithUpdatePriceChange_UpdatesPrice [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithUpdatePriceChange_UpdatesPrice() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 118
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_SymbolIsCaseInsensitive [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_SymbolIsCaseInsensitive() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 465
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithBidAndAsk_CalculatesMidPrice [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithBidAndAsk_CalculatesMidPrice() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 169
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.ResetSymbolStream_ClearsBookAndStaleState [1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.ResetSymbolStream_ClearsBookAndStaleState() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 310
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.ResetSymbolStream_WithEmptySymbol_DoesNotThrow [< 1 ms]
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_InsertAtInvalidPosition_PublishesIntegrityEvent [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_InsertAtInvalidPosition_PublishesIntegrityEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 223
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithUpdate_ModifiesExistingLevel [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithUpdate_ModifiesExistingLevel() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 103
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.46]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WhenStale_PublishesStaleEvent [FAIL]
[xUnit.net 00:00:01.46]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.46]       Stack Trace:
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.46]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.46]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.46]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(285,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WhenStale_PublishesStaleEvent()
[xUnit.net 00:00:01.46]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.46]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.46]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithImbalance_CalculatesImbalanceRatio [FAIL]
[xUnit.net 00:00:01.46]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.46]       Stack Trace:
[xUnit.net 00:00:01.46]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.46]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.46]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(181,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithImbalance_CalculatesImbalanceRatio()
[xUnit.net 00:00:01.46]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.46]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.46]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_AfterDelete_ReindexesRemainingLevels [FAIL]
[xUnit.net 00:00:01.46]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.46]       Stack Trace:
[xUnit.net 00:00:01.46]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.46]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.46]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(505,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_AfterDelete_ReindexesRemainingLevels()
[xUnit.net 00:00:01.46]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.46]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.47]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithInsert_AddsLevelToBook [FAIL]
[xUnit.net 00:00:01.47]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.47]       Stack Trace:
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.47]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.47]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(47,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithInsert_AddsLevelToBook()
[xUnit.net 00:00:01.47]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.47]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.47]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_DeleteMissingPosition_PublishesIntegrityEvent [FAIL]
[xUnit.net 00:00:01.47]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.47]       Stack Trace:
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.47]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.47]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(256,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_DeleteMissingPosition_PublishesIntegrityEvent()
[xUnit.net 00:00:01.47]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.47]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.47]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithBidsAndAsks_MaintainsBothSides [FAIL]
[xUnit.net 00:00:01.47]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.47]       Stack Trace:
[xUnit.net 00:00:01.47]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.47]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.47]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(82,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithBidsAndAsks_MaintainsBothSides()
[xUnit.net 00:00:01.47]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.47]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.47]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_UpdateMissingPosition_PublishesIntegrityEvent [FAIL]
[xUnit.net 00:00:01.47]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.47]       Stack Trace:
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.47]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.47]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(241,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_UpdateMissingPosition_PublishesIntegrityEvent()
[xUnit.net 00:00:01.47]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.47]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.47]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithDeleteLastLevel_ResultsInEmptySide [FAIL]
[xUnit.net 00:00:01.47]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.47]       Stack Trace:
[xUnit.net 00:00:01.47]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.47]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.47]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(153,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithDeleteLastLevel_ResultsInEmptySide()
[xUnit.net 00:00:01.47]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.47]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WhenStale_PublishesStaleEvent [1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WhenStale_PublishesStaleEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 285
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithImbalance_CalculatesImbalanceRatio [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithImbalance_CalculatesImbalanceRatio() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 181
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_AfterDelete_ReindexesRemainingLevels [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_AfterDelete_ReindexesRemainingLevels() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 505
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithInsert_AddsLevelToBook [1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithInsert_AddsLevelToBook() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 47
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_DeleteMissingPosition_PublishesIntegrityEvent [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_DeleteMissingPosition_PublishesIntegrityEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 256
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithBidsAndAsks_MaintainsBothSides [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithBidsAndAsks_MaintainsBothSides() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 82
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_UpdateMissingPosition_PublishesIntegrityEvent [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_UpdateMissingPosition_PublishesIntegrityEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 241
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.IsSymbolStreamStale_IndependentPerSymbol [< 1 ms]
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithDeleteLastLevel_ResultsInEmptySide [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithDeleteLastLevel_ResultsInEmptySide() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 153
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.47]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithExplicitSubscription_ProcessesSubscribedSymbols [FAIL]
[xUnit.net 00:00:01.47]       Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
[xUnit.net 00:00:01.47]       Stack Trace:
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.47]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.47]            at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
[xUnit.net 00:00:01.47]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(396,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithExplicitSubscription_ProcessesSubscribedSymbols()
[xUnit.net 00:00:01.47]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.47]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.47]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithDelete_RemovesLevel [FAIL]
[xUnit.net 00:00:01.47]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.47]       Stack Trace:
[xUnit.net 00:00:01.47]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.47]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.47]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(137,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithDelete_RemovesLevel()
[xUnit.net 00:00:01.47]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.47]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.47]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithMarketMaker_PreservesMarketMakerInfo [FAIL]
[xUnit.net 00:00:01.47]       System.ArgumentOutOfRangeException : Index was out of range. Must be non-negative and less than the size of the collection. (Parameter 'index')
[xUnit.net 00:00:01.47]       Stack Trace:
[xUnit.net 00:00:01.47]            at System.Collections.Generic.List`1.get_Item(Int32 index)
[xUnit.net 00:00:01.47]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(553,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithMarketMaker_PreservesMarketMakerInfo()
[xUnit.net 00:00:01.47]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.47]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.47]     MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_InsertAtMiddle_ShiftsLevels [FAIL]
[xUnit.net 00:00:01.47]       System.InvalidOperationException : Sequence contains no elements
[xUnit.net 00:00:01.47]       Stack Trace:
[xUnit.net 00:00:01.47]            at System.Linq.ThrowHelper.ThrowNoElementsException()
[xUnit.net 00:00:01.47]            at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
[xUnit.net 00:00:01.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs(524,0): at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_InsertAtMiddle_ShiftsLevels()
[xUnit.net 00:00:01.48]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.48]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.48]     MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 2 32 * *") [FAIL]
[xUnit.net 00:00:01.48]       Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
[xUnit.net 00:00:01.48]       Stack Trace:
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.48]            at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs(43,0): at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression)
[xUnit.net 00:00:01.48]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.48]            at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.IsSymbolStreamStale_WithNonExistentSymbol_ReturnsFalse [< 1 ms]
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithWhitespaceSymbol_DoesNotPublish [< 1 ms]
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithExplicitSubscription_ProcessesSubscribedSymbols [< 1 ms]
  Error Message:
   Expected _publishedEvents to contain 1 item(s), but found 0: {empty}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.HaveCount(Int32 expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithExplicitSubscription_ProcessesSubscribedSymbols() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 396
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithDelete_RemovesLevel [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithDelete_RemovesLevel() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 137
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithMarketMaker_PreservesMarketMakerInfo [< 1 ms]
  Error Message:
   System.ArgumentOutOfRangeException : Index was out of range. Must be non-negative and less than the size of the collection. (Parameter 'index')
  Stack Trace:
     at System.Collections.Generic.List`1.get_Item(Int32 index)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithMarketMaker_PreservesMarketMakerInfo() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 553
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.GetRecentIntegrityEvents_ReturnsIntegrityHistory [1 ms]
  Passed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_WithExplicitSubscriptionRequired_IgnoresUnsubscribedSymbols [< 1 ms]
  Failed MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_InsertAtMiddle_ShiftsLevels [< 1 ms]
  Error Message:
   System.InvalidOperationException : Sequence contains no elements
  Stack Trace:
     at System.Linq.ThrowHelper.ThrowNoElementsException()
   at System.Linq.Enumerable.Last[TSource](IEnumerable`1 source)
   at MarketDataCollector.Tests.MarketDepthCollectorTests.OnDepth_InsertAtMiddle_ShiftsLevels() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Domain/Collectors/MarketDepthCollectorTests.cs:line 524
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 2 32 * *") [< 1 ms]
  Error Message:
   Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs:line 43
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
[xUnit.net 00:00:01.48]     MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "60 2 * * *") [FAIL]
[xUnit.net 00:00:01.48]       Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
[xUnit.net 00:00:01.48]       Stack Trace:
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.48]            at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs(43,0): at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression)
[xUnit.net 00:00:01.48]            at InvokeStub_CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(Object, Span`1)
[xUnit.net 00:00:01.48]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:01.48]     MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 2 * 13 *") [FAIL]
[xUnit.net 00:00:01.48]       Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
[xUnit.net 00:00:01.48]       Stack Trace:
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.48]            at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs(43,0): at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression)
[xUnit.net 00:00:01.48]            at InvokeStub_CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(Object, Span`1)
[xUnit.net 00:00:01.48]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:01.48]     MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 24 * * *") [FAIL]
[xUnit.net 00:00:01.48]       Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
[xUnit.net 00:00:01.48]       Stack Trace:
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.48]            at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs(43,0): at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression)
[xUnit.net 00:00:01.48]            at InvokeStub_CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(Object, Span`1)
[xUnit.net 00:00:01.48]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "   ") [< 1 ms]
  Failed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "60 2 * * *") [< 1 ms]
  Error Message:
   Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs:line 43
   at InvokeStub_CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.GracefulShutdownTests.StopAsync_FlushesInParallel [105 ms]
  Failed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 2 * 13 *") [< 1 ms]
  Error Message:
   Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs:line 43
   at InvokeStub_CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 2 * *") [< 1 ms]
  Failed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 24 * * *") [< 1 ms]
  Error Message:
   Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs:line 43
   at InvokeStub_CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.GracefulShutdownTests.StopAsync_HandlesFlushablesThatThrow [1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "") [< 1 ms]
[xUnit.net 00:00:01.48]     MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 2 * * 7") [FAIL]
[xUnit.net 00:00:01.48]       Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
[xUnit.net 00:00:01.48]       Stack Trace:
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:00:01.48]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:00:01.48]            at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
[xUnit.net 00:00:01.48]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs(43,0): at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression)
[xUnit.net 00:00:01.48]            at InvokeStub_CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(Object, Span`1)
[xUnit.net 00:00:01.48]            at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 2 * * * *") [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "abc") [< 1 ms]
  Failed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(cronExpression: "0 2 * * 7") [< 1 ms]
  Error Message:
   Expected CronExpressionParser.IsValid(cronExpression) to be False, but found True.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.BooleanAssertions`1.BeFalse(String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(String cronExpression) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/ScheduledBackfillTests.cs:line 43
   at InvokeStub_CronExpressionParserTests.IsValid_InvalidExpressions_ReturnsFalse(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Passed MarketDataCollector.Tests.GracefulShutdownTests.StopAsync_FlushesAllRegisteredComponents [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_ValidExpressions_ReturnsTrue(cronExpression: "0 23 * * 1-5") [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_ValidExpressions_ReturnsTrue(cronExpression: "30 6 * * 1-5") [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_ValidExpressions_ReturnsTrue(cronExpression: "0 2 * * *") [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_ValidExpressions_ReturnsTrue(cronExpression: "0 3 * * 0") [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_ValidExpressions_ReturnsTrue(cronExpression: "*/15 * * * *") [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_ValidExpressions_ReturnsTrue(cronExpression: "0 0 1 * *") [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.IsValid_ValidExpressions_ReturnsTrue(cronExpression: "0 0 * * *") [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.TryParse_ListExpression_ParsesCorrectly [5 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.GetNextOccurrence_DailyAt2am_BeforeTime_ReturnsSameDay [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.GetNextOccurrence_InvalidExpression_ReturnsNull [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.TryParse_StepExpression_ParsesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.GetNextOccurrence_DailyAt2am_ReturnsNextDay [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.GetDescription_ValidExpression_ReturnsDescription [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.GetDescription_InvalidExpression_ReturnsError [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.TryParse_RangeExpression_ParsesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.GetNextOccurrence_WeeklySunday_ReturnsNextSunday [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.TryParse_WeeklySunday_ParsesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.CronExpressionParserTests.TryParse_DailyAt2am_ParsesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.PackageManifestTests.PackageFileEntry_ShouldStoreAllProperties [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.PackageManifestTests.NewManifest_ShouldHaveValidDefaults [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_MultipleCallsWithinLimit_AllReturnQuickly [4 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.RecordRequest_TracksRequestInWindow [< 1 ms]
[xUnit.net 00:00:01.59]     MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.MarketDataJsonContext_PrettyPrintOptions_ShouldIndent [FAIL]
[xUnit.net 00:00:01.59]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:01.59]       Stack Trace:
[xUnit.net 00:00:01.59]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:01.59]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs(180,0): at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.MarketDataJsonContext_PrettyPrintOptions_ShouldIndent()
[xUnit.net 00:00:01.59]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.59]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.59]     MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.MarketDataJsonContext_HighPerformanceOptions_ShouldNotIndent [FAIL]
[xUnit.net 00:00:01.59]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:01.59]       Stack Trace:
[xUnit.net 00:00:01.59]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.59]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.59]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
[xUnit.net 00:00:01.59]            at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
[xUnit.net 00:00:01.59]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs(162,0): at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.MarketDataJsonContext_HighPerformanceOptions_ShouldNotIndent()
[xUnit.net 00:00:01.59]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.59]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.GracefulShutdownTests.StopAsync_CompletesWithinTimeout [102 ms]
  Failed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.MarketDataJsonContext_PrettyPrintOptions_ShouldIndent [6 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.MarketDataJsonContext_PrettyPrintOptions_ShouldIndent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs:line 180
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.MarketDataJsonContext_HighPerformanceOptions_ShouldNotIndent [< 1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoForRootType(Type type, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializer.GetTypeInfo(JsonSerializerOptions options, Type inputType)
   at System.Text.Json.JsonSerializer.GetTypeInfo[T](JsonSerializerOptions options)
   at System.Text.Json.JsonSerializer.Serialize[TValue](TValue value, JsonSerializerOptions options)
   at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.MarketDataJsonContext_HighPerformanceOptions_ShouldNotIndent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs:line 162
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.SlidingWindow_OldRequestsExpire_NewRequestsAllowed [121 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.Constructor_WithInvalidMaxRequests_ThrowsArgumentOutOfRangeException(maxRequests: 0) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.Constructor_WithInvalidMaxRequests_ThrowsArgumentOutOfRangeException(maxRequests: -1) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.Constructor_WithInvalidMaxRequests_ThrowsArgumentOutOfRangeException(maxRequests: -100) [< 1 ms]
  Passed MarketDataCollector.Tests.ExponentialBackoffTests.ExponentialBackoff_ShouldIncreaseDelayBetweenRetries [704 ms]
[xUnit.net 00:00:01.65]     MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.Serialize_MarketEvent_ShouldProduceValidJson [FAIL]
[xUnit.net 00:00:01.65]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:01.65]       Stack Trace:
[xUnit.net 00:00:01.65]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.65]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.65]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.65]            at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
[xUnit.net 00:00:01.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs(22,0): at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent()
[xUnit.net 00:00:01.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs(200,0): at MarketDataCollector.Application.Serialization.HighPerformanceJson.Serialize(MarketEvent evt)
[xUnit.net 00:00:01.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs(39,0): at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.Serialize_MarketEvent_ShouldProduceValidJson()
[xUnit.net 00:00:01.65]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.65]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.65]     MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.DeserializeFromUtf8Bytes_ShouldWorkCorrectly [FAIL]
[xUnit.net 00:00:01.65]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:01.65]       Stack Trace:
[xUnit.net 00:00:01.65]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.65]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.65]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.65]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.65]            at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
[xUnit.net 00:00:01.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs(22,0): at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent()
[xUnit.net 00:00:01.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs(192,0): at MarketDataCollector.Application.Serialization.HighPerformanceJson.SerializeToUtf8Bytes(MarketEvent evt)
[xUnit.net 00:00:01.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs(97,0): at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.DeserializeFromUtf8Bytes_ShouldWorkCorrectly()
[xUnit.net 00:00:01.65]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.65]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.65]     MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.ParseAlpacaQuote_ShouldParseCorrectly [FAIL]
[xUnit.net 00:00:01.65]       System.InvalidOperationException : The JSON property name for 'MarketDataCollector.Application.Serialization.AlpacaQuoteMessage.t' collides with another property.
[xUnit.net 00:00:01.65]       Stack Trace:
[xUnit.net 00:00:01.65]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializerPropertyNameConflict(Type type, String propertyName)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.JsonPropertyInfoList.AddPropertyWithConflictResolution(JsonPropertyInfo jsonPropertyInfo, PropertyHierarchyResolutionState& state)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonMetadataServices.PopulateProperties(JsonTypeInfo typeInfo, JsonPropertyInfoList propertyList, Func`2 propInitFunc)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<get_PropertyList>g__CreatePropertyList|63_0()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.get_PropertyList()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.65]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.65]            at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
[xUnit.net 00:00:01.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.AlpacaQuoteMessage.g.cs(22,0): at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_AlpacaQuoteMessage()
[xUnit.net 00:00:01.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs(232,0): at MarketDataCollector.Application.Serialization.HighPerformanceJson.ParseAlpacaQuote(ReadOnlySpan`1 utf8Json)
[xUnit.net 00:00:01.65]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs(137,0): at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.ParseAlpacaQuote_ShouldParseCorrectly()
[xUnit.net 00:00:01.65]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.65]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.65]     MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.Deserialize_ValidJson_ShouldProduceMarketEvent [FAIL]
[xUnit.net 00:00:01.65]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:01.65]       Stack Trace:
[xUnit.net 00:00:01.65]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.65]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:01.65]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.66]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs(22,0): at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent()
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs(200,0): at MarketDataCollector.Application.Serialization.HighPerformanceJson.Serialize(MarketEvent evt)
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs(76,0): at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.Deserialize_ValidJson_ShouldProduceMarketEvent()
[xUnit.net 00:00:01.66]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.66]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.66]     MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.ParseAlpacaTrade_ShouldParseCorrectly [FAIL]
[xUnit.net 00:00:01.66]       System.InvalidOperationException : The JSON property name for 'MarketDataCollector.Application.Serialization.AlpacaTradeMessage.s' collides with another property.
[xUnit.net 00:00:01.66]       Stack Trace:
[xUnit.net 00:00:01.66]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializerPropertyNameConflict(Type type, String propertyName)
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.JsonPropertyInfoList.AddPropertyWithConflictResolution(JsonPropertyInfo jsonPropertyInfo, PropertyHierarchyResolutionState& state)
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonMetadataServices.PopulateProperties(JsonTypeInfo typeInfo, JsonPropertyInfoList propertyList, Func`2 propInitFunc)
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<get_PropertyList>g__CreatePropertyList|63_0()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.get_PropertyList()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.AlpacaTradeMessage.g.cs(22,0): at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_AlpacaTradeMessage()
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs(224,0): at MarketDataCollector.Application.Serialization.HighPerformanceJson.ParseAlpacaTrade(ReadOnlySpan`1 utf8Json)
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs(116,0): at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.ParseAlpacaTrade_ShouldParseCorrectly()
[xUnit.net 00:00:01.66]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.66]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.66]     MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.SerializeToUtf8Bytes_ShouldBeEquivalentToStringSerialize [FAIL]
[xUnit.net 00:00:01.66]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:01.66]       Stack Trace:
[xUnit.net 00:00:01.66]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.66]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs(22,0): at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent()
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs(200,0): at MarketDataCollector.Application.Serialization.HighPerformanceJson.Serialize(MarketEvent evt)
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs(58,0): at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.SerializeToUtf8Bytes_ShouldBeEquivalentToStringSerialize()
[xUnit.net 00:00:01.66]            at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
[xUnit.net 00:00:01.66]            at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:01.66]     MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.SerializeToStreamAsync_ShouldWriteNewlineDelimited [FAIL]
[xUnit.net 00:00:01.66]       System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
[xUnit.net 00:00:01.66]       Stack Trace:
[xUnit.net 00:00:01.66]            at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.66]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
[xUnit.net 00:00:01.66]            at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
[xUnit.net 00:00:01.66]            at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs(22,0): at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent()
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs(268,0): at MarketDataCollector.Application.Serialization.HighPerformanceJson.SerializeToStreamAsync(Stream stream, IEnumerable`1 events, CancellationToken ct)
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs(265,0): at MarketDataCollector.Application.Serialization.HighPerformanceJson.SerializeToStreamAsync(Stream stream, IEnumerable`1 events, CancellationToken ct)
[xUnit.net 00:00:01.66]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs(209,0): at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.SerializeToStreamAsync_ShouldWriteNewlineDelimited()
[xUnit.net 00:00:01.66]         --- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.Serialize_MarketEvent_ShouldProduceValidJson [56 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs:line 22
   at MarketDataCollector.Application.Serialization.HighPerformanceJson.Serialize(MarketEvent evt) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs:line 200
   at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.Serialize_MarketEvent_ShouldProduceValidJson() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs:line 39
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Passed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.JsonBenchmarkUtilities_CreateSampleEvents_ShouldGenerateEvents [2 ms]
  Failed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.DeserializeFromUtf8Bytes_ShouldWorkCorrectly [< 1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs:line 22
   at MarketDataCollector.Application.Serialization.HighPerformanceJson.SerializeToUtf8Bytes(MarketEvent evt) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs:line 192
   at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.DeserializeFromUtf8Bytes_ShouldWorkCorrectly() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs:line 97
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.ParseAlpacaQuote_ShouldParseCorrectly [4 ms]
  Error Message:
   System.InvalidOperationException : The JSON property name for 'MarketDataCollector.Application.Serialization.AlpacaQuoteMessage.t' collides with another property.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializerPropertyNameConflict(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.JsonPropertyInfoList.AddPropertyWithConflictResolution(JsonPropertyInfo jsonPropertyInfo, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.JsonMetadataServices.PopulateProperties(JsonTypeInfo typeInfo, JsonPropertyInfoList propertyList, Func`2 propInitFunc)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<get_PropertyList>g__CreatePropertyList|63_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.get_PropertyList()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_AlpacaQuoteMessage() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.AlpacaQuoteMessage.g.cs:line 22
   at MarketDataCollector.Application.Serialization.HighPerformanceJson.ParseAlpacaQuote(ReadOnlySpan`1 utf8Json) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs:line 232
   at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.ParseAlpacaQuote_ShouldParseCorrectly() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs:line 137
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.Deserialize_ValidJson_ShouldProduceMarketEvent [< 1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs:line 22
   at MarketDataCollector.Application.Serialization.HighPerformanceJson.Serialize(MarketEvent evt) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs:line 200
   at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.Deserialize_ValidJson_ShouldProduceMarketEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs:line 76
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.ParseAlpacaTrade_ShouldParseCorrectly [2 ms]
  Error Message:
   System.InvalidOperationException : The JSON property name for 'MarketDataCollector.Application.Serialization.AlpacaTradeMessage.s' collides with another property.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_SerializerPropertyNameConflict(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.JsonPropertyInfoList.AddPropertyWithConflictResolution(JsonPropertyInfo jsonPropertyInfo, PropertyHierarchyResolutionState& state)
   at System.Text.Json.Serialization.Metadata.JsonMetadataServices.PopulateProperties(JsonTypeInfo typeInfo, JsonPropertyInfoList propertyList, Func`2 propInitFunc)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<get_PropertyList>g__CreatePropertyList|63_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.get_PropertyList()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_AlpacaTradeMessage() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.AlpacaTradeMessage.g.cs:line 22
   at MarketDataCollector.Application.Serialization.HighPerformanceJson.ParseAlpacaTrade(ReadOnlySpan`1 utf8Json) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs:line 224
   at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.ParseAlpacaTrade_ShouldParseCorrectly() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs:line 116
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.SerializeToUtf8Bytes_ShouldBeEquivalentToStringSerialize [< 1 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs:line 22
   at MarketDataCollector.Application.Serialization.HighPerformanceJson.Serialize(MarketEvent evt) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs:line 200
   at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.SerializeToUtf8Bytes_ShouldBeEquivalentToStringSerialize() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs:line 58
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.SerializeToStreamAsync_ShouldWriteNewlineDelimited [3 ms]
  Error Message:
   System.InvalidOperationException : The type 'MarketDataCollector.Contracts.Domain.Models.DepthIntegrityEvent' contains property 'kind' that conflicts with an existing metadata property name. Consider either renaming it or ignoring it with JsonIgnoreAttribute.
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowInvalidOperationException_PropertyConflictsWithMetadataPropertyName(Type type, String propertyName)
   at System.Text.Json.Serialization.Metadata.PolymorphicTypeResolver..ctor(JsonSerializerOptions options, JsonPolymorphismOptions polymorphismOptions, Type baseType, Boolean converterCanHaveMetadata)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.ConfigureProperties()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.Configure()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
--- End of stack trace from previous location ---
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.<EnsureConfigured>g__ConfigureSynchronized|174_0()
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo.EnsureConfigured()
   at System.Text.Json.JsonSerializerOptions.GetTypeInfoInternal(Type type, Boolean ensureConfigured, Nullable`1 ensureNotNull, Boolean resolveIfMutable, Boolean fallBackToNearestAncestorType)
   at System.Text.Json.JsonSerializerOptions.GetTypeInfo(Type type)
   at MarketDataCollector.Application.Serialization.MarketDataJsonContext.get_MarketEvent() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/obj/Release/net9.0/System.Text.Json.SourceGeneration/System.Text.Json.SourceGeneration.JsonSourceGenerator/MarketDataJsonContext.MarketEvent.g.cs:line 22
   at MarketDataCollector.Application.Serialization.HighPerformanceJson.SerializeToStreamAsync(Stream stream, IEnumerable`1 events, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs:line 268
   at MarketDataCollector.Application.Serialization.HighPerformanceJson.SerializeToStreamAsync(Stream stream, IEnumerable`1 events, CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Application/Serialization/MarketDataJsonContext.cs:line 265
   at MarketDataCollector.Tests.Serialization.HighPerformanceJsonTests.SerializeToStreamAsync_ShouldWriteNewlineDelimited() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Serialization/HighPerformanceJsonTests.cs:line 209
--- End of stack trace from previous location ---
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithExcessiveMaxConcurrentRequests_ThrowsArgumentOutOfRangeException(maxConcurrentRequests: 101) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithExcessiveMaxConcurrentRequests_ThrowsArgumentOutOfRangeException(maxConcurrentRequests: 1000) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithExcessiveMaxConcurrentRequests_ThrowsArgumentOutOfRangeException(maxConcurrentRequests: 200) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithValidMaxConcurrentRequests_DoesNotThrowArgumentOutOfRangeException(maxConcurrentRequests: 10) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithValidMaxConcurrentRequests_DoesNotThrowArgumentOutOfRangeException(maxConcurrentRequests: 100) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithValidMaxConcurrentRequests_DoesNotThrowArgumentOutOfRangeException(maxConcurrentRequests: 1) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithValidMaxConcurrentRequests_DoesNotThrowArgumentOutOfRangeException(maxConcurrentRequests: 50) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithValidMaxConcurrentRequests_DoesNotThrowArgumentOutOfRangeException(maxConcurrentRequests: 3) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithZeroOrNegativeMaxConcurrentRequests_ThrowsArgumentOutOfRangeException(maxConcurrentRequests: -1) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithZeroOrNegativeMaxConcurrentRequests_ThrowsArgumentOutOfRangeException(maxConcurrentRequests: 0) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithZeroOrNegativeMaxConcurrentRequests_ThrowsArgumentOutOfRangeException(maxConcurrentRequests: -100) [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.BackfillWorkerServiceTests.Constructor_WithDefaultConfig_DoesNotThrowArgumentOutOfRangeException [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SequenceErrorTrackerTests.CheckSequence_WithGap_ShouldDetectGapError [2 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SequenceErrorTrackerTests.CheckSequence_WithNormalSequence_ShouldNotDetectError [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SequenceErrorTrackerTests.CheckSequence_WithOutOfOrder_ShouldDetectError [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SequenceErrorTrackerTests.GetStatistics_ShouldReturnCorrectCounts [2 ms]
  Passed MarketDataCollector.Tests.PrometheusMetricsUpdaterTests.DisposeAsync_ShouldCompleteGracefully [9 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithMinDelay_EnforcesDelayBetweenRequests [100 ms]
[xUnit.net 00:00:01.72]     MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithPreCancelledToken_ThrowsImmediately [FAIL]
[xUnit.net 00:00:01.72]       Assert.Throws() Failure: Exception type was not an exact match
[xUnit.net 00:00:01.72]       Expected: typeof(System.OperationCanceledException)
[xUnit.net 00:00:01.72]       Actual:   typeof(System.Threading.Tasks.TaskCanceledException)
[xUnit.net 00:00:01.72]       ---- System.Threading.Tasks.TaskCanceledException : A task was canceled.
[xUnit.net 00:00:01.72]       Stack Trace:
[xUnit.net 00:00:01.72]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/RateLimiterTests.cs(290,0): at MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithPreCancelledToken_ThrowsImmediately()
[xUnit.net 00:00:01.72]         --- End of stack trace from previous location ---
[xUnit.net 00:00:01.72]         ----- Inner Stack Trace -----
[xUnit.net 00:00:01.72]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/RateLimiting/RateLimiter.cs(43,0): at MarketDataCollector.Infrastructure.Providers.Backfill.RateLimiter.WaitForSlotAsync(CancellationToken ct)
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithinLimit_ReturnsImmediately [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.GetStatus_AfterRequests_ShowsCorrectCount [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.GetStatus_WithNoRequests_ReturnsZeroCount [< 1 ms]
  Failed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithPreCancelledToken_ThrowsImmediately [1 ms]
  Error Message:
   Assert.Throws() Failure: Exception type was not an exact match
Expected: typeof(System.OperationCanceledException)
Actual:   typeof(System.Threading.Tasks.TaskCanceledException)
---- System.Threading.Tasks.TaskCanceledException : A task was canceled.
  Stack Trace:
     at MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithPreCancelledToken_ThrowsImmediately() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/RateLimiterTests.cs:line 290
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at MarketDataCollector.Infrastructure.Providers.Backfill.RateLimiter.WaitForSlotAsync(CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/RateLimiting/RateLimiter.cs:line 43
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_AfterDelayElapsed_DoesNotWait [101 ms]
  Passed MarketDataCollector.Tests.PrometheusMetricsUpdaterTests.UpdateLoop_ShouldUpdateMetricsPeriodically [202 ms]
  Passed MarketDataCollector.Tests.PrometheusMetricsUpdaterTests.Constructor_ShouldInitialize [2 ms]
  Passed MarketDataCollector.Tests.Storage.ImportResultTests.CreateFailure_ShouldSetError [< 1 ms]
  Passed MarketDataCollector.Tests.Storage.ImportResultTests.CreateSuccess_ShouldSetProperties [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.SlaStatusSnapshotTests.SlaStatusSnapshot_ShouldContainAllMetrics [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_WithOptionalFieldsNull_CreatesPayload [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_WithZeroBidPrice_DoesNotCalculateSpreadOrMid [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.BboQuotePayload_IsImmutable [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_WithLargeSizes_HandlesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_WithWideSpread_CalculatesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_WithCrossedQuote_DoesNotCalculateSpreadOrMid [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_UsesProvidedSequenceNumber [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_WithLockedQuote_CalculatesZeroSpread [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.BboQuotePayload_Equality_WorksCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_WithPennySpread_CalculatesCorrectly [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_PreservesTimestamp [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_WithValidQuote_CreatesPayloadWithCalculatedSpread [< 1 ms]
  Passed MarketDataCollector.Tests.BboQuotePayloadTests.FromUpdate_WithZeroAskPrice_DoesNotCalculateSpreadOrMid [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.RecordRequest_CountsTowardLimit [101 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_ExceedsLimit_WaitsForWindowToExpire [101 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_AfterDisposal_ThrowsObjectDisposedException [< 1 ms]
[xUnit.net 00:00:02.08]     MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithCancellation_ThrowsOperationCanceledException [FAIL]
[xUnit.net 00:00:02.08]       Assert.Throws() Failure: Exception type was not an exact match
[xUnit.net 00:00:02.08]       Expected: typeof(System.OperationCanceledException)
[xUnit.net 00:00:02.08]       Actual:   typeof(System.Threading.Tasks.TaskCanceledException)
[xUnit.net 00:00:02.08]       ---- System.Threading.Tasks.TaskCanceledException : A task was canceled.
[xUnit.net 00:00:02.08]       Stack Trace:
[xUnit.net 00:00:02.08]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/RateLimiterTests.cs(277,0): at MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithCancellation_ThrowsOperationCanceledException()
[xUnit.net 00:00:02.08]         --- End of stack trace from previous location ---
[xUnit.net 00:00:02.08]         ----- Inner Stack Trace -----
[xUnit.net 00:00:02.08]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/RateLimiting/RateLimiter.cs(58,0): at MarketDataCollector.Infrastructure.Providers.Backfill.RateLimiter.WaitForSlotAsync(CancellationToken ct)
  Failed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithCancellation_ThrowsOperationCanceledException [52 ms]
  Error Message:
   Assert.Throws() Failure: Exception type was not an exact match
Expected: typeof(System.OperationCanceledException)
Actual:   typeof(System.Threading.Tasks.TaskCanceledException)
---- System.Threading.Tasks.TaskCanceledException : A task was canceled.
  Stack Trace:
     at MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_WithCancellation_ThrowsOperationCanceledException() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/RateLimiterTests.cs:line 277
--- End of stack trace from previous location ---
----- Inner Stack Trace -----
   at MarketDataCollector.Infrastructure.Providers.Backfill.RateLimiter.WaitForSlotAsync(CancellationToken ct) in /home/runner/work/Market-Data-Collector/Market-Data-Collector/src/MarketDataCollector/Infrastructure/Providers/Historical/RateLimiting/RateLimiter.cs:line 58
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_ConcurrentRequestsWithShortWindow_EnforcesLimit [202 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.Constructor_WithNegativeWindow_ThrowsArgumentOutOfRangeException [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.OnViolation_ShouldFireWhenViolationDetected [2 s]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.UnregisterSymbol_ShouldRemoveSymbolFromMonitoring [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.RecordEvent_ShouldUpdateLastEventTime [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.GetSnapshot_WithAllHealthy_ShouldHaveHighFreshnessScore [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.GetSnapshot_ShouldIncludeAllSymbolStatuses [< 1 ms]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.GetSymbolStatus_WithNoData_ShouldReturnNoDataState [< 1 ms]
  Passed MarketDataCollector.Tests.ExponentialBackoffTests.ExponentialBackoff_WithJitter_ShouldVaryDelays [2 s]
  Passed MarketDataCollector.Tests.Monitoring.DataQuality.DataFreshnessSlaMonitorTests.OnRecovery_ShouldFireWhenRecoveredFromViolation [2 s]
[xUnit.net 00:01:02.29]     MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_ConcurrentRequests_RespectLimit [FAIL]
[xUnit.net 00:01:02.29]       Expected requestsInWindow to be 10, but found 5 (difference of -5).
[xUnit.net 00:01:02.29]       Stack Trace:
[xUnit.net 00:01:02.29]            at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
[xUnit.net 00:01:02.29]            at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
[xUnit.net 00:01:02.29]            at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
[xUnit.net 00:01:02.29]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:01:02.29]            at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
[xUnit.net 00:01:02.29]            at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
[xUnit.net 00:01:02.29]            at FluentAssertions.Numeric.NumericAssertions`2.Be(T expected, String because, Object[] becauseArgs)
[xUnit.net 00:01:02.29]         /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/RateLimiterTests.cs(355,0): at MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_ConcurrentRequests_RespectLimit()
[xUnit.net 00:01:02.29]         --- End of stack trace from previous location ---
  Failed MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_ConcurrentRequests_RespectLimit [1 m]
  Error Message:
   Expected requestsInWindow to be 10, but found 5 (difference of -5).
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Numeric.NumericAssertions`2.Be(T expected, String because, Object[] becauseArgs)
   at MarketDataCollector.Tests.Backfill.RateLimiterTests.WaitForSlotAsync_ConcurrentRequests_RespectLimit() in /home/runner/work/Market-Data-Collector/Market-Data-Collector/tests/MarketDataCollector.Tests/Application/Backfill/RateLimiterTests.cs:line 355
--- End of stack trace from previous location ---
[xUnit.net 00:01:02.40]   Finished:    MarketDataCollector.Tests
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.Constructor_WithValidParameters_CreatesInstance [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.Constructor_WithZeroWindow_ThrowsArgumentOutOfRangeException [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.Dispose_CalledMultipleTimes_DoesNotThrow [< 1 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.GetStatus_AfterWindowExpires_CleansUpOldRequests [101 ms]
  Passed MarketDataCollector.Tests.Backfill.RateLimiterTests.RecordRequest_AfterDisposal_ThrowsObjectDisposedException [< 1 ms]

Test Run Failed.
Total tests: 956
     Passed: 832
     Failed: 124
 Total time: 1.0459 Minutes
