<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: ResiliencePatterns Pages: 1 -->
<svg width="3293pt" height="1042pt"
 viewBox="0.00 0.00 3293.00 1042.45" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(36 1006.45)">
<title>ResiliencePatterns</title>
<polygon fill="white" stroke="transparent" points="-36,36 -36,-1006.45 3257,-1006.45 3257,36 -36,36"/>
<text text-anchor="middle" x="1610.5" y="-956.85" font-family="Helvetica,sans-Serif" font-size="12.00">Market Data Collector &#45; Resilience Patterns</text>
<text text-anchor="middle" x="1610.5" y="-943.85" font-family="Helvetica,sans-Serif" font-size="12.00">Fault Tolerance &amp; Recovery Mechanisms | v1.6.1</text>
<g id="clust1" class="cluster">
<title>cluster_circuit_breaker</title>
<path fill="#fee2e2" stroke="#e53e3e" d="M20,-458C20,-458 569,-458 569,-458 575,-458 581,-464 581,-470 581,-470 581,-916.45 581,-916.45 581,-922.45 575,-928.45 569,-928.45 569,-928.45 20,-928.45 20,-928.45 14,-928.45 8,-922.45 8,-916.45 8,-916.45 8,-470 8,-470 8,-464 14,-458 20,-458"/>
<text text-anchor="middle" x="294.5" y="-914.85" font-family="Helvetica,sans-Serif" font-size="12.00">Circuit Breaker Pattern</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_cb_states</title>
<polygon fill="#fee2e2" stroke="#991b1b" stroke-dasharray="5,2" points="154,-466 154,-899.45 409,-899.45 409,-466 154,-466"/>
<text text-anchor="middle" x="281.5" y="-885.85" font-family="Helvetica,sans-Serif" font-size="12.00">States</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_retry</title>
<path fill="#ede9fe" stroke="#805ad5" d="M601,-8C601,-8 949,-8 949,-8 955,-8 961,-14 961,-20 961,-20 961,-737.48 961,-737.48 961,-743.48 955,-749.48 949,-749.48 949,-749.48 601,-749.48 601,-749.48 595,-749.48 589,-743.48 589,-737.48 589,-737.48 589,-20 589,-20 589,-14 595,-8 601,-8"/>
<text text-anchor="middle" x="775" y="-735.88" font-family="Helvetica,sans-Serif" font-size="12.00">Retry Pattern (WebSocketResiliencePolicy)</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_retry_strategy</title>
<polygon fill="#ede9fe" stroke="#6b21a8" stroke-dasharray="5,2" points="711,-16 711,-720.48 831,-720.48 831,-16 711,-16"/>
<text text-anchor="middle" x="771" y="-706.88" font-family="Helvetica,sans-Serif" font-size="12.00">Retry Strategy</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_failover</title>
<path fill="#d1fae5" stroke="#2c7a7b" d="M981,-201C981,-201 1463,-201 1463,-201 1469,-201 1475,-207 1475,-213 1475,-213 1475,-577.98 1475,-577.98 1475,-583.98 1469,-589.98 1463,-589.98 1463,-589.98 981,-589.98 981,-589.98 975,-589.98 969,-583.98 969,-577.98 969,-577.98 969,-213 969,-213 969,-207 975,-201 981,-201"/>
<text text-anchor="middle" x="1222" y="-576.38" font-family="Helvetica,sans-Serif" font-size="12.00">Provider Failover (AutomaticFailoverManager)</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_providers</title>
<polygon fill="#d1fae5" stroke="#047857" stroke-dasharray="5,2" points="1115,-209 1115,-560.98 1339,-560.98 1339,-209 1115,-209"/>
<text text-anchor="middle" x="1227" y="-547.38" font-family="Helvetica,sans-Serif" font-size="12.00">Provider Priority</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_hist_failover</title>
<path fill="#f0fff4" stroke="#38a169" d="M2455,-8C2455,-8 2815,-8 2815,-8 2821,-8 2827,-14 2827,-20 2827,-20 2827,-716.98 2827,-716.98 2827,-722.98 2821,-728.98 2815,-728.98 2815,-728.98 2455,-728.98 2455,-728.98 2449,-728.98 2443,-722.98 2443,-716.98 2443,-716.98 2443,-20 2443,-20 2443,-14 2449,-8 2455,-8"/>
<text text-anchor="middle" x="2635" y="-715.38" font-family="Helvetica,sans-Serif" font-size="12.00">Historical Provider Failover (CompositeHistoricalDataProvider)</text>
</g>
<g id="clust8" class="cluster">
<title>cluster_hist_priority</title>
<polygon fill="#f0fff4" stroke="#047857" stroke-dasharray="5,2" points="2474,-16 2474,-558.48 2634,-558.48 2634,-16 2474,-16"/>
<text text-anchor="middle" x="2554" y="-544.88" font-family="Helvetica,sans-Serif" font-size="12.00">Provider Chain</text>
</g>
<g id="clust9" class="cluster">
<title>cluster_rate_limit</title>
<path fill="#fffaf0" stroke="#ed8936" d="M2328,-787.48C2328,-787.48 3011,-787.48 3011,-787.48 3017,-787.48 3023,-793.48 3023,-799.48 3023,-799.48 3023,-896.98 3023,-896.98 3023,-902.98 3017,-908.98 3011,-908.98 3011,-908.98 2328,-908.98 2328,-908.98 2322,-908.98 2316,-902.98 2316,-896.98 2316,-896.98 2316,-799.48 2316,-799.48 2316,-793.48 2322,-787.48 2328,-787.48"/>
<text text-anchor="middle" x="2669.5" y="-895.38" font-family="Helvetica,sans-Serif" font-size="12.00">Rate Limiting</text>
</g>
<g id="clust10" class="cluster">
<title>cluster_limits</title>
<polygon fill="#fffaf0" stroke="#c05621" stroke-dasharray="5,2" points="2618,-806.98 2618,-879.98 3015,-879.98 3015,-806.98 2618,-806.98"/>
<text text-anchor="middle" x="2816.5" y="-866.38" font-family="Helvetica,sans-Serif" font-size="12.00">Provider Limits</text>
</g>
<g id="clust11" class="cluster">
<title>cluster_connection</title>
<path fill="#dbeafe" stroke="#2b6cb0" d="M1495,-8C1495,-8 1904,-8 1904,-8 1910,-8 1916,-14 1916,-20 1916,-20 1916,-411.5 1916,-411.5 1916,-417.5 1910,-423.5 1904,-423.5 1904,-423.5 1495,-423.5 1495,-423.5 1489,-423.5 1483,-417.5 1483,-411.5 1483,-411.5 1483,-20 1483,-20 1483,-14 1489,-8 1495,-8"/>
<text text-anchor="middle" x="1699.5" y="-409.9" font-family="Helvetica,sans-Serif" font-size="12.00">Connection Management (EnhancedIBConnectionManager)</text>
</g>
<g id="clust12" class="cluster">
<title>cluster_conn_states</title>
<polygon fill="#dbeafe" stroke="#1e40af" stroke-dasharray="5,2" points="1763,-16 1763,-394.5 1908,-394.5 1908,-16 1763,-16"/>
<text text-anchor="middle" x="1835.5" y="-380.9" font-family="Helvetica,sans-Serif" font-size="12.00">Connection States</text>
</g>
<g id="clust13" class="cluster">
<title>cluster_degradation</title>
<path fill="#f7fafc" stroke="#718096" d="M1936,-96C1936,-96 2423,-96 2423,-96 2429,-96 2435,-102 2435,-108 2435,-108 2435,-420 2435,-420 2435,-426 2429,-432 2423,-432 2423,-432 1936,-432 1936,-432 1930,-432 1924,-426 1924,-420 1924,-420 1924,-108 1924,-108 1924,-102 1930,-96 1936,-96"/>
<text text-anchor="middle" x="2179.5" y="-418.4" font-family="Helvetica,sans-Serif" font-size="12.00">Graceful Degradation</text>
</g>
<g id="clust14" class="cluster">
<title>cluster_degrade_modes</title>
<polygon fill="#f7fafc" stroke="#4a5568" stroke-dasharray="5,2" points="2254,-104 2254,-403 2427,-403 2427,-104 2254,-104"/>
<text text-anchor="middle" x="2340.5" y="-389.4" font-family="Helvetica,sans-Serif" font-size="12.00">Degradation Levels</text>
</g>
<g id="clust15" class="cluster">
<title>cluster_legend</title>
<path fill="#fafafa" stroke="#666666" d="M3043,-787.48C3043,-787.48 3201,-787.48 3201,-787.48 3207,-787.48 3213,-793.48 3213,-799.48 3213,-799.48 3213,-887.48 3213,-887.48 3213,-893.48 3207,-899.48 3201,-899.48 3201,-899.48 3043,-899.48 3043,-899.48 3037,-899.48 3031,-893.48 3031,-887.48 3031,-887.48 3031,-799.48 3031,-799.48 3031,-793.48 3037,-787.48 3043,-787.48"/>
<text text-anchor="middle" x="3122" y="-885.88" font-family="Helvetica,sans-Serif" font-size="12.00">Legend</text>
</g>
<!-- CB_IMPL -->
<g id="node1" class="node">
<title>CB_IMPL</title>
<path fill="#fc8181" stroke="black" d="M560.5,-859.48C560.5,-859.48 429.5,-859.48 429.5,-859.48 423.5,-859.48 417.5,-853.48 417.5,-847.48 417.5,-847.48 417.5,-818.48 417.5,-818.48 417.5,-812.48 423.5,-806.48 429.5,-806.48 429.5,-806.48 560.5,-806.48 560.5,-806.48 566.5,-806.48 572.5,-812.48 572.5,-818.48 572.5,-818.48 572.5,-847.48 572.5,-847.48 572.5,-853.48 566.5,-859.48 560.5,-859.48"/>
<text text-anchor="middle" x="495" y="-847.48" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">CircuitBreaker&lt;T&gt;</text>
<text text-anchor="middle" x="495" y="-824.48" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">Polly&#45;based implementation</text>
<text text-anchor="middle" x="495" y="-813.48" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">Per&#45;provider isolation</text>
</g>
<!-- RETRY_IMPL -->
<g id="node6" class="node">
<title>RETRY_IMPL</title>
<path fill="#c4b5fd" stroke="black" d="M940.5,-699.98C940.5,-699.98 851.5,-699.98 851.5,-699.98 845.5,-699.98 839.5,-693.98 839.5,-687.98 839.5,-687.98 839.5,-658.98 839.5,-658.98 839.5,-652.98 845.5,-646.98 851.5,-646.98 851.5,-646.98 940.5,-646.98 940.5,-646.98 946.5,-646.98 952.5,-652.98 952.5,-658.98 952.5,-658.98 952.5,-687.98 952.5,-687.98 952.5,-693.98 946.5,-699.98 940.5,-699.98"/>
<text text-anchor="middle" x="896" y="-687.98" font-family="Helvetica,sans-Serif" font-size="10.00">Polly Retry Policy</text>
<text text-anchor="middle" x="896" y="-664.98" font-family="Helvetica,sans-Serif" font-size="10.00">Exponential backoff</text>
<text text-anchor="middle" x="896" y="-653.98" font-family="Helvetica,sans-Serif" font-size="10.00">Jitter randomization</text>
</g>
<!-- CB_IMPL&#45;&gt;RETRY_IMPL -->
<g id="edge30" class="edge">
<title>CB_IMPL&#45;&gt;RETRY_IMPL</title>
<path fill="none" stroke="#4a5568" stroke-dasharray="5,2" d="M572.73,-827.27C645.45,-819.75 754.61,-800.21 835,-749.48 851.25,-739.22 865.17,-723.13 875.59,-708.48"/>
<polygon fill="#4a5568" stroke="#4a5568" points="878.58,-710.31 881.32,-700.07 872.8,-706.37 878.58,-710.31"/>
<text text-anchor="middle" x="833" y="-765.28" font-family="Helvetica,sans-Serif" font-size="9.00">wraps</text>
</g>
<!-- CB_CLOSED -->
<g id="node2" class="node">
<title>CB_CLOSED</title>
<ellipse fill="#9ae6b4" stroke="black" cx="288" cy="-832.98" rx="90.52" ry="37.45"/>
<text text-anchor="middle" x="288" y="-847.48" font-family="Helvetica,sans-Serif" font-size="10.00">CLOSED</text>
<text text-anchor="middle" x="288" y="-824.48" font-family="Helvetica,sans-Serif" font-size="10.00">Normal operation</text>
<text text-anchor="middle" x="288" y="-813.48" font-family="Helvetica,sans-Serif" font-size="10.00">Requests pass through</text>
</g>
<!-- CB_OPEN -->
<g id="node3" class="node">
<title>CB_OPEN</title>
<ellipse fill="#fc8181" stroke="black" cx="236" cy="-673.48" rx="73.58" ry="37.45"/>
<text text-anchor="middle" x="236" y="-687.98" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">OPEN</text>
<text text-anchor="middle" x="236" y="-664.98" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">Fast&#45;fail mode</text>
<text text-anchor="middle" x="236" y="-653.98" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">Requests rejected</text>
</g>
<!-- CB_CLOSED&#45;&gt;CB_OPEN -->
<g id="edge1" class="edge">
<title>CB_CLOSED&#45;&gt;CB_OPEN</title>
<path fill="none" stroke="#e53e3e" d="M275.94,-795.45C268.53,-773 258.98,-744.07 251.07,-720.12"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="254.36,-718.93 247.91,-710.54 247.72,-721.13 254.36,-718.93"/>
<text text-anchor="middle" x="300" y="-770.28" font-family="Helvetica,sans-Serif" font-size="9.00">failures &gt;= 5</text>
<text text-anchor="middle" x="300" y="-760.28" font-family="Helvetica,sans-Serif" font-size="9.00">in 30s</text>
</g>
<!-- CB_HALF -->
<g id="node4" class="node">
<title>CB_HALF</title>
<ellipse fill="#fbd38d" stroke="black" cx="302" cy="-511.48" rx="69.09" ry="37.45"/>
<text text-anchor="middle" x="302" y="-525.98" font-family="Helvetica,sans-Serif" font-size="10.00">HALF&#45;OPEN</text>
<text text-anchor="middle" x="302" y="-502.98" font-family="Helvetica,sans-Serif" font-size="10.00">Test mode</text>
<text text-anchor="middle" x="302" y="-491.98" font-family="Helvetica,sans-Serif" font-size="10.00">Limited requests</text>
</g>
<!-- CB_OPEN&#45;&gt;CB_HALF -->
<g id="edge2" class="edge">
<title>CB_OPEN&#45;&gt;CB_HALF</title>
<path fill="none" stroke="#ed8936" d="M231.95,-635.69C231.78,-623.41 232.91,-609.84 237,-597.98 242.58,-581.77 252.54,-566.18 263,-552.85"/>
<polygon fill="#ed8936" stroke="#ed8936" points="265.92,-554.81 269.55,-544.86 260.51,-550.38 265.92,-554.81"/>
<text text-anchor="middle" x="258.5" y="-610.78" font-family="Helvetica,sans-Serif" font-size="9.00">after 60s</text>
<text text-anchor="middle" x="258.5" y="-600.78" font-family="Helvetica,sans-Serif" font-size="9.00">cooldown</text>
</g>
<!-- CB_HALF&#45;&gt;CB_CLOSED -->
<g id="edge3" class="edge">
<title>CB_HALF&#45;&gt;CB_CLOSED</title>
<path fill="none" stroke="#38a169" d="M316.52,-548.4C335.34,-600.5 362.56,-699.35 334,-777.48 332.45,-781.71 330.41,-785.85 328.05,-789.82"/>
<polygon fill="#38a169" stroke="#38a169" points="325.07,-787.98 322.45,-798.25 330.9,-791.86 325.07,-787.98"/>
<text text-anchor="middle" x="374.5" y="-671.28" font-family="Helvetica,sans-Serif" font-size="9.00">3 successes</text>
</g>
<!-- CB_HALF&#45;&gt;CB_OPEN -->
<g id="edge4" class="edge">
<title>CB_HALF&#45;&gt;CB_OPEN</title>
<path fill="none" stroke="#e53e3e" d="M298.69,-548.99C295.75,-569.96 290.25,-596.33 280,-617.98 277.93,-622.35 275.44,-626.68 272.71,-630.87"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="269.7,-629.06 266.83,-639.26 275.44,-633.08 269.7,-629.06"/>
<text text-anchor="middle" x="306.5" y="-605.78" font-family="Helvetica,sans-Serif" font-size="9.00">1 failure</text>
</g>
<!-- CB_CONFIG -->
<g id="node5" class="node">
<title>CB_CONFIG</title>
<polygon fill="#fecaca" stroke="black" points="139.5,-870.48 16.5,-870.48 16.5,-795.48 145.5,-795.48 145.5,-864.48 139.5,-870.48"/>
<polyline fill="none" stroke="black" points="139.5,-870.48 139.5,-864.48 "/>
<polyline fill="none" stroke="black" points="145.5,-864.48 139.5,-864.48 "/>
<text text-anchor="middle" x="81" y="-858.48" font-family="Helvetica,sans-Serif" font-size="10.00">Configuration:</text>
<text text-anchor="middle" x="81" y="-835.48" font-family="Helvetica,sans-Serif" font-size="10.00">Failure threshold: 5</text>
<text text-anchor="middle" x="81" y="-824.48" font-family="Helvetica,sans-Serif" font-size="10.00">Sampling duration: 30s</text>
<text text-anchor="middle" x="81" y="-813.48" font-family="Helvetica,sans-Serif" font-size="10.00">Break duration: 60s</text>
<text text-anchor="middle" x="81" y="-802.48" font-family="Helvetica,sans-Serif" font-size="10.00">Success threshold: 3</text>
</g>
<!-- FAILOVER_IMPL -->
<g id="node14" class="node">
<title>FAILOVER_IMPL</title>
<path fill="#6ee7b7" stroke="black" d="M1454.5,-537.98C1454.5,-537.98 1359.5,-537.98 1359.5,-537.98 1353.5,-537.98 1347.5,-531.98 1347.5,-525.98 1347.5,-525.98 1347.5,-496.98 1347.5,-496.98 1347.5,-490.98 1353.5,-484.98 1359.5,-484.98 1359.5,-484.98 1454.5,-484.98 1454.5,-484.98 1460.5,-484.98 1466.5,-490.98 1466.5,-496.98 1466.5,-496.98 1466.5,-525.98 1466.5,-525.98 1466.5,-531.98 1460.5,-537.98 1454.5,-537.98"/>
<text text-anchor="middle" x="1407" y="-525.98" font-family="Helvetica,sans-Serif" font-size="10.00">Automatic Failover</text>
<text text-anchor="middle" x="1407" y="-502.98" font-family="Helvetica,sans-Serif" font-size="10.00">Health&#45;based routing</text>
<text text-anchor="middle" x="1407" y="-491.98" font-family="Helvetica,sans-Serif" font-size="10.00">Priority selection</text>
</g>
<!-- RETRY_IMPL&#45;&gt;FAILOVER_IMPL -->
<g id="edge31" class="edge">
<title>RETRY_IMPL&#45;&gt;FAILOVER_IMPL</title>
<path fill="none" stroke="#4a5568" stroke-dasharray="5,2" d="M952.78,-666.87C1057.77,-655.72 1277.52,-628.47 1343,-589.98 1360.77,-579.53 1375.77,-562.22 1386.77,-546.61"/>
<polygon fill="#4a5568" stroke="#4a5568" points="1389.77,-548.41 1392.46,-538.17 1383.97,-544.5 1389.77,-548.41"/>
<text text-anchor="middle" x="1368.5" y="-605.78" font-family="Helvetica,sans-Serif" font-size="9.00">triggers on exhaust</text>
</g>
<!-- RETRY_1 -->
<g id="node7" class="node">
<title>RETRY_1</title>
<path fill="#ddd6fe" stroke="black" d="M794,-691.48C794,-691.48 748,-691.48 748,-691.48 742,-691.48 736,-685.48 736,-679.48 736,-679.48 736,-667.48 736,-667.48 736,-661.48 742,-655.48 748,-655.48 748,-655.48 794,-655.48 794,-655.48 800,-655.48 806,-661.48 806,-667.48 806,-667.48 806,-679.48 806,-679.48 806,-685.48 800,-691.48 794,-691.48"/>
<text text-anchor="middle" x="771" y="-676.48" font-family="Helvetica,sans-Serif" font-size="10.00">Attempt 1</text>
<text text-anchor="middle" x="771" y="-665.48" font-family="Helvetica,sans-Serif" font-size="10.00">Immediate</text>
</g>
<!-- RETRY_2 -->
<g id="node8" class="node">
<title>RETRY_2</title>
<path fill="#ddd6fe" stroke="black" d="M808,-529.48C808,-529.48 734,-529.48 734,-529.48 728,-529.48 722,-523.48 722,-517.48 722,-517.48 722,-505.48 722,-505.48 722,-499.48 728,-493.48 734,-493.48 734,-493.48 808,-493.48 808,-493.48 814,-493.48 820,-499.48 820,-505.48 820,-505.48 820,-517.48 820,-517.48 820,-523.48 814,-529.48 808,-529.48"/>
<text text-anchor="middle" x="771" y="-514.48" font-family="Helvetica,sans-Serif" font-size="10.00">Attempt 2</text>
<text text-anchor="middle" x="771" y="-503.48" font-family="Helvetica,sans-Serif" font-size="10.00">Wait 2s (+ jitter)</text>
</g>
<!-- RETRY_1&#45;&gt;RETRY_2 -->
<g id="edge5" class="edge">
<title>RETRY_1&#45;&gt;RETRY_2</title>
<path fill="none" stroke="#4a5568" d="M771,-655.35C771,-627.83 771,-573.48 771,-540.33"/>
<polygon fill="#4a5568" stroke="#4a5568" points="774.5,-539.96 771,-529.96 767.5,-539.96 774.5,-539.96"/>
<text text-anchor="middle" x="777.5" y="-605.78" font-family="Helvetica,sans-Serif" font-size="9.00">fail</text>
</g>
<!-- RETRY_3 -->
<g id="node9" class="node">
<title>RETRY_3</title>
<path fill="#ddd6fe" stroke="black" d="M808,-365.5C808,-365.5 734,-365.5 734,-365.5 728,-365.5 722,-359.5 722,-353.5 722,-353.5 722,-341.5 722,-341.5 722,-335.5 728,-329.5 734,-329.5 734,-329.5 808,-329.5 808,-329.5 814,-329.5 820,-335.5 820,-341.5 820,-341.5 820,-353.5 820,-353.5 820,-359.5 814,-365.5 808,-365.5"/>
<text text-anchor="middle" x="771" y="-350.5" font-family="Helvetica,sans-Serif" font-size="10.00">Attempt 3</text>
<text text-anchor="middle" x="771" y="-339.5" font-family="Helvetica,sans-Serif" font-size="10.00">Wait 4s (+ jitter)</text>
</g>
<!-- RETRY_2&#45;&gt;RETRY_3 -->
<g id="edge6" class="edge">
<title>RETRY_2&#45;&gt;RETRY_3</title>
<path fill="none" stroke="#4a5568" d="M771,-493.45C771,-465.45 771,-409.45 771,-375.85"/>
<polygon fill="#4a5568" stroke="#4a5568" points="774.5,-375.79 771,-365.79 767.5,-375.79 774.5,-375.79"/>
<text text-anchor="middle" x="777.5" y="-442.8" font-family="Helvetica,sans-Serif" font-size="9.00">fail</text>
</g>
<!-- RETRY_4 -->
<g id="node10" class="node">
<title>RETRY_4</title>
<path fill="#ddd6fe" stroke="black" d="M808,-255.5C808,-255.5 734,-255.5 734,-255.5 728,-255.5 722,-249.5 722,-243.5 722,-243.5 722,-231.5 722,-231.5 722,-225.5 728,-219.5 734,-219.5 734,-219.5 808,-219.5 808,-219.5 814,-219.5 820,-225.5 820,-231.5 820,-231.5 820,-243.5 820,-243.5 820,-249.5 814,-255.5 808,-255.5"/>
<text text-anchor="middle" x="771" y="-240.5" font-family="Helvetica,sans-Serif" font-size="10.00">Attempt 4</text>
<text text-anchor="middle" x="771" y="-229.5" font-family="Helvetica,sans-Serif" font-size="10.00">Wait 8s (+ jitter)</text>
</g>
<!-- RETRY_3&#45;&gt;RETRY_4 -->
<g id="edge7" class="edge">
<title>RETRY_3&#45;&gt;RETRY_4</title>
<path fill="none" stroke="#4a5568" d="M771,-329.15C771,-312.06 771,-285.72 771,-265.82"/>
<polygon fill="#4a5568" stroke="#4a5568" points="774.5,-265.81 771,-255.81 767.5,-265.81 774.5,-265.81"/>
<text text-anchor="middle" x="777.5" y="-284.8" font-family="Helvetica,sans-Serif" font-size="9.00">fail</text>
</g>
<!-- RETRY_5 -->
<g id="node11" class="node">
<title>RETRY_5</title>
<path fill="#ddd6fe" stroke="black" d="M811,-156.5C811,-156.5 731,-156.5 731,-156.5 725,-156.5 719,-150.5 719,-144.5 719,-144.5 719,-132.5 719,-132.5 719,-126.5 725,-120.5 731,-120.5 731,-120.5 811,-120.5 811,-120.5 817,-120.5 823,-126.5 823,-132.5 823,-132.5 823,-144.5 823,-144.5 823,-150.5 817,-156.5 811,-156.5"/>
<text text-anchor="middle" x="771" y="-141.5" font-family="Helvetica,sans-Serif" font-size="10.00">Attempt 5</text>
<text text-anchor="middle" x="771" y="-130.5" font-family="Helvetica,sans-Serif" font-size="10.00">Wait 16s (+ jitter)</text>
</g>
<!-- RETRY_4&#45;&gt;RETRY_5 -->
<g id="edge8" class="edge">
<title>RETRY_4&#45;&gt;RETRY_5</title>
<path fill="none" stroke="#4a5568" d="M771,-219.16C771,-204.68 771,-183.76 771,-167"/>
<polygon fill="#4a5568" stroke="#4a5568" points="774.5,-166.69 771,-156.69 767.5,-166.69 774.5,-166.69"/>
<text text-anchor="middle" x="777.5" y="-185.8" font-family="Helvetica,sans-Serif" font-size="9.00">fail</text>
</g>
<!-- RETRY_FAIL -->
<g id="node12" class="node">
<title>RETRY_FAIL</title>
<path fill="#fecaca" stroke="black" d="M804,-60C804,-60 738,-60 738,-60 732,-60 726,-54 726,-48 726,-48 726,-36 726,-36 726,-30 732,-24 738,-24 738,-24 804,-24 804,-24 810,-24 816,-30 816,-36 816,-36 816,-48 816,-48 816,-54 810,-60 804,-60"/>
<text text-anchor="middle" x="771" y="-45" font-family="Helvetica,sans-Serif" font-size="10.00">Give Up</text>
<text text-anchor="middle" x="771" y="-34" font-family="Helvetica,sans-Serif" font-size="10.00">Trigger failover</text>
</g>
<!-- RETRY_5&#45;&gt;RETRY_FAIL -->
<g id="edge9" class="edge">
<title>RETRY_5&#45;&gt;RETRY_FAIL</title>
<path fill="none" stroke="#4a5568" d="M771,-120.17C771,-106.31 771,-86.63 771,-70.61"/>
<polygon fill="#4a5568" stroke="#4a5568" points="774.5,-70.22 771,-60.22 767.5,-70.22 774.5,-70.22"/>
<text text-anchor="middle" x="777.5" y="-80.8" font-family="Helvetica,sans-Serif" font-size="9.00">fail</text>
</g>
<!-- RETRY_CONFIG -->
<g id="node13" class="node">
<title>RETRY_CONFIG</title>
<polygon fill="#e9d5ff" stroke="black" points="697.5,-710.98 596.5,-710.98 596.5,-635.98 703.5,-635.98 703.5,-704.98 697.5,-710.98"/>
<polyline fill="none" stroke="black" points="697.5,-710.98 697.5,-704.98 "/>
<polyline fill="none" stroke="black" points="703.5,-704.98 697.5,-704.98 "/>
<text text-anchor="middle" x="650" y="-698.98" font-family="Helvetica,sans-Serif" font-size="10.00">Configuration:</text>
<text text-anchor="middle" x="650" y="-675.98" font-family="Helvetica,sans-Serif" font-size="10.00">Max retries: 5</text>
<text text-anchor="middle" x="650" y="-664.98" font-family="Helvetica,sans-Serif" font-size="10.00">Base delay: 2s</text>
<text text-anchor="middle" x="650" y="-653.98" font-family="Helvetica,sans-Serif" font-size="10.00">Max delay: 30s</text>
<text text-anchor="middle" x="650" y="-642.98" font-family="Helvetica,sans-Serif" font-size="10.00">Jitter: 0&#45;1s random</text>
</g>
<!-- CONN_IMPL -->
<g id="node32" class="node">
<title>CONN_IMPL</title>
<path fill="#93c5fd" stroke="black" d="M1743,-374C1743,-374 1645,-374 1645,-374 1639,-374 1633,-368 1633,-362 1633,-362 1633,-333 1633,-333 1633,-327 1639,-321 1645,-321 1645,-321 1743,-321 1743,-321 1749,-321 1755,-327 1755,-333 1755,-333 1755,-362 1755,-362 1755,-368 1749,-374 1743,-374"/>
<text text-anchor="middle" x="1694" y="-362" font-family="Helvetica,sans-Serif" font-size="10.00">Connection Manager</text>
<text text-anchor="middle" x="1694" y="-339" font-family="Helvetica,sans-Serif" font-size="10.00">State machine</text>
<text text-anchor="middle" x="1694" y="-328" font-family="Helvetica,sans-Serif" font-size="10.00">Heartbeat monitoring</text>
</g>
<!-- FAILOVER_IMPL&#45;&gt;CONN_IMPL -->
<g id="edge32" class="edge">
<title>FAILOVER_IMPL&#45;&gt;CONN_IMPL</title>
<path fill="none" stroke="#4a5568" stroke-dasharray="5,2" d="M1466.68,-497.9C1512.66,-486.18 1576.23,-465.4 1624,-432 1642.75,-418.89 1659.4,-399.54 1671.76,-382.76"/>
<polygon fill="#4a5568" stroke="#4a5568" points="1674.86,-384.45 1677.82,-374.27 1669.16,-380.38 1674.86,-384.45"/>
<text text-anchor="middle" x="1658" y="-442.8" font-family="Helvetica,sans-Serif" font-size="9.00">manages connections</text>
</g>
<!-- DEGRADE_IMPL -->
<g id="node38" class="node">
<title>DEGRADE_IMPL</title>
<path fill="#e2e8f0" stroke="black" d="M2234,-374C2234,-374 2126,-374 2126,-374 2120,-374 2114,-368 2114,-362 2114,-362 2114,-333 2114,-333 2114,-327 2120,-321 2126,-321 2126,-321 2234,-321 2234,-321 2240,-321 2246,-327 2246,-333 2246,-333 2246,-362 2246,-362 2246,-368 2240,-374 2234,-374"/>
<text text-anchor="middle" x="2180" y="-362" font-family="Helvetica,sans-Serif" font-size="10.00">Degradation Strategy</text>
<text text-anchor="middle" x="2180" y="-339" font-family="Helvetica,sans-Serif" font-size="10.00">Maintain partial service</text>
<text text-anchor="middle" x="2180" y="-328" font-family="Helvetica,sans-Serif" font-size="10.00">Prioritize critical data</text>
</g>
<!-- FAILOVER_IMPL&#45;&gt;DEGRADE_IMPL -->
<g id="edge34" class="edge">
<title>FAILOVER_IMPL&#45;&gt;DEGRADE_IMPL</title>
<path fill="none" stroke="#4a5568" stroke-dasharray="5,2" d="M1466.65,-509.16C1614.52,-505.06 1994.07,-489.11 2105,-432 2126.74,-420.81 2145.18,-400.53 2158.34,-382.76"/>
<polygon fill="#4a5568" stroke="#4a5568" points="2161.42,-384.47 2164.37,-374.29 2155.72,-380.41 2161.42,-384.47"/>
<text text-anchor="middle" x="2119" y="-442.8" font-family="Helvetica,sans-Serif" font-size="9.00">updates mode</text>
</g>
<!-- P_PRIMARY -->
<g id="node15" class="node">
<title>P_PRIMARY</title>
<path fill="#9ae6b4" stroke="black" d="M1258,-531.98C1258,-531.98 1176,-531.98 1176,-531.98 1170,-531.98 1164,-525.98 1164,-519.98 1164,-519.98 1164,-502.98 1164,-502.98 1164,-496.98 1170,-490.98 1176,-490.98 1176,-490.98 1258,-490.98 1258,-490.98 1264,-490.98 1270,-496.98 1270,-502.98 1270,-502.98 1270,-519.98 1270,-519.98 1270,-525.98 1264,-531.98 1258,-531.98"/>
<text text-anchor="middle" x="1217" y="-519.98" font-family="Helvetica,sans-Serif" font-size="10.00">Primary: IB/Alpaca</text>
<text text-anchor="middle" x="1217" y="-508.98" font-family="Helvetica,sans-Serif" font-size="10.00">Priority: 1</text>
<text text-anchor="middle" x="1217" y="-497.98" font-family="Helvetica,sans-Serif" font-size="10.00">Status: Active</text>
</g>
<!-- P_SECONDARY -->
<g id="node16" class="node">
<title>P_SECONDARY</title>
<path fill="#a7f3d0" stroke="black" d="M1209,-368C1209,-368 1135,-368 1135,-368 1129,-368 1123,-362 1123,-356 1123,-356 1123,-339 1123,-339 1123,-333 1129,-327 1135,-327 1135,-327 1209,-327 1209,-327 1215,-327 1221,-333 1221,-339 1221,-339 1221,-356 1221,-356 1221,-362 1215,-368 1209,-368"/>
<text text-anchor="middle" x="1172" y="-356" font-family="Helvetica,sans-Serif" font-size="10.00">Secondary: NYSE</text>
<text text-anchor="middle" x="1172" y="-345" font-family="Helvetica,sans-Serif" font-size="10.00">Priority: 2</text>
<text text-anchor="middle" x="1172" y="-334" font-family="Helvetica,sans-Serif" font-size="10.00">Status: Standby</text>
</g>
<!-- P_PRIMARY&#45;&gt;P_SECONDARY -->
<g id="edge10" class="edge">
<title>P_PRIMARY&#45;&gt;P_SECONDARY</title>
<path fill="none" stroke="#e53e3e" stroke-dasharray="5,2" d="M1211.57,-490.94C1203.77,-462.85 1189.31,-410.82 1180.2,-378.03"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="1183.5,-376.81 1177.45,-368.11 1176.75,-378.68 1183.5,-376.81"/>
<text text-anchor="middle" x="1215.5" y="-442.8" font-family="Helvetica,sans-Serif" font-size="9.00">failover</text>
</g>
<!-- P_TERTIARY -->
<g id="node17" class="node">
<title>P_TERTIARY</title>
<path fill="#bbf7d0" stroke="black" d="M1262.5,-258C1262.5,-258 1173.5,-258 1173.5,-258 1167.5,-258 1161.5,-252 1161.5,-246 1161.5,-246 1161.5,-229 1161.5,-229 1161.5,-223 1167.5,-217 1173.5,-217 1173.5,-217 1262.5,-217 1262.5,-217 1268.5,-217 1274.5,-223 1274.5,-229 1274.5,-229 1274.5,-246 1274.5,-246 1274.5,-252 1268.5,-258 1262.5,-258"/>
<text text-anchor="middle" x="1218" y="-246" font-family="Helvetica,sans-Serif" font-size="10.00">Tertiary: StockSharp</text>
<text text-anchor="middle" x="1218" y="-235" font-family="Helvetica,sans-Serif" font-size="10.00">Priority: 3</text>
<text text-anchor="middle" x="1218" y="-224" font-family="Helvetica,sans-Serif" font-size="10.00">Status: Standby</text>
</g>
<!-- P_SECONDARY&#45;&gt;P_TERTIARY -->
<g id="edge11" class="edge">
<title>P_SECONDARY&#45;&gt;P_TERTIARY</title>
<path fill="none" stroke="#e53e3e" stroke-dasharray="5,2" d="M1180.33,-326.94C1187.39,-310.38 1197.6,-286.39 1205.61,-267.58"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="1208.88,-268.85 1209.58,-258.28 1202.44,-266.11 1208.88,-268.85"/>
<text text-anchor="middle" x="1215.5" y="-284.8" font-family="Helvetica,sans-Serif" font-size="9.00">failover</text>
</g>
<!-- P_TERTIARY&#45;&gt;P_PRIMARY -->
<g id="edge12" class="edge">
<title>P_TERTIARY&#45;&gt;P_PRIMARY</title>
<path fill="none" stroke="#38a169" stroke-dasharray="5,2" d="M1228.13,-258.34C1231.31,-265.59 1234.41,-273.98 1236,-282 1250.55,-355.23 1247.32,-376.2 1236,-450 1234.4,-460.41 1231.34,-471.5 1228.14,-481.29"/>
<polygon fill="#38a169" stroke="#38a169" points="1224.76,-480.36 1224.8,-490.95 1231.37,-482.64 1224.76,-480.36"/>
<text text-anchor="middle" x="1282" y="-350.3" font-family="Helvetica,sans-Serif" font-size="9.00">recovery</text>
<text text-anchor="middle" x="1282" y="-340.3" font-family="Helvetica,sans-Serif" font-size="9.00">(periodic check)</text>
</g>
<!-- FAILOVER_EVENTS -->
<g id="node18" class="node">
<title>FAILOVER_EVENTS</title>
<polygon fill="#c6f6d5" stroke="black" points="1100.5,-548.98 977.5,-548.98 977.5,-473.98 1106.5,-473.98 1106.5,-542.98 1100.5,-548.98"/>
<polyline fill="none" stroke="black" points="1100.5,-548.98 1100.5,-542.98 "/>
<polyline fill="none" stroke="black" points="1106.5,-542.98 1100.5,-542.98 "/>
<text text-anchor="middle" x="1042" y="-536.98" font-family="Helvetica,sans-Serif" font-size="10.00">Failover Triggers:</text>
<text text-anchor="middle" x="1042" y="-513.98" font-family="Helvetica,sans-Serif" font-size="10.00">• Circuit breaker opens</text>
<text text-anchor="middle" x="1042" y="-502.98" font-family="Helvetica,sans-Serif" font-size="10.00">• Connection timeout</text>
<text text-anchor="middle" x="1042" y="-491.98" font-family="Helvetica,sans-Serif" font-size="10.00">• Rate limit exceeded</text>
<text text-anchor="middle" x="1042" y="-480.98" font-family="Helvetica,sans-Serif" font-size="10.00">• Provider error</text>
</g>
<!-- HIST_COMPOSITE -->
<g id="node19" class="node">
<title>HIST_COMPOSITE</title>
<path fill="#68d391" stroke="black" d="M2597,-699.98C2597,-699.98 2489,-699.98 2489,-699.98 2483,-699.98 2477,-693.98 2477,-687.98 2477,-687.98 2477,-658.98 2477,-658.98 2477,-652.98 2483,-646.98 2489,-646.98 2489,-646.98 2597,-646.98 2597,-646.98 2603,-646.98 2609,-652.98 2609,-658.98 2609,-658.98 2609,-687.98 2609,-687.98 2609,-693.98 2603,-699.98 2597,-699.98"/>
<text text-anchor="middle" x="2543" y="-687.98" font-family="Helvetica,sans-Serif" font-size="10.00">Composite Provider</text>
<text text-anchor="middle" x="2543" y="-664.98" font-family="Helvetica,sans-Serif" font-size="10.00">Priority&#45;based selection</text>
<text text-anchor="middle" x="2543" y="-653.98" font-family="Helvetica,sans-Serif" font-size="10.00">Automatic rotation</text>
</g>
<!-- H1 -->
<g id="node20" class="node">
<title>H1</title>
<path fill="#9ae6b4" stroke="black" d="M2529.5,-529.48C2529.5,-529.48 2494.5,-529.48 2494.5,-529.48 2488.5,-529.48 2482.5,-523.48 2482.5,-517.48 2482.5,-517.48 2482.5,-505.48 2482.5,-505.48 2482.5,-499.48 2488.5,-493.48 2494.5,-493.48 2494.5,-493.48 2529.5,-493.48 2529.5,-493.48 2535.5,-493.48 2541.5,-499.48 2541.5,-505.48 2541.5,-505.48 2541.5,-517.48 2541.5,-517.48 2541.5,-523.48 2535.5,-529.48 2529.5,-529.48"/>
<text text-anchor="middle" x="2512" y="-508.98" font-family="Helvetica,sans-Serif" font-size="10.00">NYSE (5)</text>
</g>
<!-- HIST_COMPOSITE&#45;&gt;H1 -->
<g id="edge13" class="edge">
<title>HIST_COMPOSITE&#45;&gt;H1</title>
<path fill="none" stroke="#4a5568" d="M2538.02,-646.77C2532.35,-617.5 2523.12,-569.88 2517.32,-539.91"/>
<polygon fill="#4a5568" stroke="#4a5568" points="2520.68,-538.89 2515.34,-529.74 2513.81,-540.22 2520.68,-538.89"/>
</g>
<!-- H2 -->
<g id="node21" class="node">
<title>H2</title>
<path fill="#9ae6b4" stroke="black" d="M2614,-529.48C2614,-529.48 2572,-529.48 2572,-529.48 2566,-529.48 2560,-523.48 2560,-517.48 2560,-517.48 2560,-505.48 2560,-505.48 2560,-499.48 2566,-493.48 2572,-493.48 2572,-493.48 2614,-493.48 2614,-493.48 2620,-493.48 2626,-499.48 2626,-505.48 2626,-505.48 2626,-517.48 2626,-517.48 2626,-523.48 2620,-529.48 2614,-529.48"/>
<text text-anchor="middle" x="2593" y="-508.98" font-family="Helvetica,sans-Serif" font-size="10.00">Alpaca (5)</text>
</g>
<!-- HIST_COMPOSITE&#45;&gt;H2 -->
<g id="edge14" class="edge">
<title>HIST_COMPOSITE&#45;&gt;H2</title>
<path fill="none" stroke="#4a5568" d="M2551.03,-646.77C2560.22,-617.37 2575.19,-569.46 2584.55,-539.52"/>
<polygon fill="#4a5568" stroke="#4a5568" points="2587.96,-540.33 2587.61,-529.74 2581.28,-538.24 2587.96,-540.33"/>
</g>
<!-- H3 -->
<g id="node22" class="node">
<title>H3</title>
<path fill="#a7f3d0" stroke="black" d="M2573,-365.5C2573,-365.5 2529,-365.5 2529,-365.5 2523,-365.5 2517,-359.5 2517,-353.5 2517,-353.5 2517,-341.5 2517,-341.5 2517,-335.5 2523,-329.5 2529,-329.5 2529,-329.5 2573,-329.5 2573,-329.5 2579,-329.5 2585,-335.5 2585,-341.5 2585,-341.5 2585,-353.5 2585,-353.5 2585,-359.5 2579,-365.5 2573,-365.5"/>
<text text-anchor="middle" x="2551" y="-345" font-family="Helvetica,sans-Serif" font-size="10.00">Yahoo (10)</text>
</g>
<!-- H1&#45;&gt;H3 -->
<g id="edge15" class="edge">
<title>H1&#45;&gt;H3</title>
<path fill="none" stroke="#e53e3e" stroke-dasharray="5,2" d="M2511.15,-493.19C2510.82,-478.8 2511.22,-457.85 2515,-440 2519.83,-417.17 2529.77,-392.64 2537.98,-374.72"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="2541.23,-376.05 2542.32,-365.51 2534.89,-373.06 2541.23,-376.05"/>
<text text-anchor="middle" x="2537" y="-442.8" font-family="Helvetica,sans-Serif" font-size="9.00">if fail/limit</text>
</g>
<!-- H2&#45;&gt;H3 -->
<g id="edge16" class="edge">
<title>H2&#45;&gt;H3</title>
<path fill="none" stroke="#e53e3e" stroke-dasharray="5,2" d="M2588.58,-493.45C2581.32,-465.45 2566.81,-409.45 2558.09,-375.85"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="2561.38,-374.59 2555.48,-365.79 2554.6,-376.35 2561.38,-374.59"/>
<text text-anchor="middle" x="2598" y="-442.8" font-family="Helvetica,sans-Serif" font-size="9.00">if fail/limit</text>
</g>
<!-- H4 -->
<g id="node23" class="node">
<title>H4</title>
<path fill="#a7f3d0" stroke="black" d="M2578,-255.5C2578,-255.5 2524,-255.5 2524,-255.5 2518,-255.5 2512,-249.5 2512,-243.5 2512,-243.5 2512,-231.5 2512,-231.5 2512,-225.5 2518,-219.5 2524,-219.5 2524,-219.5 2578,-219.5 2578,-219.5 2584,-219.5 2590,-225.5 2590,-231.5 2590,-231.5 2590,-243.5 2590,-243.5 2590,-249.5 2584,-255.5 2578,-255.5"/>
<text text-anchor="middle" x="2551" y="-235" font-family="Helvetica,sans-Serif" font-size="10.00">Polygon (15)</text>
</g>
<!-- H3&#45;&gt;H4 -->
<g id="edge17" class="edge">
<title>H3&#45;&gt;H4</title>
<path fill="none" stroke="#e53e3e" stroke-dasharray="5,2" d="M2551,-329.15C2551,-312.06 2551,-285.72 2551,-265.82"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="2554.5,-265.81 2551,-255.81 2547.5,-265.81 2554.5,-265.81"/>
<text text-anchor="middle" x="2573" y="-284.8" font-family="Helvetica,sans-Serif" font-size="9.00">if fail/limit</text>
</g>
<!-- H5 -->
<g id="node24" class="node">
<title>H5</title>
<path fill="#bbf7d0" stroke="black" d="M2572.5,-156.5C2572.5,-156.5 2529.5,-156.5 2529.5,-156.5 2523.5,-156.5 2517.5,-150.5 2517.5,-144.5 2517.5,-144.5 2517.5,-132.5 2517.5,-132.5 2517.5,-126.5 2523.5,-120.5 2529.5,-120.5 2529.5,-120.5 2572.5,-120.5 2572.5,-120.5 2578.5,-120.5 2584.5,-126.5 2584.5,-132.5 2584.5,-132.5 2584.5,-144.5 2584.5,-144.5 2584.5,-150.5 2578.5,-156.5 2572.5,-156.5"/>
<text text-anchor="middle" x="2551" y="-136" font-family="Helvetica,sans-Serif" font-size="10.00">Stooq (20)</text>
</g>
<!-- H4&#45;&gt;H5 -->
<g id="edge18" class="edge">
<title>H4&#45;&gt;H5</title>
<path fill="none" stroke="#e53e3e" stroke-dasharray="5,2" d="M2551,-219.16C2551,-204.68 2551,-183.76 2551,-167"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="2554.5,-166.69 2551,-156.69 2547.5,-166.69 2554.5,-166.69"/>
<text text-anchor="middle" x="2573" y="-185.8" font-family="Helvetica,sans-Serif" font-size="9.00">if fail/limit</text>
</g>
<!-- H6 -->
<g id="node25" class="node">
<title>H6</title>
<path fill="#bbf7d0" stroke="black" d="M2579,-60C2579,-60 2523,-60 2523,-60 2517,-60 2511,-54 2511,-48 2511,-48 2511,-36 2511,-36 2511,-30 2517,-24 2523,-24 2523,-24 2579,-24 2579,-24 2585,-24 2591,-30 2591,-36 2591,-36 2591,-48 2591,-48 2591,-54 2585,-60 2579,-60"/>
<text text-anchor="middle" x="2551" y="-39.5" font-family="Helvetica,sans-Serif" font-size="10.00">Others (25+)</text>
</g>
<!-- H5&#45;&gt;H6 -->
<g id="edge19" class="edge">
<title>H5&#45;&gt;H6</title>
<path fill="none" stroke="#e53e3e" stroke-dasharray="5,2" d="M2551,-120.17C2551,-106.31 2551,-86.63 2551,-70.61"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="2554.5,-70.22 2551,-60.22 2547.5,-70.22 2554.5,-70.22"/>
<text text-anchor="middle" x="2573" y="-80.8" font-family="Helvetica,sans-Serif" font-size="9.00">if fail/limit</text>
</g>
<!-- RATE_IMPL -->
<g id="node26" class="node">
<title>RATE_IMPL</title>
<path fill="#fbd38d" stroke="black" d="M2596,-859.48C2596,-859.48 2490,-859.48 2490,-859.48 2484,-859.48 2478,-853.48 2478,-847.48 2478,-847.48 2478,-818.48 2478,-818.48 2478,-812.48 2484,-806.48 2490,-806.48 2490,-806.48 2596,-806.48 2596,-806.48 2602,-806.48 2608,-812.48 2608,-818.48 2608,-818.48 2608,-847.48 2608,-847.48 2608,-853.48 2602,-859.48 2596,-859.48"/>
<text text-anchor="middle" x="2543" y="-847.48" font-family="Helvetica,sans-Serif" font-size="10.00">RateLimiter</text>
<text text-anchor="middle" x="2543" y="-824.48" font-family="Helvetica,sans-Serif" font-size="10.00">Token bucket algorithm</text>
<text text-anchor="middle" x="2543" y="-813.48" font-family="Helvetica,sans-Serif" font-size="10.00">Per&#45;provider limits</text>
</g>
<!-- RATE_IMPL&#45;&gt;HIST_COMPOSITE -->
<g id="edge33" class="edge">
<title>RATE_IMPL&#45;&gt;HIST_COMPOSITE</title>
<path fill="none" stroke="#4a5568" stroke-dasharray="5,2" d="M2543,-806.32C2543,-780.24 2543,-739.6 2543,-710.34"/>
<polygon fill="#4a5568" stroke="#4a5568" points="2546.5,-710.12 2543,-700.12 2539.5,-710.12 2546.5,-710.12"/>
<text text-anchor="middle" x="2576" y="-765.28" font-family="Helvetica,sans-Serif" font-size="9.00">enforces limits</text>
</g>
<!-- RL_ALPACA -->
<g id="node27" class="node">
<title>RL_ALPACA</title>
<path fill="#feebc8" stroke="black" d="M2995.5,-850.98C2995.5,-850.98 2944.5,-850.98 2944.5,-850.98 2938.5,-850.98 2932.5,-844.98 2932.5,-838.98 2932.5,-838.98 2932.5,-826.98 2932.5,-826.98 2932.5,-820.98 2938.5,-814.98 2944.5,-814.98 2944.5,-814.98 2995.5,-814.98 2995.5,-814.98 3001.5,-814.98 3007.5,-820.98 3007.5,-826.98 3007.5,-826.98 3007.5,-838.98 3007.5,-838.98 3007.5,-844.98 3001.5,-850.98 2995.5,-850.98"/>
<text text-anchor="middle" x="2970" y="-835.98" font-family="Helvetica,sans-Serif" font-size="10.00">Alpaca</text>
<text text-anchor="middle" x="2970" y="-824.98" font-family="Helvetica,sans-Serif" font-size="10.00">200 req/min</text>
</g>
<!-- RL_YAHOO -->
<g id="node28" class="node">
<title>RL_YAHOO</title>
<path fill="#feebc8" stroke="black" d="M2902,-850.98C2902,-850.98 2840,-850.98 2840,-850.98 2834,-850.98 2828,-844.98 2828,-838.98 2828,-838.98 2828,-826.98 2828,-826.98 2828,-820.98 2834,-814.98 2840,-814.98 2840,-814.98 2902,-814.98 2902,-814.98 2908,-814.98 2914,-820.98 2914,-826.98 2914,-826.98 2914,-838.98 2914,-838.98 2914,-844.98 2908,-850.98 2902,-850.98"/>
<text text-anchor="middle" x="2871" y="-835.98" font-family="Helvetica,sans-Serif" font-size="10.00">Yahoo Finance</text>
<text text-anchor="middle" x="2871" y="-824.98" font-family="Helvetica,sans-Serif" font-size="10.00">100 req/min</text>
</g>
<!-- RL_POLYGON -->
<g id="node29" class="node">
<title>RL_POLYGON</title>
<path fill="#feebc8" stroke="black" d="M2797.5,-850.98C2797.5,-850.98 2728.5,-850.98 2728.5,-850.98 2722.5,-850.98 2716.5,-844.98 2716.5,-838.98 2716.5,-838.98 2716.5,-826.98 2716.5,-826.98 2716.5,-820.98 2722.5,-814.98 2728.5,-814.98 2728.5,-814.98 2797.5,-814.98 2797.5,-814.98 2803.5,-814.98 2809.5,-820.98 2809.5,-826.98 2809.5,-826.98 2809.5,-838.98 2809.5,-838.98 2809.5,-844.98 2803.5,-850.98 2797.5,-850.98"/>
<text text-anchor="middle" x="2763" y="-835.98" font-family="Helvetica,sans-Serif" font-size="10.00">Polygon</text>
<text text-anchor="middle" x="2763" y="-824.98" font-family="Helvetica,sans-Serif" font-size="10.00">5 req/min (free)</text>
</g>
<!-- RL_TIINGO -->
<g id="node30" class="node">
<title>RL_TIINGO</title>
<path fill="#feebc8" stroke="black" d="M2686,-850.98C2686,-850.98 2638,-850.98 2638,-850.98 2632,-850.98 2626,-844.98 2626,-838.98 2626,-838.98 2626,-826.98 2626,-826.98 2626,-820.98 2632,-814.98 2638,-814.98 2638,-814.98 2686,-814.98 2686,-814.98 2692,-814.98 2698,-820.98 2698,-826.98 2698,-826.98 2698,-838.98 2698,-838.98 2698,-844.98 2692,-850.98 2686,-850.98"/>
<text text-anchor="middle" x="2662" y="-835.98" font-family="Helvetica,sans-Serif" font-size="10.00">Tiingo</text>
<text text-anchor="middle" x="2662" y="-824.98" font-family="Helvetica,sans-Serif" font-size="10.00">50 req/hour</text>
</g>
<!-- RATE_BEHAVIOR -->
<g id="node31" class="node">
<title>RATE_BEHAVIOR</title>
<polygon fill="#fed7aa" stroke="black" points="2453.5,-870.48 2324.5,-870.48 2324.5,-795.48 2459.5,-795.48 2459.5,-864.48 2453.5,-870.48"/>
<polyline fill="none" stroke="black" points="2453.5,-870.48 2453.5,-864.48 "/>
<polyline fill="none" stroke="black" points="2459.5,-864.48 2453.5,-864.48 "/>
<text text-anchor="middle" x="2392" y="-858.48" font-family="Helvetica,sans-Serif" font-size="10.00">Behavior on Limit:</text>
<text text-anchor="middle" x="2392" y="-835.48" font-family="Helvetica,sans-Serif" font-size="10.00">• Queue request</text>
<text text-anchor="middle" x="2392" y="-824.48" font-family="Helvetica,sans-Serif" font-size="10.00">• Wait for token</text>
<text text-anchor="middle" x="2392" y="-813.48" font-family="Helvetica,sans-Serif" font-size="10.00">• Switch provider</text>
<text text-anchor="middle" x="2392" y="-802.48" font-family="Helvetica,sans-Serif" font-size="10.00">• Reject if all exhausted</text>
</g>
<!-- CONN_DISC -->
<g id="node33" class="node">
<title>CONN_DISC</title>
<ellipse fill="#fecaca" stroke="black" cx="1844" cy="-347.5" rx="55.85" ry="18"/>
<text text-anchor="middle" x="1844" y="-345" font-family="Helvetica,sans-Serif" font-size="10.00">DISCONNECTED</text>
</g>
<!-- CONN_ING -->
<g id="node34" class="node">
<title>CONN_ING</title>
<ellipse fill="#fbd38d" stroke="black" cx="1820" cy="-237.5" rx="48.72" ry="18"/>
<text text-anchor="middle" x="1820" y="-235" font-family="Helvetica,sans-Serif" font-size="10.00">CONNECTING</text>
</g>
<!-- CONN_DISC&#45;&gt;CONN_ING -->
<g id="edge20" class="edge">
<title>CONN_DISC&#45;&gt;CONN_ING</title>
<path fill="none" stroke="#2b6cb0" d="M1821.59,-330.85C1809.78,-321.18 1796.44,-307.64 1790,-292 1785.84,-281.9 1789.84,-271.3 1796.11,-262.23"/>
<polygon fill="#2b6cb0" stroke="#2b6cb0" points="1798.87,-264.38 1802.35,-254.38 1793.39,-260.03 1798.87,-264.38"/>
<text text-anchor="middle" x="1812.5" y="-284.8" font-family="Helvetica,sans-Serif" font-size="9.00">connect()</text>
</g>
<!-- CONN_ING&#45;&gt;CONN_DISC -->
<g id="edge22" class="edge">
<title>CONN_ING&#45;&gt;CONN_DISC</title>
<path fill="none" stroke="#e53e3e" d="M1826.77,-255.63C1829.67,-263.55 1832.88,-273.14 1835,-282 1837.91,-294.12 1839.98,-307.77 1841.4,-319.37"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="1837.92,-319.81 1842.52,-329.36 1844.88,-319.03 1837.92,-319.81"/>
<text text-anchor="middle" x="1854" y="-284.8" font-family="Helvetica,sans-Serif" font-size="9.00">timeout</text>
</g>
<!-- CONN_ED -->
<g id="node35" class="node">
<title>CONN_ED</title>
<ellipse fill="#9ae6b4" stroke="black" cx="1817" cy="-138.5" rx="45.83" ry="18"/>
<text text-anchor="middle" x="1817" y="-136" font-family="Helvetica,sans-Serif" font-size="10.00">CONNECTED</text>
</g>
<!-- CONN_ING&#45;&gt;CONN_ED -->
<g id="edge21" class="edge">
<title>CONN_ING&#45;&gt;CONN_ED</title>
<path fill="none" stroke="#38a169" d="M1805.1,-220.01C1799.18,-212.36 1793.05,-202.81 1790,-193 1786.94,-183.17 1790.28,-172.94 1795.54,-164.09"/>
<polygon fill="#38a169" stroke="#38a169" points="1798.48,-165.99 1801.26,-155.77 1792.71,-162.02 1798.48,-165.99"/>
<text text-anchor="middle" x="1808" y="-185.8" font-family="Helvetica,sans-Serif" font-size="9.00">success</text>
</g>
<!-- CONN_RECON -->
<g id="node36" class="node">
<title>CONN_RECON</title>
<ellipse fill="#93c5fd" stroke="black" cx="1838" cy="-42" rx="55.85" ry="18"/>
<text text-anchor="middle" x="1838" y="-39.5" font-family="Helvetica,sans-Serif" font-size="10.00">RECONNECTING</text>
</g>
<!-- CONN_ED&#45;&gt;CONN_RECON -->
<g id="edge23" class="edge">
<title>CONN_ED&#45;&gt;CONN_RECON</title>
<path fill="none" stroke="#ed8936" d="M1806.24,-120.92C1799.77,-108.75 1793.87,-91.97 1800,-78 1801.87,-73.73 1804.56,-69.74 1807.64,-66.11"/>
<polygon fill="#ed8936" stroke="#ed8936" points="1810.37,-68.33 1814.88,-58.74 1805.37,-63.42 1810.37,-68.33"/>
<text text-anchor="middle" x="1808" y="-80.8" font-family="Helvetica,sans-Serif" font-size="9.00">lost</text>
</g>
<!-- CONN_RECON&#45;&gt;CONN_DISC -->
<g id="edge25" class="edge">
<title>CONN_RECON&#45;&gt;CONN_DISC</title>
<path fill="none" stroke="#e53e3e" d="M1857.54,-59C1862.85,-64.44 1867.96,-70.94 1871,-78 1903.7,-153.99 1880.95,-181.33 1878,-264 1877.56,-276.47 1879.7,-280.09 1876,-292 1872.86,-302.11 1867.54,-312.34 1862.13,-321.17"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="1859.05,-319.49 1856.55,-329.79 1864.92,-323.3 1859.05,-319.49"/>
<text text-anchor="middle" x="1912" y="-185.8" font-family="Helvetica,sans-Serif" font-size="9.00">max retries</text>
</g>
<!-- CONN_RECON&#45;&gt;CONN_ED -->
<g id="edge24" class="edge">
<title>CONN_RECON&#45;&gt;CONN_ED</title>
<path fill="none" stroke="#38a169" d="M1834.17,-60.22C1831.07,-74.18 1826.64,-94.1 1823.06,-110.22"/>
<polygon fill="#38a169" stroke="#38a169" points="1819.6,-109.65 1820.85,-120.17 1826.44,-111.16 1819.6,-109.65"/>
<text text-anchor="middle" x="1848" y="-80.8" font-family="Helvetica,sans-Serif" font-size="9.00">restored</text>
</g>
<!-- CONN_CONFIG -->
<g id="node37" class="node">
<title>CONN_CONFIG</title>
<polygon fill="#bfdbfe" stroke="black" points="1608.5,-385 1491.5,-385 1491.5,-310 1614.5,-310 1614.5,-379 1608.5,-385"/>
<polyline fill="none" stroke="black" points="1608.5,-385 1608.5,-379 "/>
<polyline fill="none" stroke="black" points="1614.5,-379 1608.5,-379 "/>
<text text-anchor="middle" x="1553" y="-373" font-family="Helvetica,sans-Serif" font-size="10.00">Configuration:</text>
<text text-anchor="middle" x="1553" y="-350" font-family="Helvetica,sans-Serif" font-size="10.00">Heartbeat interval: 5s</text>
<text text-anchor="middle" x="1553" y="-339" font-family="Helvetica,sans-Serif" font-size="10.00">Timeout: 30s</text>
<text text-anchor="middle" x="1553" y="-328" font-family="Helvetica,sans-Serif" font-size="10.00">Max reconnects: 10</text>
<text text-anchor="middle" x="1553" y="-317" font-family="Helvetica,sans-Serif" font-size="10.00">Reconnect delay: 5s</text>
</g>
<!-- D_FULL -->
<g id="node39" class="node">
<title>D_FULL</title>
<path fill="#9ae6b4" stroke="black" d="M2383.5,-374C2383.5,-374 2296.5,-374 2296.5,-374 2290.5,-374 2284.5,-368 2284.5,-362 2284.5,-362 2284.5,-333 2284.5,-333 2284.5,-327 2290.5,-321 2296.5,-321 2296.5,-321 2383.5,-321 2383.5,-321 2389.5,-321 2395.5,-327 2395.5,-333 2395.5,-333 2395.5,-362 2395.5,-362 2395.5,-368 2389.5,-374 2383.5,-374"/>
<text text-anchor="middle" x="2340" y="-362" font-family="Helvetica,sans-Serif" font-size="10.00">FULL</text>
<text text-anchor="middle" x="2340" y="-339" font-family="Helvetica,sans-Serif" font-size="10.00">All providers active</text>
<text text-anchor="middle" x="2340" y="-328" font-family="Helvetica,sans-Serif" font-size="10.00">All data types</text>
</g>
<!-- D_PARTIAL -->
<g id="node40" class="node">
<title>D_PARTIAL</title>
<path fill="#fbd38d" stroke="black" d="M2388,-264C2388,-264 2290,-264 2290,-264 2284,-264 2278,-258 2278,-252 2278,-252 2278,-223 2278,-223 2278,-217 2284,-211 2290,-211 2290,-211 2388,-211 2388,-211 2394,-211 2400,-217 2400,-223 2400,-223 2400,-252 2400,-252 2400,-258 2394,-264 2388,-264"/>
<text text-anchor="middle" x="2339" y="-252" font-family="Helvetica,sans-Serif" font-size="10.00">PARTIAL</text>
<text text-anchor="middle" x="2339" y="-229" font-family="Helvetica,sans-Serif" font-size="10.00">Some providers down</text>
<text text-anchor="middle" x="2339" y="-218" font-family="Helvetica,sans-Serif" font-size="10.00">Core data only</text>
</g>
<!-- D_FULL&#45;&gt;D_PARTIAL -->
<g id="edge26" class="edge">
<title>D_FULL&#45;&gt;D_PARTIAL</title>
<path fill="none" stroke="#ed8936" d="M2302.86,-320.85C2294.04,-312.74 2285.81,-302.99 2281,-292 2277.83,-284.75 2279.04,-278.05 2282.82,-272.02"/>
<polygon fill="#ed8936" stroke="#ed8936" points="2285.62,-274.13 2289.39,-264.22 2280.27,-269.61 2285.62,-274.13"/>
<text text-anchor="middle" x="2310" y="-284.8" font-family="Helvetica,sans-Serif" font-size="9.00">provider fails</text>
</g>
<!-- D_PARTIAL&#45;&gt;D_FULL -->
<g id="edge29" class="edge">
<title>D_PARTIAL&#45;&gt;D_FULL</title>
<path fill="none" stroke="#38a169" d="M2339.24,-264.29C2339.37,-278.2 2339.53,-295.6 2339.67,-310.8"/>
<polygon fill="#38a169" stroke="#38a169" points="2336.17,-310.94 2339.76,-320.91 2343.17,-310.87 2336.17,-310.94"/>
<text text-anchor="middle" x="2368" y="-284.8" font-family="Helvetica,sans-Serif" font-size="9.00">all recovered</text>
</g>
<!-- D_MINIMAL -->
<g id="node41" class="node">
<title>D_MINIMAL</title>
<path fill="#fc8181" stroke="black" d="M2367.5,-165C2367.5,-165 2304.5,-165 2304.5,-165 2298.5,-165 2292.5,-159 2292.5,-153 2292.5,-153 2292.5,-124 2292.5,-124 2292.5,-118 2298.5,-112 2304.5,-112 2304.5,-112 2367.5,-112 2367.5,-112 2373.5,-112 2379.5,-118 2379.5,-124 2379.5,-124 2379.5,-153 2379.5,-153 2379.5,-159 2373.5,-165 2367.5,-165"/>
<text text-anchor="middle" x="2336" y="-153" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">MINIMAL</text>
<text text-anchor="middle" x="2336" y="-130" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">Historical only</text>
<text text-anchor="middle" x="2336" y="-119" font-family="Helvetica,sans-Serif" font-size="10.00" fill="white">No real&#45;time</text>
</g>
<!-- D_PARTIAL&#45;&gt;D_MINIMAL -->
<g id="edge27" class="edge">
<title>D_PARTIAL&#45;&gt;D_MINIMAL</title>
<path fill="none" stroke="#e53e3e" d="M2304.15,-210.8C2299.21,-205.5 2294.85,-199.52 2292,-193 2288.99,-186.11 2290.07,-179.39 2293.44,-173.17"/>
<polygon fill="#e53e3e" stroke="#e53e3e" points="2296.29,-175.2 2299.26,-165.03 2290.6,-171.12 2296.29,-175.2"/>
<text text-anchor="middle" x="2318.5" y="-185.8" font-family="Helvetica,sans-Serif" font-size="9.00">multiple fail</text>
</g>
<!-- D_MINIMAL&#45;&gt;D_PARTIAL -->
<g id="edge28" class="edge">
<title>D_MINIMAL&#45;&gt;D_PARTIAL</title>
<path fill="none" stroke="#38a169" d="M2342.21,-165.13C2343.37,-170.97 2344.4,-177.17 2345,-183 2345.58,-188.69 2345.54,-194.73 2345.15,-200.61"/>
<polygon fill="#38a169" stroke="#38a169" points="2341.63,-200.63 2344.1,-210.93 2348.59,-201.33 2341.63,-200.63"/>
<text text-anchor="middle" x="2365" y="-185.8" font-family="Helvetica,sans-Serif" font-size="9.00">recovery</text>
</g>
<!-- DEGRADE_ACTIONS -->
<g id="node42" class="node">
<title>DEGRADE_ACTIONS</title>
<polygon fill="#edf2f7" stroke="black" points="2090,-385 1932,-385 1932,-310 2096,-310 2096,-379 2090,-385"/>
<polyline fill="none" stroke="black" points="2090,-385 2090,-379 "/>
<polyline fill="none" stroke="black" points="2096,-379 2090,-379 "/>
<text text-anchor="middle" x="2014" y="-373" font-family="Helvetica,sans-Serif" font-size="10.00">Actions:</text>
<text text-anchor="middle" x="2014" y="-350" font-family="Helvetica,sans-Serif" font-size="10.00">• Disable non&#45;critical features</text>
<text text-anchor="middle" x="2014" y="-339" font-family="Helvetica,sans-Serif" font-size="10.00">• Reduce polling frequency</text>
<text text-anchor="middle" x="2014" y="-328" font-family="Helvetica,sans-Serif" font-size="10.00">• Cache more aggressively</text>
<text text-anchor="middle" x="2014" y="-317" font-family="Helvetica,sans-Serif" font-size="10.00">• Alert operators</text>
</g>
<!-- LEG -->
<g id="node43" class="node">
<title>LEG</title>
<path fill="lightgrey" stroke="transparent" d="M3193.5,-870.48C3193.5,-870.48 3050.5,-870.48 3050.5,-870.48 3044.5,-870.48 3038.5,-864.48 3038.5,-858.48 3038.5,-858.48 3038.5,-807.48 3038.5,-807.48 3038.5,-801.48 3044.5,-795.48 3050.5,-795.48 3050.5,-795.48 3193.5,-795.48 3193.5,-795.48 3199.5,-795.48 3205.5,-801.48 3205.5,-807.48 3205.5,-807.48 3205.5,-858.48 3205.5,-858.48 3205.5,-864.48 3199.5,-870.48 3193.5,-870.48"/>
<text text-anchor="middle" x="3122" y="-858.48" font-family="Helvetica,sans-Serif" font-size="10.00">Green = Healthy/Success</text>
<text text-anchor="middle" x="3122" y="-847.48" font-family="Helvetica,sans-Serif" font-size="10.00">Yellow = Warning/Transitioning</text>
<text text-anchor="middle" x="3122" y="-836.48" font-family="Helvetica,sans-Serif" font-size="10.00">Red = Error/Failed</text>
<text text-anchor="middle" x="3122" y="-813.48" font-family="Helvetica,sans-Serif" font-size="10.00">━━ Normal flow</text>
<text text-anchor="middle" x="3122" y="-802.48" font-family="Helvetica,sans-Serif" font-size="10.00">─ ─ Error/Recovery flow</text>
</g>
</g>
</svg>
