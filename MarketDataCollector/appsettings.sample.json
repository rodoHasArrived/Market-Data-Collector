{
  // =============================================================================
  // MARKET DATA COLLECTOR - SAMPLE CONFIGURATION
  // =============================================================================
  // Copy this file to appsettings.json and update the values for your setup.
  //
  // Environment Variables (can override config values):
  //   MDC_DEBUG=true          - Enable debug logging
  //   ALPACA_KEY_ID           - Alpaca API Key ID (recommended over config file)
  //   ALPACA_SECRET_KEY       - Alpaca Secret Key (recommended over config file)
  //
  // For more details, see docs/CONFIGURATION.md
  // =============================================================================

  // ---------------------------------------------------------------------------
  // DATA STORAGE SETTINGS
  // ---------------------------------------------------------------------------

  // Root directory for all data output (relative or absolute path)
  "DataRoot": "data",

  // Enable gzip compression for JSONL files (.jsonl.gz)
  "Compress": false,

  // ---------------------------------------------------------------------------
  // HISTORICAL BACKFILL DEFAULTS (OPTIONAL)
  // ---------------------------------------------------------------------------
  // When enabled, the collector will pull free end-of-day bars instead of
  // live streaming data. You can also trigger a backfill from the UI.
  "Backfill": {
    "Enabled": false,
    "Provider": "stooq",
    "Symbols": ["SPY", "QQQ"],
    "From": "2024-01-01",
    "To": "2024-01-05"
  },

  // ---------------------------------------------------------------------------
  // DATA SOURCE SELECTION
  // ---------------------------------------------------------------------------

  // Available options: "IB" (Interactive Brokers), "Alpaca", "Polygon"
  // Only one provider can be active at a time
  "DataSource": "IB",

  // ---------------------------------------------------------------------------
  // INTERACTIVE BROKERS (IB) - No additional config needed
  // ---------------------------------------------------------------------------
  // IB configuration is handled through symbol settings below.
  // Prerequisites:
  //   1. Install IB TWS or IB Gateway
  //   2. Enable API connections in TWS: File -> Global Configuration -> API -> Settings
  //   3. Ensure "Enable ActiveX and Socket Clients" is checked
  //   4. Note the port (default 7497 for TWS paper, 7496 for live)
  // See docs/interactive-brokers-setup.md for detailed setup instructions.

  // ---------------------------------------------------------------------------
  // ALPACA SETTINGS
  // ---------------------------------------------------------------------------
  // Required when DataSource is set to "Alpaca"
  "Alpaca": {
    // Your Alpaca API Key ID
    // SECURITY: Consider using environment variable ALPACA_KEY_ID instead
    "KeyId": "__SET_ME__",

    // Your Alpaca Secret Key
    // SECURITY: Consider using environment variable ALPACA_SECRET_KEY instead
    "SecretKey": "__SET_ME__",

    // Data feed to use: "iex" (free) or "sip" (paid, requires subscription)
    // IEX provides 15-min delayed data for free accounts
    // SIP provides real-time consolidated data (requires Alpaca paid plan)
    "Feed": "iex",

    // Use sandbox environment for testing (paper trading)
    "UseSandbox": false,

    // Subscribe to quote data (BBO updates) in addition to trades
    "SubscribeQuotes": false
  },

  // ---------------------------------------------------------------------------
  // STORAGE CONFIGURATION
  // ---------------------------------------------------------------------------
  "Storage": {
    // File naming convention:
    //   "Flat"     - {root}/{symbol}_{type}_{date}.jsonl
    //   "BySymbol" - {root}/{symbol}/{type}/{date}.jsonl (DEFAULT)
    //   "ByDate"   - {root}/{date}/{symbol}/{type}.jsonl
    //   "ByType"   - {root}/{type}/{symbol}/{date}.jsonl
    "NamingConvention": "BySymbol",

    // Date partitioning:
    //   "None"    - Single file per symbol/type
    //   "Daily"   - One file per day (DEFAULT)
    //   "Hourly"  - One file per hour (for high-volume scenarios)
    //   "Monthly" - One file per month (for long-term storage)
    "DatePartition": "Daily",

    // Include provider name in file path
    "IncludeProvider": false,

    // Optional prefix for all file names
    "FilePrefix": null,

    // Auto-delete files older than this many days (null = keep forever)
    "RetentionDays": null,

    // Maximum total storage in MB (null = unlimited)
    // When exceeded, oldest files are removed first
    "MaxTotalMegabytes": null
  },

  // ---------------------------------------------------------------------------
  // SYMBOL SUBSCRIPTIONS
  // ---------------------------------------------------------------------------
  // Array of symbols to subscribe to. Each symbol can have its own settings.
  "Symbols": [
    // Example 1: Standard stock with all data
    {
      "Symbol": "SPY",
      "SubscribeTrades": true,
      "SubscribeDepth": true,
      "DepthLevels": 10,

      // IB-specific contract fields (ignored for Alpaca)
      "SecurityType": "STK",
      "Exchange": "SMART",
      "Currency": "USD",
      "PrimaryExchange": "ARCA"
    },

    // Example 2: Standard stock, trades only
    {
      "Symbol": "AAPL",
      "SubscribeTrades": true,
      "SubscribeDepth": false,
      "DepthLevels": 10,
      "SecurityType": "STK",
      "Exchange": "SMART",
      "Currency": "USD",
      "PrimaryExchange": "NASDAQ"
    },

    // Example 3: Preferred shares (IB requires LocalSymbol)
    {
      "Symbol": "PCG-PA",
      "SubscribeTrades": true,
      "SubscribeDepth": true,
      "DepthLevels": 10,
      "SecurityType": "STK",
      "Exchange": "SMART",
      "Currency": "USD",
      "PrimaryExchange": "NYSE",
      "LocalSymbol": "PCG PRA"
    }

    // Example 4: Futures contract (uncomment to use)
    // {
    //   "Symbol": "ES",
    //   "SubscribeTrades": true,
    //   "SubscribeDepth": true,
    //   "DepthLevels": 10,
    //   "SecurityType": "FUT",
    //   "Exchange": "CME",
    //   "Currency": "USD",
    //   "LocalSymbol": "ESH5"  // March 2025 contract
    // }
  ],

  // ---------------------------------------------------------------------------
  // LOGGING CONFIGURATION (Serilog)
  // ---------------------------------------------------------------------------
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "data/_logs/mdc-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 30
        }
      }
    ]
  }
}
